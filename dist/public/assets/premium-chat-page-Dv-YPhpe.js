import{u as U0,a as I0,r as G,n as H0,ak as be,b as u0,j as e,B as X,q as h0,ax as ge,aG as Gr,ay as ye,az as je,aA as _e,aB as we,al as ke,am as J,an as e0,ao as x0,at as r0,I as i0,au as f0,as as t0,av as P0,a_ as rr,a$ as tr,b0 as ar,b1 as xr,bl as _0,b2 as sr,aC as Ne,aZ as ut,C as ze,d as qe,e as Ue,f as Yr,Z as vt,_ as pt,$ as mt,w as nr,b4 as w0,bb as Ct,a0 as Bt,g as Ie,Q as Qr,s as Et,aE as o0,aF as Se,t as E0,bm as At,bn as T,bo as Ft,bp as Zr,aI as Dt,X as R0,a9 as bt,bq as gt,br as yt,bs as jt,bt as ir,a4 as _t,bu as wt,bv as kt,bw as Nt,bg as St,A as z0,h as Re,i as q0,aw as Rt,aJ as Ht,aj as Pt,a3 as He,V as or,G as zt,y as qt,z as Ut,D as cr,F as lr}from"./index-CriQqr38.js";import{C as It}from"./circle-plus-BfB74KfW.js";import{S as Tt}from"./square-pen-DUcQ0uPy.js";import{T as Wt}from"./trash-2-D2kKAsUM.js";import{E as Lt}from"./ellipsis-vertical-QooTdRX_.js";import{U as Ot}from"./user-x-G-kwTw0P.js";const dr=o0.object({name:o0.string().min(3,"Name must be at least 3 characters").max(50,"Name must be less than 50 characters"),description:o0.string().min(10,"Description must be at least 10 characters").max(200,"Description must be less than 200 characters"),emotion:o0.enum(["happy","sad","angry","anxious","excited","neutral"]),isPrivate:o0.boolean().default(!0),maxParticipants:o0.coerce.number().int().min(2,"Minimum 2 participants required").max(100,"Maximum 100 participants allowed"),themeColor:o0.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Must be a valid hex color").default("#6366f1")});function Kt({onOpenChatRoom:w}){const{user:P}=U0(),{toast:v}=I0(),[i,B]=G.useState(!1),[F,y]=G.useState(!1),[p,u]=G.useState(null),{data:r=[],isLoading:x,error:m}=H0({queryKey:["/api/premium/chat-rooms"],queryFn:async()=>{const n=await fetch("/api/premium/chat-rooms");if(!n.ok)throw new Error("Failed to load chat rooms");return n.json()},enabled:!!(P!=null&&P.isPremium)}),t=be({resolver:Se(dr),defaultValues:{name:"",description:"",emotion:"neutral",isPrivate:!0,maxParticipants:20,themeColor:"#6366f1"}}),c=be({resolver:Se(dr),defaultValues:{name:"",description:"",emotion:"neutral",isPrivate:!0,maxParticipants:20,themeColor:"#6366f1"}}),l=u0({mutationFn:n=>E0("POST","/api/premium/chat-rooms",n),onSuccess:()=>{v({title:"Chat room created",description:"Your new chat room has been created successfully"}),B(!1),t.reset(),h0.invalidateQueries({queryKey:["/api/premium/chat-rooms"]})},onError:n=>{v({title:"Failed to create chat room",description:n instanceof Error?n.message:"An error occurred",variant:"destructive"})}}),h=u0({mutationFn:({id:n,data:a})=>E0("PUT",`/api/premium/chat-rooms/${n}`,a),onSuccess:()=>{v({title:"Chat room updated",description:"Your chat room has been updated successfully"}),y(!1),u(null),h0.invalidateQueries({queryKey:["/api/premium/chat-rooms"]})},onError:n=>{v({title:"Failed to update chat room",description:n instanceof Error?n.message:"An error occurred",variant:"destructive"})}}),d=u0({mutationFn:n=>E0("DELETE",`/api/premium/chat-rooms/${n}`),onSuccess:()=>{v({title:"Chat room deleted",description:"Your chat room has been deleted successfully"}),h0.invalidateQueries({queryKey:["/api/premium/chat-rooms"]})},onError:n=>{v({title:"Failed to delete chat room",description:n instanceof Error?n.message:"An error occurred",variant:"destructive"})}}),E=n=>{l.mutate(n)},s=n=>{p&&h.mutate({id:p.id,data:n})},o=n=>{u(n),c.reset({name:n.name,description:n.description,emotion:n.emotion,isPrivate:n.isPrivate,maxParticipants:n.maxParticipants,themeColor:n.themeColor||"#6366f1"}),y(!0)},f=n=>{window.confirm("Are you sure you want to delete this chat room? This action cannot be undone.")&&d.mutate(n)};return P&&!P.isPremium?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Premium Feature"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This feature is only available to premium members. Upgrade to premium to create and manage private chat rooms."}),e.jsx(X,{className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white",children:"Upgrade to Premium"})]}):x?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):m?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m instanceof Error?m.message:"Failed to load chat rooms"}),e.jsx(X,{onClick:()=>h0.invalidateQueries({queryKey:["/api/premium/chat-rooms"]}),children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Private Chat Rooms"}),e.jsxs(ge,{open:i,onOpenChange:B,children:[e.jsx(Gr,{asChild:!0,children:e.jsxs(X,{children:[e.jsx(It,{className:"h-4 w-4 mr-2"}),"Create Chat Room"]})}),e.jsxs(ye,{className:"sm:max-w-[525px]",children:[e.jsxs(je,{children:[e.jsx(_e,{children:"Create New Chat Room"}),e.jsx(we,{children:"Create a new private chat room to connect with others based on shared emotions."})]}),e.jsx(ke,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(E),className:"space-y-4 pt-4",children:[e.jsx(J,{control:t.control,name:"name",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Room Name"}),e.jsx(r0,{children:e.jsx(i0,{placeholder:"Enter a name for your chat room",...n})}),e.jsx(f0,{children:"Choose a name that reflects the purpose of your chat room."}),e.jsx(t0,{})]})}),e.jsx(J,{control:t.control,name:"description",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Description"}),e.jsx(r0,{children:e.jsx(P0,{placeholder:"Describe what this chat room is about...",...n})}),e.jsx(f0,{children:"Provide a brief description to help others understand the purpose."}),e.jsx(t0,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(J,{control:t.control,name:"emotion",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Primary Emotion"}),e.jsxs(rr,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(r0,{children:e.jsx(tr,{children:e.jsx(ar,{placeholder:"Select an emotion"})})}),e.jsx(xr,{children:Object.entries(_0).map(([a,A])=>e.jsx(sr,{value:a,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:A.color}}),a.charAt(0).toUpperCase()+a.slice(1)]})},a))})]}),e.jsx(f0,{children:"The primary emotion for this chat room."}),e.jsx(t0,{})]})}),e.jsx(J,{control:t.control,name:"maxParticipants",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Max Participants"}),e.jsx(r0,{children:e.jsx(i0,{type:"number",min:2,max:100,...n})}),e.jsx(f0,{children:"Limit the number of participants."}),e.jsx(t0,{})]})})]}),e.jsx(J,{control:t.control,name:"themeColor",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Theme Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r0,{children:e.jsx(i0,{type:"color",...n,className:"w-12 h-9 p-1 cursor-pointer"})}),e.jsx(i0,{type:"text",value:n.value,onChange:a=>n.onChange(a.target.value),className:"flex-1",placeholder:"#6366f1"})]}),e.jsx(f0,{children:"Choose a custom color for your chat room."}),e.jsx(t0,{})]})}),e.jsx(J,{control:t.control,name:"isPrivate",render:({field:n})=>e.jsxs(e0,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(r0,{children:e.jsx("input",{type:"checkbox",checked:n.value,onChange:n.onChange,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(x0,{children:"Make this chat room private"}),e.jsx(f0,{children:"Private rooms are only accessible by invitation."})]}),e.jsx(t0,{})]})}),e.jsxs(Ne,{children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>B(!1),children:"Cancel"}),e.jsx(X,{type:"submit",disabled:l.isPending,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}),"Creating..."]}):"Create Chat Room"})]})]})})]})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 text-primary flex items-center justify-center mx-auto mb-4",children:e.jsx(ut,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Chat Rooms Yet"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You haven't created any private chat rooms yet. Create your first room to start connecting with others."}),e.jsx(X,{onClick:()=>B(!0),children:"Create Your First Chat Room"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(n=>{const a=n.createdBy===(P==null?void 0:P.id),A=_0[n.emotion].color,b=n.themeColor||A;return e.jsxs(ze,{className:"overflow-hidden border-t-4",style:{borderTopColor:b},children:[e.jsx(qe,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Ue,{children:n.name}),e.jsx(Yr,{className:"mt-1",children:n.description.length>100?`${n.description.substring(0,100)}...`:n.description})]}),e.jsx(vt,{children:e.jsxs(pt,{children:[e.jsx(mt,{asChild:!0,children:e.jsxs(nr,{variant:n.isPrivate?"outline":"secondary",children:[n.isPrivate?e.jsx(w0,{className:"h-3 w-3 mr-1"}):e.jsx(Ct,{className:"h-3 w-3 mr-1"}),n.isPrivate?"Private":"Public"]})}),e.jsx(Bt,{children:n.isPrivate?"Only invited users can join this room":"Anyone can join this room"})]})})]})}),e.jsx(Ie,{children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(nr,{variant:"outline",className:"flex items-center",style:{color:A,borderColor:A},children:n.emotion.charAt(0).toUpperCase()+n.emotion.slice(1)})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qr,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[n.participants,"/",n.maxParticipants]})]})]})}),e.jsxs(Et,{className:"flex justify-between pt-1",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-500",children:e.jsxs("span",{children:["Created ",new Date(n.createdAt).toLocaleDateString()]})}),e.jsxs("div",{className:"space-x-2",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",variant:"ghost",onClick:()=>o(n),children:e.jsx(Tt,{className:"h-4 w-4"})}),e.jsx(X,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600",onClick:()=>f(n.id),children:e.jsx(Wt,{className:"h-4 w-4"})})]}),e.jsx(X,{size:"sm",onClick:()=>w(n.id),children:"Join"})]})]})]},n.id)})}),e.jsx(ge,{open:F,onOpenChange:y,children:e.jsxs(ye,{className:"sm:max-w-[525px]",children:[e.jsxs(je,{children:[e.jsx(_e,{children:"Edit Chat Room"}),e.jsx(we,{children:"Update your chat room settings."})]}),p&&e.jsx(ke,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(s),className:"space-y-4 pt-4",children:[e.jsx(J,{control:c.control,name:"name",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Room Name"}),e.jsx(r0,{children:e.jsx(i0,{...n})}),e.jsx(t0,{})]})}),e.jsx(J,{control:c.control,name:"description",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Description"}),e.jsx(r0,{children:e.jsx(P0,{...n})}),e.jsx(t0,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(J,{control:c.control,name:"emotion",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Primary Emotion"}),e.jsxs(rr,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(r0,{children:e.jsx(tr,{children:e.jsx(ar,{placeholder:"Select an emotion"})})}),e.jsx(xr,{children:Object.entries(_0).map(([a,A])=>e.jsx(sr,{value:a,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:A.color}}),a.charAt(0).toUpperCase()+a.slice(1)]})},a))})]}),e.jsx(t0,{})]})}),e.jsx(J,{control:c.control,name:"maxParticipants",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Max Participants"}),e.jsx(r0,{children:e.jsx(i0,{type:"number",min:2,max:100,...n})}),e.jsx(t0,{})]})})]}),e.jsx(J,{control:c.control,name:"themeColor",render:({field:n})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Theme Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r0,{children:e.jsx(i0,{type:"color",...n,className:"w-12 h-9 p-1 cursor-pointer"})}),e.jsx(i0,{type:"text",value:n.value,onChange:a=>n.onChange(a.target.value),className:"flex-1"})]}),e.jsx(t0,{})]})}),e.jsxs(Ne,{children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(X,{type:"submit",disabled:h.isPending,children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}),"Updating..."]}):"Save Changes"})]})]})})]})})]})}var Vr={exports:{}};function $t(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var O0={exports:{}};const Mt={},Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),Gt=At(Xt);var fr;function O(){return fr||(fr=1,function(w,P){(function(v,i){w.exports=i()})(T,function(){var v=v||function(i,B){var F;if(typeof window<"u"&&window.crypto&&(F=window.crypto),typeof self<"u"&&self.crypto&&(F=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(F=globalThis.crypto),!F&&typeof window<"u"&&window.msCrypto&&(F=window.msCrypto),!F&&typeof T<"u"&&T.crypto&&(F=T.crypto),!F&&typeof $t=="function")try{F=Gt}catch{}var y=function(){if(F){if(typeof F.getRandomValues=="function")try{return F.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof F.randomBytes=="function")try{return F.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function s(){}return function(o){var f;return s.prototype=o,f=new s,s.prototype=null,f}}(),u={},r=u.lib={},x=r.Base=function(){return{extend:function(s){var o=p(this);return s&&o.mixIn(s),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var s=this.extend();return s.init.apply(s,arguments),s},init:function(){},mixIn:function(s){for(var o in s)s.hasOwnProperty(o)&&(this[o]=s[o]);s.hasOwnProperty("toString")&&(this.toString=s.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=r.WordArray=x.extend({init:function(s,o){s=this.words=s||[],o!=B?this.sigBytes=o:this.sigBytes=s.length*4},toString:function(s){return(s||c).stringify(this)},concat:function(s){var o=this.words,f=s.words,n=this.sigBytes,a=s.sigBytes;if(this.clamp(),n%4)for(var A=0;A<a;A++){var b=f[A>>>2]>>>24-A%4*8&255;o[n+A>>>2]|=b<<24-(n+A)%4*8}else for(var R=0;R<a;R+=4)o[n+R>>>2]=f[R>>>2];return this.sigBytes+=a,this},clamp:function(){var s=this.words,o=this.sigBytes;s[o>>>2]&=4294967295<<32-o%4*8,s.length=i.ceil(o/4)},clone:function(){var s=x.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var o=[],f=0;f<s;f+=4)o.push(y());return new m.init(o,s)}}),t=u.enc={},c=t.Hex={stringify:function(s){for(var o=s.words,f=s.sigBytes,n=[],a=0;a<f;a++){var A=o[a>>>2]>>>24-a%4*8&255;n.push((A>>>4).toString(16)),n.push((A&15).toString(16))}return n.join("")},parse:function(s){for(var o=s.length,f=[],n=0;n<o;n+=2)f[n>>>3]|=parseInt(s.substr(n,2),16)<<24-n%8*4;return new m.init(f,o/2)}},l=t.Latin1={stringify:function(s){for(var o=s.words,f=s.sigBytes,n=[],a=0;a<f;a++){var A=o[a>>>2]>>>24-a%4*8&255;n.push(String.fromCharCode(A))}return n.join("")},parse:function(s){for(var o=s.length,f=[],n=0;n<o;n++)f[n>>>2]|=(s.charCodeAt(n)&255)<<24-n%4*8;return new m.init(f,o)}},h=t.Utf8={stringify:function(s){try{return decodeURIComponent(escape(l.stringify(s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(s){return l.parse(unescape(encodeURIComponent(s)))}},d=r.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=h.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var o,f=this._data,n=f.words,a=f.sigBytes,A=this.blockSize,b=A*4,R=a/b;s?R=i.ceil(R):R=i.max((R|0)-this._minBufferSize,0);var C=R*A,D=i.min(C*4,a);if(C){for(var j=0;j<C;j+=A)this._doProcessBlock(n,j);o=n.splice(0,C),f.sigBytes-=D}return new m.init(o,D)},clone:function(){var s=x.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0});r.Hasher=d.extend({cfg:x.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){s&&this._append(s);var o=this._doFinalize();return o},blockSize:16,_createHelper:function(s){return function(o,f){return new s.init(f).finalize(o)}},_createHmacHelper:function(s){return function(o,f){return new E.HMAC.init(s,f).finalize(o)}}});var E=u.algo={};return u}(Math);return v})}(O0)),O0.exports}var K0={exports:{}},hr;function T0(){return hr||(hr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(i){var B=v,F=B.lib,y=F.Base,p=F.WordArray,u=B.x64={};u.Word=y.extend({init:function(r,x){this.high=r,this.low=x}}),u.WordArray=y.extend({init:function(r,x){r=this.words=r||[],x!=i?this.sigBytes=x:this.sigBytes=r.length*8},toX32:function(){for(var r=this.words,x=r.length,m=[],t=0;t<x;t++){var c=r[t];m.push(c.high),m.push(c.low)}return p.create(m,this.sigBytes)},clone:function(){for(var r=y.clone.call(this),x=r.words=this.words.slice(0),m=x.length,t=0;t<m;t++)x[t]=x[t].clone();return r}})}(),v})}(K0)),K0.exports}var $0={exports:{}},ur;function Yt(){return ur||(ur=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(){if(typeof ArrayBuffer=="function"){var i=v,B=i.lib,F=B.WordArray,y=F.init,p=F.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var r=u.byteLength,x=[],m=0;m<r;m++)x[m>>>2]|=u[m]<<24-m%4*8;y.call(this,x,r)}else y.apply(this,arguments)};p.prototype=F}}(),v.lib.WordArray})}($0)),$0.exports}var M0={exports:{}},vr;function Qt(){return vr||(vr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=i.enc;y.Utf16=y.Utf16BE={stringify:function(u){for(var r=u.words,x=u.sigBytes,m=[],t=0;t<x;t+=2){var c=r[t>>>2]>>>16-t%4*8&65535;m.push(String.fromCharCode(c))}return m.join("")},parse:function(u){for(var r=u.length,x=[],m=0;m<r;m++)x[m>>>1]|=u.charCodeAt(m)<<16-m%2*16;return F.create(x,r*2)}},y.Utf16LE={stringify:function(u){for(var r=u.words,x=u.sigBytes,m=[],t=0;t<x;t+=2){var c=p(r[t>>>2]>>>16-t%4*8&65535);m.push(String.fromCharCode(c))}return m.join("")},parse:function(u){for(var r=u.length,x=[],m=0;m<r;m++)x[m>>>1]|=p(u.charCodeAt(m)<<16-m%2*16);return F.create(x,r*2)}};function p(u){return u<<8&4278255360|u>>>8&16711935}}(),v.enc.Utf16})}(M0)),M0.exports}var X0={exports:{}},pr;function v0(){return pr||(pr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=i.enc;y.Base64={stringify:function(u){var r=u.words,x=u.sigBytes,m=this._map;u.clamp();for(var t=[],c=0;c<x;c+=3)for(var l=r[c>>>2]>>>24-c%4*8&255,h=r[c+1>>>2]>>>24-(c+1)%4*8&255,d=r[c+2>>>2]>>>24-(c+2)%4*8&255,E=l<<16|h<<8|d,s=0;s<4&&c+s*.75<x;s++)t.push(m.charAt(E>>>6*(3-s)&63));var o=m.charAt(64);if(o)for(;t.length%4;)t.push(o);return t.join("")},parse:function(u){var r=u.length,x=this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var t=0;t<x.length;t++)m[x.charCodeAt(t)]=t}var c=x.charAt(64);if(c){var l=u.indexOf(c);l!==-1&&(r=l)}return p(u,r,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function p(u,r,x){for(var m=[],t=0,c=0;c<r;c++)if(c%4){var l=x[u.charCodeAt(c-1)]<<c%4*2,h=x[u.charCodeAt(c)]>>>6-c%4*2,d=l|h;m[t>>>2]|=d<<24-t%4*8,t++}return F.create(m,t)}}(),v.enc.Base64})}(X0)),X0.exports}var G0={exports:{}},mr;function Zt(){return mr||(mr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=i.enc;y.Base64url={stringify:function(u,r){r===void 0&&(r=!0);var x=u.words,m=u.sigBytes,t=r?this._safe_map:this._map;u.clamp();for(var c=[],l=0;l<m;l+=3)for(var h=x[l>>>2]>>>24-l%4*8&255,d=x[l+1>>>2]>>>24-(l+1)%4*8&255,E=x[l+2>>>2]>>>24-(l+2)%4*8&255,s=h<<16|d<<8|E,o=0;o<4&&l+o*.75<m;o++)c.push(t.charAt(s>>>6*(3-o)&63));var f=t.charAt(64);if(f)for(;c.length%4;)c.push(f);return c.join("")},parse:function(u,r){r===void 0&&(r=!0);var x=u.length,m=r?this._safe_map:this._map,t=this._reverseMap;if(!t){t=this._reverseMap=[];for(var c=0;c<m.length;c++)t[m.charCodeAt(c)]=c}var l=m.charAt(64);if(l){var h=u.indexOf(l);h!==-1&&(x=h)}return p(u,x,t)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function p(u,r,x){for(var m=[],t=0,c=0;c<r;c++)if(c%4){var l=x[u.charCodeAt(c-1)]<<c%4*2,h=x[u.charCodeAt(c)]>>>6-c%4*2,d=l|h;m[t>>>2]|=d<<24-t%4*8,t++}return F.create(m,t)}}(),v.enc.Base64url})}(G0)),G0.exports}var Y0={exports:{}},Cr;function p0(){return Cr||(Cr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(i){var B=v,F=B.lib,y=F.WordArray,p=F.Hasher,u=B.algo,r=[];(function(){for(var h=0;h<64;h++)r[h]=i.abs(i.sin(h+1))*4294967296|0})();var x=u.MD5=p.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,d){for(var E=0;E<16;E++){var s=d+E,o=h[s];h[s]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}var f=this._hash.words,n=h[d+0],a=h[d+1],A=h[d+2],b=h[d+3],R=h[d+4],C=h[d+5],D=h[d+6],j=h[d+7],_=h[d+8],z=h[d+9],q=h[d+10],U=h[d+11],H=h[d+12],I=h[d+13],L=h[d+14],K=h[d+15],g=f[0],N=f[1],S=f[2],k=f[3];g=m(g,N,S,k,n,7,r[0]),k=m(k,g,N,S,a,12,r[1]),S=m(S,k,g,N,A,17,r[2]),N=m(N,S,k,g,b,22,r[3]),g=m(g,N,S,k,R,7,r[4]),k=m(k,g,N,S,C,12,r[5]),S=m(S,k,g,N,D,17,r[6]),N=m(N,S,k,g,j,22,r[7]),g=m(g,N,S,k,_,7,r[8]),k=m(k,g,N,S,z,12,r[9]),S=m(S,k,g,N,q,17,r[10]),N=m(N,S,k,g,U,22,r[11]),g=m(g,N,S,k,H,7,r[12]),k=m(k,g,N,S,I,12,r[13]),S=m(S,k,g,N,L,17,r[14]),N=m(N,S,k,g,K,22,r[15]),g=t(g,N,S,k,a,5,r[16]),k=t(k,g,N,S,D,9,r[17]),S=t(S,k,g,N,U,14,r[18]),N=t(N,S,k,g,n,20,r[19]),g=t(g,N,S,k,C,5,r[20]),k=t(k,g,N,S,q,9,r[21]),S=t(S,k,g,N,K,14,r[22]),N=t(N,S,k,g,R,20,r[23]),g=t(g,N,S,k,z,5,r[24]),k=t(k,g,N,S,L,9,r[25]),S=t(S,k,g,N,b,14,r[26]),N=t(N,S,k,g,_,20,r[27]),g=t(g,N,S,k,I,5,r[28]),k=t(k,g,N,S,A,9,r[29]),S=t(S,k,g,N,j,14,r[30]),N=t(N,S,k,g,H,20,r[31]),g=c(g,N,S,k,C,4,r[32]),k=c(k,g,N,S,_,11,r[33]),S=c(S,k,g,N,U,16,r[34]),N=c(N,S,k,g,L,23,r[35]),g=c(g,N,S,k,a,4,r[36]),k=c(k,g,N,S,R,11,r[37]),S=c(S,k,g,N,j,16,r[38]),N=c(N,S,k,g,q,23,r[39]),g=c(g,N,S,k,I,4,r[40]),k=c(k,g,N,S,n,11,r[41]),S=c(S,k,g,N,b,16,r[42]),N=c(N,S,k,g,D,23,r[43]),g=c(g,N,S,k,z,4,r[44]),k=c(k,g,N,S,H,11,r[45]),S=c(S,k,g,N,K,16,r[46]),N=c(N,S,k,g,A,23,r[47]),g=l(g,N,S,k,n,6,r[48]),k=l(k,g,N,S,j,10,r[49]),S=l(S,k,g,N,L,15,r[50]),N=l(N,S,k,g,C,21,r[51]),g=l(g,N,S,k,H,6,r[52]),k=l(k,g,N,S,b,10,r[53]),S=l(S,k,g,N,q,15,r[54]),N=l(N,S,k,g,a,21,r[55]),g=l(g,N,S,k,_,6,r[56]),k=l(k,g,N,S,K,10,r[57]),S=l(S,k,g,N,D,15,r[58]),N=l(N,S,k,g,I,21,r[59]),g=l(g,N,S,k,R,6,r[60]),k=l(k,g,N,S,U,10,r[61]),S=l(S,k,g,N,A,15,r[62]),N=l(N,S,k,g,z,21,r[63]),f[0]=f[0]+g|0,f[1]=f[1]+N|0,f[2]=f[2]+S|0,f[3]=f[3]+k|0},_doFinalize:function(){var h=this._data,d=h.words,E=this._nDataBytes*8,s=h.sigBytes*8;d[s>>>5]|=128<<24-s%32;var o=i.floor(E/4294967296),f=E;d[(s+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,d[(s+64>>>9<<4)+14]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,h.sigBytes=(d.length+1)*4,this._process();for(var n=this._hash,a=n.words,A=0;A<4;A++){var b=a[A];a[A]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return n},clone:function(){var h=p.clone.call(this);return h._hash=this._hash.clone(),h}});function m(h,d,E,s,o,f,n){var a=h+(d&E|~d&s)+o+n;return(a<<f|a>>>32-f)+d}function t(h,d,E,s,o,f,n){var a=h+(d&s|E&~s)+o+n;return(a<<f|a>>>32-f)+d}function c(h,d,E,s,o,f,n){var a=h+(d^E^s)+o+n;return(a<<f|a>>>32-f)+d}function l(h,d,E,s,o,f,n){var a=h+(E^(d|~s))+o+n;return(a<<f|a>>>32-f)+d}B.MD5=p._createHelper(x),B.HmacMD5=p._createHmacHelper(x)}(Math),v.MD5})}(Y0)),Y0.exports}var Q0={exports:{}},Br;function Jr(){return Br||(Br=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=B.Hasher,p=i.algo,u=[],r=p.SHA1=y.extend({_doReset:function(){this._hash=new F.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,m){for(var t=this._hash.words,c=t[0],l=t[1],h=t[2],d=t[3],E=t[4],s=0;s<80;s++){if(s<16)u[s]=x[m+s]|0;else{var o=u[s-3]^u[s-8]^u[s-14]^u[s-16];u[s]=o<<1|o>>>31}var f=(c<<5|c>>>27)+E+u[s];s<20?f+=(l&h|~l&d)+1518500249:s<40?f+=(l^h^d)+1859775393:s<60?f+=(l&h|l&d|h&d)-1894007588:f+=(l^h^d)-899497514,E=d,d=h,h=l<<30|l>>>2,l=c,c=f}t[0]=t[0]+c|0,t[1]=t[1]+l|0,t[2]=t[2]+h|0,t[3]=t[3]+d|0,t[4]=t[4]+E|0},_doFinalize:function(){var x=this._data,m=x.words,t=this._nDataBytes*8,c=x.sigBytes*8;return m[c>>>5]|=128<<24-c%32,m[(c+64>>>9<<4)+14]=Math.floor(t/4294967296),m[(c+64>>>9<<4)+15]=t,x.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var x=y.clone.call(this);return x._hash=this._hash.clone(),x}});i.SHA1=y._createHelper(r),i.HmacSHA1=y._createHmacHelper(r)}(),v.SHA1})}(Q0)),Q0.exports}var Z0={exports:{}},Er;function Te(){return Er||(Er=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){return function(i){var B=v,F=B.lib,y=F.WordArray,p=F.Hasher,u=B.algo,r=[],x=[];(function(){function c(E){for(var s=i.sqrt(E),o=2;o<=s;o++)if(!(E%o))return!1;return!0}function l(E){return(E-(E|0))*4294967296|0}for(var h=2,d=0;d<64;)c(h)&&(d<8&&(r[d]=l(i.pow(h,1/2))),x[d]=l(i.pow(h,1/3)),d++),h++})();var m=[],t=u.SHA256=p.extend({_doReset:function(){this._hash=new y.init(r.slice(0))},_doProcessBlock:function(c,l){for(var h=this._hash.words,d=h[0],E=h[1],s=h[2],o=h[3],f=h[4],n=h[5],a=h[6],A=h[7],b=0;b<64;b++){if(b<16)m[b]=c[l+b]|0;else{var R=m[b-15],C=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,D=m[b-2],j=(D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10;m[b]=C+m[b-7]+j+m[b-16]}var _=f&n^~f&a,z=d&E^d&s^E&s,q=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),U=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),H=A+U+_+x[b]+m[b],I=q+z;A=a,a=n,n=f,f=o+H|0,o=s,s=E,E=d,d=H+I|0}h[0]=h[0]+d|0,h[1]=h[1]+E|0,h[2]=h[2]+s|0,h[3]=h[3]+o|0,h[4]=h[4]+f|0,h[5]=h[5]+n|0,h[6]=h[6]+a|0,h[7]=h[7]+A|0},_doFinalize:function(){var c=this._data,l=c.words,h=this._nDataBytes*8,d=c.sigBytes*8;return l[d>>>5]|=128<<24-d%32,l[(d+64>>>9<<4)+14]=i.floor(h/4294967296),l[(d+64>>>9<<4)+15]=h,c.sigBytes=l.length*4,this._process(),this._hash},clone:function(){var c=p.clone.call(this);return c._hash=this._hash.clone(),c}});B.SHA256=p._createHelper(t),B.HmacSHA256=p._createHmacHelper(t)}(Math),v.SHA256})}(Z0)),Z0.exports}var V0={exports:{}},Ar;function Vt(){return Ar||(Ar=1,function(w,P){(function(v,i,B){w.exports=i(O(),Te())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=i.algo,p=y.SHA256,u=y.SHA224=p.extend({_doReset:function(){this._hash=new F.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var r=p._doFinalize.call(this);return r.sigBytes-=4,r}});i.SHA224=p._createHelper(u),i.HmacSHA224=p._createHmacHelper(u)}(),v.SHA224})}(V0)),V0.exports}var J0={exports:{}},Fr;function et(){return Fr||(Fr=1,function(w,P){(function(v,i,B){w.exports=i(O(),T0())})(T,function(v){return function(){var i=v,B=i.lib,F=B.Hasher,y=i.x64,p=y.Word,u=y.WordArray,r=i.algo;function x(){return p.create.apply(p,arguments)}var m=[x(1116352408,3609767458),x(1899447441,602891725),x(3049323471,3964484399),x(3921009573,2173295548),x(961987163,4081628472),x(1508970993,3053834265),x(2453635748,2937671579),x(2870763221,3664609560),x(3624381080,2734883394),x(310598401,1164996542),x(607225278,1323610764),x(1426881987,3590304994),x(1925078388,4068182383),x(2162078206,991336113),x(2614888103,633803317),x(3248222580,3479774868),x(3835390401,2666613458),x(4022224774,944711139),x(264347078,2341262773),x(604807628,2007800933),x(770255983,1495990901),x(1249150122,1856431235),x(1555081692,3175218132),x(1996064986,2198950837),x(2554220882,3999719339),x(2821834349,766784016),x(2952996808,2566594879),x(3210313671,3203337956),x(3336571891,1034457026),x(3584528711,2466948901),x(113926993,3758326383),x(338241895,168717936),x(666307205,1188179964),x(773529912,1546045734),x(1294757372,1522805485),x(1396182291,2643833823),x(1695183700,2343527390),x(1986661051,1014477480),x(2177026350,1206759142),x(2456956037,344077627),x(2730485921,1290863460),x(2820302411,3158454273),x(3259730800,3505952657),x(3345764771,106217008),x(3516065817,3606008344),x(3600352804,1432725776),x(4094571909,1467031594),x(275423344,851169720),x(430227734,3100823752),x(506948616,1363258195),x(659060556,3750685593),x(883997877,3785050280),x(958139571,3318307427),x(1322822218,3812723403),x(1537002063,2003034995),x(1747873779,3602036899),x(1955562222,1575990012),x(2024104815,1125592928),x(2227730452,2716904306),x(2361852424,442776044),x(2428436474,593698344),x(2756734187,3733110249),x(3204031479,2999351573),x(3329325298,3815920427),x(3391569614,3928383900),x(3515267271,566280711),x(3940187606,3454069534),x(4118630271,4000239992),x(116418474,1914138554),x(174292421,2731055270),x(289380356,3203993006),x(460393269,320620315),x(685471733,587496836),x(852142971,1086792851),x(1017036298,365543100),x(1126000580,2618297676),x(1288033470,3409855158),x(1501505948,4234509866),x(1607167915,987167468),x(1816402316,1246189591)],t=[];(function(){for(var l=0;l<80;l++)t[l]=x()})();var c=r.SHA512=F.extend({_doReset:function(){this._hash=new u.init([new p.init(1779033703,4089235720),new p.init(3144134277,2227873595),new p.init(1013904242,4271175723),new p.init(2773480762,1595750129),new p.init(1359893119,2917565137),new p.init(2600822924,725511199),new p.init(528734635,4215389547),new p.init(1541459225,327033209)])},_doProcessBlock:function(l,h){for(var d=this._hash.words,E=d[0],s=d[1],o=d[2],f=d[3],n=d[4],a=d[5],A=d[6],b=d[7],R=E.high,C=E.low,D=s.high,j=s.low,_=o.high,z=o.low,q=f.high,U=f.low,H=n.high,I=n.low,L=a.high,K=a.low,g=A.high,N=A.low,S=b.high,k=b.low,$=R,M=C,Q=D,W=j,A0=_,m0=z,W0=q,F0=U,s0=H,Z=I,k0=L,D0=K,N0=g,b0=N,L0=S,g0=k,n0=0;n0<80;n0++){var a0,c0,S0=t[n0];if(n0<16)c0=S0.high=l[h+n0*2]|0,a0=S0.low=l[h+n0*2+1]|0;else{var Oe=t[n0-15],C0=Oe.high,y0=Oe.low,rt=(C0>>>1|y0<<31)^(C0>>>8|y0<<24)^C0>>>7,Ke=(y0>>>1|C0<<31)^(y0>>>8|C0<<24)^(y0>>>7|C0<<25),$e=t[n0-2],B0=$e.high,j0=$e.low,tt=(B0>>>19|j0<<13)^(B0<<3|j0>>>29)^B0>>>6,Me=(j0>>>19|B0<<13)^(j0<<3|B0>>>29)^(j0>>>6|B0<<26),Xe=t[n0-7],at=Xe.high,xt=Xe.low,Ge=t[n0-16],st=Ge.high,Ye=Ge.low;a0=Ke+xt,c0=rt+at+(a0>>>0<Ke>>>0?1:0),a0=a0+Me,c0=c0+tt+(a0>>>0<Me>>>0?1:0),a0=a0+Ye,c0=c0+st+(a0>>>0<Ye>>>0?1:0),S0.high=c0,S0.low=a0}var nt=s0&k0^~s0&N0,Qe=Z&D0^~Z&b0,it=$&Q^$&A0^Q&A0,ot=M&W^M&m0^W&m0,ct=($>>>28|M<<4)^($<<30|M>>>2)^($<<25|M>>>7),Ze=(M>>>28|$<<4)^(M<<30|$>>>2)^(M<<25|$>>>7),lt=(s0>>>14|Z<<18)^(s0>>>18|Z<<14)^(s0<<23|Z>>>9),dt=(Z>>>14|s0<<18)^(Z>>>18|s0<<14)^(Z<<23|s0>>>9),Ve=m[n0],ft=Ve.high,Je=Ve.low,V=g0+dt,l0=L0+lt+(V>>>0<g0>>>0?1:0),V=V+Qe,l0=l0+nt+(V>>>0<Qe>>>0?1:0),V=V+Je,l0=l0+ft+(V>>>0<Je>>>0?1:0),V=V+a0,l0=l0+c0+(V>>>0<a0>>>0?1:0),er=Ze+ot,ht=ct+it+(er>>>0<Ze>>>0?1:0);L0=N0,g0=b0,N0=k0,b0=D0,k0=s0,D0=Z,Z=F0+V|0,s0=W0+l0+(Z>>>0<F0>>>0?1:0)|0,W0=A0,F0=m0,A0=Q,m0=W,Q=$,W=M,M=V+er|0,$=l0+ht+(M>>>0<V>>>0?1:0)|0}C=E.low=C+M,E.high=R+$+(C>>>0<M>>>0?1:0),j=s.low=j+W,s.high=D+Q+(j>>>0<W>>>0?1:0),z=o.low=z+m0,o.high=_+A0+(z>>>0<m0>>>0?1:0),U=f.low=U+F0,f.high=q+W0+(U>>>0<F0>>>0?1:0),I=n.low=I+Z,n.high=H+s0+(I>>>0<Z>>>0?1:0),K=a.low=K+D0,a.high=L+k0+(K>>>0<D0>>>0?1:0),N=A.low=N+b0,A.high=g+N0+(N>>>0<b0>>>0?1:0),k=b.low=k+g0,b.high=S+L0+(k>>>0<g0>>>0?1:0)},_doFinalize:function(){var l=this._data,h=l.words,d=this._nDataBytes*8,E=l.sigBytes*8;h[E>>>5]|=128<<24-E%32,h[(E+128>>>10<<5)+30]=Math.floor(d/4294967296),h[(E+128>>>10<<5)+31]=d,l.sigBytes=h.length*4,this._process();var s=this._hash.toX32();return s},clone:function(){var l=F.clone.call(this);return l._hash=this._hash.clone(),l},blockSize:1024/32});i.SHA512=F._createHelper(c),i.HmacSHA512=F._createHmacHelper(c)}(),v.SHA512})}(J0)),J0.exports}var ee={exports:{}},Dr;function Jt(){return Dr||(Dr=1,function(w,P){(function(v,i,B){w.exports=i(O(),T0(),et())})(T,function(v){return function(){var i=v,B=i.x64,F=B.Word,y=B.WordArray,p=i.algo,u=p.SHA512,r=p.SHA384=u.extend({_doReset:function(){this._hash=new y.init([new F.init(3418070365,3238371032),new F.init(1654270250,914150663),new F.init(2438529370,812702999),new F.init(355462360,4144912697),new F.init(1731405415,4290775857),new F.init(2394180231,1750603025),new F.init(3675008525,1694076839),new F.init(1203062813,3204075428)])},_doFinalize:function(){var x=u._doFinalize.call(this);return x.sigBytes-=16,x}});i.SHA384=u._createHelper(r),i.HmacSHA384=u._createHmacHelper(r)}(),v.SHA384})}(ee)),ee.exports}var re={exports:{}},br;function ea(){return br||(br=1,function(w,P){(function(v,i,B){w.exports=i(O(),T0())})(T,function(v){return function(i){var B=v,F=B.lib,y=F.WordArray,p=F.Hasher,u=B.x64,r=u.Word,x=B.algo,m=[],t=[],c=[];(function(){for(var d=1,E=0,s=0;s<24;s++){m[d+5*E]=(s+1)*(s+2)/2%64;var o=E%5,f=(2*d+3*E)%5;d=o,E=f}for(var d=0;d<5;d++)for(var E=0;E<5;E++)t[d+5*E]=E+(2*d+3*E)%5*5;for(var n=1,a=0;a<24;a++){for(var A=0,b=0,R=0;R<7;R++){if(n&1){var C=(1<<R)-1;C<32?b^=1<<C:A^=1<<C-32}n&128?n=n<<1^113:n<<=1}c[a]=r.create(A,b)}})();var l=[];(function(){for(var d=0;d<25;d++)l[d]=r.create()})();var h=x.SHA3=p.extend({cfg:p.cfg.extend({outputLength:512}),_doReset:function(){for(var d=this._state=[],E=0;E<25;E++)d[E]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(d,E){for(var s=this._state,o=this.blockSize/2,f=0;f<o;f++){var n=d[E+2*f],a=d[E+2*f+1];n=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,a=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;var A=s[f];A.high^=a,A.low^=n}for(var b=0;b<24;b++){for(var R=0;R<5;R++){for(var C=0,D=0,j=0;j<5;j++){var A=s[R+5*j];C^=A.high,D^=A.low}var _=l[R];_.high=C,_.low=D}for(var R=0;R<5;R++)for(var z=l[(R+4)%5],q=l[(R+1)%5],U=q.high,H=q.low,C=z.high^(U<<1|H>>>31),D=z.low^(H<<1|U>>>31),j=0;j<5;j++){var A=s[R+5*j];A.high^=C,A.low^=D}for(var I=1;I<25;I++){var C,D,A=s[I],L=A.high,K=A.low,g=m[I];g<32?(C=L<<g|K>>>32-g,D=K<<g|L>>>32-g):(C=K<<g-32|L>>>64-g,D=L<<g-32|K>>>64-g);var N=l[t[I]];N.high=C,N.low=D}var S=l[0],k=s[0];S.high=k.high,S.low=k.low;for(var R=0;R<5;R++)for(var j=0;j<5;j++){var I=R+5*j,A=s[I],$=l[I],M=l[(R+1)%5+5*j],Q=l[(R+2)%5+5*j];A.high=$.high^~M.high&Q.high,A.low=$.low^~M.low&Q.low}var A=s[0],W=c[b];A.high^=W.high,A.low^=W.low}},_doFinalize:function(){var d=this._data,E=d.words;this._nDataBytes*8;var s=d.sigBytes*8,o=this.blockSize*32;E[s>>>5]|=1<<24-s%32,E[(i.ceil((s+1)/o)*o>>>5)-1]|=128,d.sigBytes=E.length*4,this._process();for(var f=this._state,n=this.cfg.outputLength/8,a=n/8,A=[],b=0;b<a;b++){var R=f[b],C=R.high,D=R.low;C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,A.push(D),A.push(C)}return new y.init(A,n)},clone:function(){for(var d=p.clone.call(this),E=d._state=this._state.slice(0),s=0;s<25;s++)E[s]=E[s].clone();return d}});B.SHA3=p._createHelper(h),B.HmacSHA3=p._createHmacHelper(h)}(Math),v.SHA3})}(re)),re.exports}var te={exports:{}},gr;function ra(){return gr||(gr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(i){var B=v,F=B.lib,y=F.WordArray,p=F.Hasher,u=B.algo,r=y.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),x=y.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=y.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),t=y.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=y.create([0,1518500249,1859775393,2400959708,2840853838]),l=y.create([1352829926,1548603684,1836072691,2053994217,0]),h=u.RIPEMD160=p.extend({_doReset:function(){this._hash=y.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,A){for(var b=0;b<16;b++){var R=A+b,C=a[R];a[R]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}var D=this._hash.words,j=c.words,_=l.words,z=r.words,q=x.words,U=m.words,H=t.words,I,L,K,g,N,S,k,$,M,Q;S=I=D[0],k=L=D[1],$=K=D[2],M=g=D[3],Q=N=D[4];for(var W,b=0;b<80;b+=1)W=I+a[A+z[b]]|0,b<16?W+=d(L,K,g)+j[0]:b<32?W+=E(L,K,g)+j[1]:b<48?W+=s(L,K,g)+j[2]:b<64?W+=o(L,K,g)+j[3]:W+=f(L,K,g)+j[4],W=W|0,W=n(W,U[b]),W=W+N|0,I=N,N=g,g=n(K,10),K=L,L=W,W=S+a[A+q[b]]|0,b<16?W+=f(k,$,M)+_[0]:b<32?W+=o(k,$,M)+_[1]:b<48?W+=s(k,$,M)+_[2]:b<64?W+=E(k,$,M)+_[3]:W+=d(k,$,M)+_[4],W=W|0,W=n(W,H[b]),W=W+Q|0,S=Q,Q=M,M=n($,10),$=k,k=W;W=D[1]+K+M|0,D[1]=D[2]+g+Q|0,D[2]=D[3]+N+S|0,D[3]=D[4]+I+k|0,D[4]=D[0]+L+$|0,D[0]=W},_doFinalize:function(){var a=this._data,A=a.words,b=this._nDataBytes*8,R=a.sigBytes*8;A[R>>>5]|=128<<24-R%32,A[(R+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,a.sigBytes=(A.length+1)*4,this._process();for(var C=this._hash,D=C.words,j=0;j<5;j++){var _=D[j];D[j]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return C},clone:function(){var a=p.clone.call(this);return a._hash=this._hash.clone(),a}});function d(a,A,b){return a^A^b}function E(a,A,b){return a&A|~a&b}function s(a,A,b){return(a|~A)^b}function o(a,A,b){return a&b|A&~b}function f(a,A,b){return a^(A|~b)}function n(a,A){return a<<A|a>>>32-A}B.RIPEMD160=p._createHelper(h),B.HmacRIPEMD160=p._createHmacHelper(h)}(),v.RIPEMD160})}(te)),te.exports}var ae={exports:{}},yr;function We(){return yr||(yr=1,function(w,P){(function(v,i){w.exports=i(O())})(T,function(v){(function(){var i=v,B=i.lib,F=B.Base,y=i.enc,p=y.Utf8,u=i.algo;u.HMAC=F.extend({init:function(r,x){r=this._hasher=new r.init,typeof x=="string"&&(x=p.parse(x));var m=r.blockSize,t=m*4;x.sigBytes>t&&(x=r.finalize(x)),x.clamp();for(var c=this._oKey=x.clone(),l=this._iKey=x.clone(),h=c.words,d=l.words,E=0;E<m;E++)h[E]^=1549556828,d[E]^=909522486;c.sigBytes=l.sigBytes=t,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var x=this._hasher,m=x.finalize(r);x.reset();var t=x.finalize(this._oKey.clone().concat(m));return t}})})()})}(ae)),ae.exports}var xe={exports:{}},jr;function ta(){return jr||(jr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Te(),We())})(T,function(v){return function(){var i=v,B=i.lib,F=B.Base,y=B.WordArray,p=i.algo,u=p.SHA256,r=p.HMAC,x=p.PBKDF2=F.extend({cfg:F.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,t){for(var c=this.cfg,l=r.create(c.hasher,m),h=y.create(),d=y.create([1]),E=h.words,s=d.words,o=c.keySize,f=c.iterations;E.length<o;){var n=l.update(t).finalize(d);l.reset();for(var a=n.words,A=a.length,b=n,R=1;R<f;R++){b=l.finalize(b),l.reset();for(var C=b.words,D=0;D<A;D++)a[D]^=C[D]}h.concat(n),s[0]++}return h.sigBytes=o*4,h}});i.PBKDF2=function(m,t,c){return x.create(c).compute(m,t)}}(),v.PBKDF2})}(xe)),xe.exports}var se={exports:{}},_r;function d0(){return _r||(_r=1,function(w,P){(function(v,i,B){w.exports=i(O(),Jr(),We())})(T,function(v){return function(){var i=v,B=i.lib,F=B.Base,y=B.WordArray,p=i.algo,u=p.MD5,r=p.EvpKDF=F.extend({cfg:F.extend({keySize:128/32,hasher:u,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,m){for(var t,c=this.cfg,l=c.hasher.create(),h=y.create(),d=h.words,E=c.keySize,s=c.iterations;d.length<E;){t&&l.update(t),t=l.update(x).finalize(m),l.reset();for(var o=1;o<s;o++)t=l.finalize(t),l.reset();h.concat(t)}return h.sigBytes=E*4,h}});i.EvpKDF=function(x,m,t){return r.create(t).compute(x,m)}}(),v.EvpKDF})}(se)),se.exports}var ne={exports:{}},wr;function Y(){return wr||(wr=1,function(w,P){(function(v,i,B){w.exports=i(O(),d0())})(T,function(v){v.lib.Cipher||function(i){var B=v,F=B.lib,y=F.Base,p=F.WordArray,u=F.BufferedBlockAlgorithm,r=B.enc;r.Utf8;var x=r.Base64,m=B.algo,t=m.EvpKDF,c=F.Cipher=u.extend({cfg:y.extend(),createEncryptor:function(C,D){return this.create(this._ENC_XFORM_MODE,C,D)},createDecryptor:function(C,D){return this.create(this._DEC_XFORM_MODE,C,D)},init:function(C,D,j){this.cfg=this.cfg.extend(j),this._xformMode=C,this._key=D,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(C){return this._append(C),this._process()},finalize:function(C){C&&this._append(C);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function C(D){return typeof D=="string"?R:a}return function(D){return{encrypt:function(j,_,z){return C(_).encrypt(D,j,_,z)},decrypt:function(j,_,z){return C(_).decrypt(D,j,_,z)}}}}()});F.StreamCipher=c.extend({_doFinalize:function(){var C=this._process(!0);return C},blockSize:1});var l=B.mode={},h=F.BlockCipherMode=y.extend({createEncryptor:function(C,D){return this.Encryptor.create(C,D)},createDecryptor:function(C,D){return this.Decryptor.create(C,D)},init:function(C,D){this._cipher=C,this._iv=D}}),d=l.CBC=function(){var C=h.extend();C.Encryptor=C.extend({processBlock:function(j,_){var z=this._cipher,q=z.blockSize;D.call(this,j,_,q),z.encryptBlock(j,_),this._prevBlock=j.slice(_,_+q)}}),C.Decryptor=C.extend({processBlock:function(j,_){var z=this._cipher,q=z.blockSize,U=j.slice(_,_+q);z.decryptBlock(j,_),D.call(this,j,_,q),this._prevBlock=U}});function D(j,_,z){var q,U=this._iv;U?(q=U,this._iv=i):q=this._prevBlock;for(var H=0;H<z;H++)j[_+H]^=q[H]}return C}(),E=B.pad={},s=E.Pkcs7={pad:function(C,D){for(var j=D*4,_=j-C.sigBytes%j,z=_<<24|_<<16|_<<8|_,q=[],U=0;U<_;U+=4)q.push(z);var H=p.create(q,_);C.concat(H)},unpad:function(C){var D=C.words[C.sigBytes-1>>>2]&255;C.sigBytes-=D}};F.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:s}),reset:function(){var C;c.reset.call(this);var D=this.cfg,j=D.iv,_=D.mode;this._xformMode==this._ENC_XFORM_MODE?C=_.createEncryptor:(C=_.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==C?this._mode.init(this,j&&j.words):(this._mode=C.call(_,this,j&&j.words),this._mode.__creator=C)},_doProcessBlock:function(C,D){this._mode.processBlock(C,D)},_doFinalize:function(){var C,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),C=this._process(!0)):(C=this._process(!0),D.unpad(C)),C},blockSize:128/32});var o=F.CipherParams=y.extend({init:function(C){this.mixIn(C)},toString:function(C){return(C||this.formatter).stringify(this)}}),f=B.format={},n=f.OpenSSL={stringify:function(C){var D,j=C.ciphertext,_=C.salt;return _?D=p.create([1398893684,1701076831]).concat(_).concat(j):D=j,D.toString(x)},parse:function(C){var D,j=x.parse(C),_=j.words;return _[0]==1398893684&&_[1]==1701076831&&(D=p.create(_.slice(2,4)),_.splice(0,4),j.sigBytes-=16),o.create({ciphertext:j,salt:D})}},a=F.SerializableCipher=y.extend({cfg:y.extend({format:n}),encrypt:function(C,D,j,_){_=this.cfg.extend(_);var z=C.createEncryptor(j,_),q=z.finalize(D),U=z.cfg;return o.create({ciphertext:q,key:j,iv:U.iv,algorithm:C,mode:U.mode,padding:U.padding,blockSize:C.blockSize,formatter:_.format})},decrypt:function(C,D,j,_){_=this.cfg.extend(_),D=this._parse(D,_.format);var z=C.createDecryptor(j,_).finalize(D.ciphertext);return z},_parse:function(C,D){return typeof C=="string"?D.parse(C,this):C}}),A=B.kdf={},b=A.OpenSSL={execute:function(C,D,j,_,z){if(_||(_=p.random(64/8)),z)var q=t.create({keySize:D+j,hasher:z}).compute(C,_);else var q=t.create({keySize:D+j}).compute(C,_);var U=p.create(q.words.slice(D),j*4);return q.sigBytes=D*4,o.create({key:q,iv:U,salt:_})}},R=F.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:b}),encrypt:function(C,D,j,_){_=this.cfg.extend(_);var z=_.kdf.execute(j,C.keySize,C.ivSize,_.salt,_.hasher);_.iv=z.iv;var q=a.encrypt.call(this,C,D,z.key,_);return q.mixIn(z),q},decrypt:function(C,D,j,_){_=this.cfg.extend(_),D=this._parse(D,_.format);var z=_.kdf.execute(j,C.keySize,C.ivSize,D.salt,_.hasher);_.iv=z.iv;var q=a.decrypt.call(this,C,D,z.key,_);return q}})}()})}(ne)),ne.exports}var ie={exports:{}},kr;function aa(){return kr||(kr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.mode.CFB=function(){var i=v.lib.BlockCipherMode.extend();i.Encryptor=i.extend({processBlock:function(F,y){var p=this._cipher,u=p.blockSize;B.call(this,F,y,u,p),this._prevBlock=F.slice(y,y+u)}}),i.Decryptor=i.extend({processBlock:function(F,y){var p=this._cipher,u=p.blockSize,r=F.slice(y,y+u);B.call(this,F,y,u,p),this._prevBlock=r}});function B(F,y,p,u){var r,x=this._iv;x?(r=x.slice(0),this._iv=void 0):r=this._prevBlock,u.encryptBlock(r,0);for(var m=0;m<p;m++)F[y+m]^=r[m]}return i}(),v.mode.CFB})}(ie)),ie.exports}var oe={exports:{}},Nr;function xa(){return Nr||(Nr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.mode.CTR=function(){var i=v.lib.BlockCipherMode.extend(),B=i.Encryptor=i.extend({processBlock:function(F,y){var p=this._cipher,u=p.blockSize,r=this._iv,x=this._counter;r&&(x=this._counter=r.slice(0),this._iv=void 0);var m=x.slice(0);p.encryptBlock(m,0),x[u-1]=x[u-1]+1|0;for(var t=0;t<u;t++)F[y+t]^=m[t]}});return i.Decryptor=B,i}(),v.mode.CTR})}(oe)),oe.exports}var ce={exports:{}},Sr;function sa(){return Sr||(Sr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return v.mode.CTRGladman=function(){var i=v.lib.BlockCipherMode.extend();function B(p){if((p>>24&255)===255){var u=p>>16&255,r=p>>8&255,x=p&255;u===255?(u=0,r===255?(r=0,x===255?x=0:++x):++r):++u,p=0,p+=u<<16,p+=r<<8,p+=x}else p+=1<<24;return p}function F(p){return(p[0]=B(p[0]))===0&&(p[1]=B(p[1])),p}var y=i.Encryptor=i.extend({processBlock:function(p,u){var r=this._cipher,x=r.blockSize,m=this._iv,t=this._counter;m&&(t=this._counter=m.slice(0),this._iv=void 0),F(t);var c=t.slice(0);r.encryptBlock(c,0);for(var l=0;l<x;l++)p[u+l]^=c[l]}});return i.Decryptor=y,i}(),v.mode.CTRGladman})}(ce)),ce.exports}var le={exports:{}},Rr;function na(){return Rr||(Rr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.mode.OFB=function(){var i=v.lib.BlockCipherMode.extend(),B=i.Encryptor=i.extend({processBlock:function(F,y){var p=this._cipher,u=p.blockSize,r=this._iv,x=this._keystream;r&&(x=this._keystream=r.slice(0),this._iv=void 0),p.encryptBlock(x,0);for(var m=0;m<u;m++)F[y+m]^=x[m]}});return i.Decryptor=B,i}(),v.mode.OFB})}(le)),le.exports}var de={exports:{}},Hr;function ia(){return Hr||(Hr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.mode.ECB=function(){var i=v.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(B,F){this._cipher.encryptBlock(B,F)}}),i.Decryptor=i.extend({processBlock:function(B,F){this._cipher.decryptBlock(B,F)}}),i}(),v.mode.ECB})}(de)),de.exports}var fe={exports:{}},Pr;function oa(){return Pr||(Pr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.pad.AnsiX923={pad:function(i,B){var F=i.sigBytes,y=B*4,p=y-F%y,u=F+p-1;i.clamp(),i.words[u>>>2]|=p<<24-u%4*8,i.sigBytes+=p},unpad:function(i){var B=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=B}},v.pad.Ansix923})}(fe)),fe.exports}var he={exports:{}},zr;function ca(){return zr||(zr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.pad.Iso10126={pad:function(i,B){var F=B*4,y=F-i.sigBytes%F;i.concat(v.lib.WordArray.random(y-1)).concat(v.lib.WordArray.create([y<<24],1))},unpad:function(i){var B=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=B}},v.pad.Iso10126})}(he)),he.exports}var ue={exports:{}},qr;function la(){return qr||(qr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.pad.Iso97971={pad:function(i,B){i.concat(v.lib.WordArray.create([2147483648],1)),v.pad.ZeroPadding.pad(i,B)},unpad:function(i){v.pad.ZeroPadding.unpad(i),i.sigBytes--}},v.pad.Iso97971})}(ue)),ue.exports}var ve={exports:{}},Ur;function da(){return Ur||(Ur=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.pad.ZeroPadding={pad:function(i,B){var F=B*4;i.clamp(),i.sigBytes+=F-(i.sigBytes%F||F)},unpad:function(i){for(var B=i.words,F=i.sigBytes-1,F=i.sigBytes-1;F>=0;F--)if(B[F>>>2]>>>24-F%4*8&255){i.sigBytes=F+1;break}}},v.pad.ZeroPadding})}(ve)),ve.exports}var pe={exports:{}},Ir;function fa(){return Ir||(Ir=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return v.pad.NoPadding={pad:function(){},unpad:function(){}},v.pad.NoPadding})}(pe)),pe.exports}var me={exports:{}},Tr;function ha(){return Tr||(Tr=1,function(w,P){(function(v,i,B){w.exports=i(O(),Y())})(T,function(v){return function(i){var B=v,F=B.lib,y=F.CipherParams,p=B.enc,u=p.Hex,r=B.format;r.Hex={stringify:function(x){return x.ciphertext.toString(u)},parse:function(x){var m=u.parse(x);return y.create({ciphertext:m})}}}(),v.format.Hex})}(me)),me.exports}var Ce={exports:{}},Wr;function ua(){return Wr||(Wr=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.BlockCipher,y=i.algo,p=[],u=[],r=[],x=[],m=[],t=[],c=[],l=[],h=[],d=[];(function(){for(var o=[],f=0;f<256;f++)f<128?o[f]=f<<1:o[f]=f<<1^283;for(var n=0,a=0,f=0;f<256;f++){var A=a^a<<1^a<<2^a<<3^a<<4;A=A>>>8^A&255^99,p[n]=A,u[A]=n;var b=o[n],R=o[b],C=o[R],D=o[A]*257^A*16843008;r[n]=D<<24|D>>>8,x[n]=D<<16|D>>>16,m[n]=D<<8|D>>>24,t[n]=D;var D=C*16843009^R*65537^b*257^n*16843008;c[A]=D<<24|D>>>8,l[A]=D<<16|D>>>16,h[A]=D<<8|D>>>24,d[A]=D,n?(n=b^o[o[o[C^b]]],a^=o[o[a]]):n=a=1}})();var E=[0,1,2,4,8,16,32,64,128,27,54],s=y.AES=F.extend({_doReset:function(){var o;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var f=this._keyPriorReset=this._key,n=f.words,a=f.sigBytes/4,A=this._nRounds=a+6,b=(A+1)*4,R=this._keySchedule=[],C=0;C<b;C++)C<a?R[C]=n[C]:(o=R[C-1],C%a?a>6&&C%a==4&&(o=p[o>>>24]<<24|p[o>>>16&255]<<16|p[o>>>8&255]<<8|p[o&255]):(o=o<<8|o>>>24,o=p[o>>>24]<<24|p[o>>>16&255]<<16|p[o>>>8&255]<<8|p[o&255],o^=E[C/a|0]<<24),R[C]=R[C-a]^o);for(var D=this._invKeySchedule=[],j=0;j<b;j++){var C=b-j;if(j%4)var o=R[C];else var o=R[C-4];j<4||C<=4?D[j]=o:D[j]=c[p[o>>>24]]^l[p[o>>>16&255]]^h[p[o>>>8&255]]^d[p[o&255]]}}},encryptBlock:function(o,f){this._doCryptBlock(o,f,this._keySchedule,r,x,m,t,p)},decryptBlock:function(o,f){var n=o[f+1];o[f+1]=o[f+3],o[f+3]=n,this._doCryptBlock(o,f,this._invKeySchedule,c,l,h,d,u);var n=o[f+1];o[f+1]=o[f+3],o[f+3]=n},_doCryptBlock:function(o,f,n,a,A,b,R,C){for(var D=this._nRounds,j=o[f]^n[0],_=o[f+1]^n[1],z=o[f+2]^n[2],q=o[f+3]^n[3],U=4,H=1;H<D;H++){var I=a[j>>>24]^A[_>>>16&255]^b[z>>>8&255]^R[q&255]^n[U++],L=a[_>>>24]^A[z>>>16&255]^b[q>>>8&255]^R[j&255]^n[U++],K=a[z>>>24]^A[q>>>16&255]^b[j>>>8&255]^R[_&255]^n[U++],g=a[q>>>24]^A[j>>>16&255]^b[_>>>8&255]^R[z&255]^n[U++];j=I,_=L,z=K,q=g}var I=(C[j>>>24]<<24|C[_>>>16&255]<<16|C[z>>>8&255]<<8|C[q&255])^n[U++],L=(C[_>>>24]<<24|C[z>>>16&255]<<16|C[q>>>8&255]<<8|C[j&255])^n[U++],K=(C[z>>>24]<<24|C[q>>>16&255]<<16|C[j>>>8&255]<<8|C[_&255])^n[U++],g=(C[q>>>24]<<24|C[j>>>16&255]<<16|C[_>>>8&255]<<8|C[z&255])^n[U++];o[f]=I,o[f+1]=L,o[f+2]=K,o[f+3]=g},keySize:256/32});i.AES=F._createHelper(s)}(),v.AES})}(Ce)),Ce.exports}var Be={exports:{}},Lr;function va(){return Lr||(Lr=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.WordArray,y=B.BlockCipher,p=i.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],r=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],x=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],t=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],c=p.DES=y.extend({_doReset:function(){for(var E=this._key,s=E.words,o=[],f=0;f<56;f++){var n=u[f]-1;o[f]=s[n>>>5]>>>31-n%32&1}for(var a=this._subKeys=[],A=0;A<16;A++){for(var b=a[A]=[],R=x[A],f=0;f<24;f++)b[f/6|0]|=o[(r[f]-1+R)%28]<<31-f%6,b[4+(f/6|0)]|=o[28+(r[f+24]-1+R)%28]<<31-f%6;b[0]=b[0]<<1|b[0]>>>31;for(var f=1;f<7;f++)b[f]=b[f]>>>(f-1)*4+3;b[7]=b[7]<<5|b[7]>>>27}for(var C=this._invSubKeys=[],f=0;f<16;f++)C[f]=a[15-f]},encryptBlock:function(E,s){this._doCryptBlock(E,s,this._subKeys)},decryptBlock:function(E,s){this._doCryptBlock(E,s,this._invSubKeys)},_doCryptBlock:function(E,s,o){this._lBlock=E[s],this._rBlock=E[s+1],l.call(this,4,252645135),l.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),l.call(this,1,1431655765);for(var f=0;f<16;f++){for(var n=o[f],a=this._lBlock,A=this._rBlock,b=0,R=0;R<8;R++)b|=m[R][((A^n[R])&t[R])>>>0];this._lBlock=A,this._rBlock=a^b}var C=this._lBlock;this._lBlock=this._rBlock,this._rBlock=C,l.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),E[s]=this._lBlock,E[s+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function l(E,s){var o=(this._lBlock>>>E^this._rBlock)&s;this._rBlock^=o,this._lBlock^=o<<E}function h(E,s){var o=(this._rBlock>>>E^this._lBlock)&s;this._lBlock^=o,this._rBlock^=o<<E}i.DES=y._createHelper(c);var d=p.TripleDES=y.extend({_doReset:function(){var E=this._key,s=E.words;if(s.length!==2&&s.length!==4&&s.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var o=s.slice(0,2),f=s.length<4?s.slice(0,2):s.slice(2,4),n=s.length<6?s.slice(0,2):s.slice(4,6);this._des1=c.createEncryptor(F.create(o)),this._des2=c.createEncryptor(F.create(f)),this._des3=c.createEncryptor(F.create(n))},encryptBlock:function(E,s){this._des1.encryptBlock(E,s),this._des2.decryptBlock(E,s),this._des3.encryptBlock(E,s)},decryptBlock:function(E,s){this._des3.decryptBlock(E,s),this._des2.encryptBlock(E,s),this._des1.decryptBlock(E,s)},keySize:192/32,ivSize:64/32,blockSize:64/32});i.TripleDES=y._createHelper(d)}(),v.TripleDES})}(Be)),Be.exports}var Ee={exports:{}},Or;function pa(){return Or||(Or=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.StreamCipher,y=i.algo,p=y.RC4=F.extend({_doReset:function(){for(var x=this._key,m=x.words,t=x.sigBytes,c=this._S=[],l=0;l<256;l++)c[l]=l;for(var l=0,h=0;l<256;l++){var d=l%t,E=m[d>>>2]>>>24-d%4*8&255;h=(h+c[l]+E)%256;var s=c[l];c[l]=c[h],c[h]=s}this._i=this._j=0},_doProcessBlock:function(x,m){x[m]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var x=this._S,m=this._i,t=this._j,c=0,l=0;l<4;l++){m=(m+1)%256,t=(t+x[m])%256;var h=x[m];x[m]=x[t],x[t]=h,c|=x[(x[m]+x[t])%256]<<24-l*8}return this._i=m,this._j=t,c}i.RC4=F._createHelper(p);var r=y.RC4Drop=p.extend({cfg:p.cfg.extend({drop:192}),_doReset:function(){p._doReset.call(this);for(var x=this.cfg.drop;x>0;x--)u.call(this)}});i.RC4Drop=F._createHelper(r)}(),v.RC4})}(Ee)),Ee.exports}var Ae={exports:{}},Kr;function ma(){return Kr||(Kr=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.StreamCipher,y=i.algo,p=[],u=[],r=[],x=y.Rabbit=F.extend({_doReset:function(){for(var t=this._key.words,c=this.cfg.iv,l=0;l<4;l++)t[l]=(t[l]<<8|t[l]>>>24)&16711935|(t[l]<<24|t[l]>>>8)&4278255360;var h=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],d=this._C=[t[2]<<16|t[2]>>>16,t[0]&4294901760|t[1]&65535,t[3]<<16|t[3]>>>16,t[1]&4294901760|t[2]&65535,t[0]<<16|t[0]>>>16,t[2]&4294901760|t[3]&65535,t[1]<<16|t[1]>>>16,t[3]&4294901760|t[0]&65535];this._b=0;for(var l=0;l<4;l++)m.call(this);for(var l=0;l<8;l++)d[l]^=h[l+4&7];if(c){var E=c.words,s=E[0],o=E[1],f=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,n=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,a=f>>>16|n&4294901760,A=n<<16|f&65535;d[0]^=f,d[1]^=a,d[2]^=n,d[3]^=A,d[4]^=f,d[5]^=a,d[6]^=n,d[7]^=A;for(var l=0;l<4;l++)m.call(this)}},_doProcessBlock:function(t,c){var l=this._X;m.call(this),p[0]=l[0]^l[5]>>>16^l[3]<<16,p[1]=l[2]^l[7]>>>16^l[5]<<16,p[2]=l[4]^l[1]>>>16^l[7]<<16,p[3]=l[6]^l[3]>>>16^l[1]<<16;for(var h=0;h<4;h++)p[h]=(p[h]<<8|p[h]>>>24)&16711935|(p[h]<<24|p[h]>>>8)&4278255360,t[c+h]^=p[h]},blockSize:128/32,ivSize:64/32});function m(){for(var t=this._X,c=this._C,l=0;l<8;l++)u[l]=c[l];c[0]=c[0]+1295307597+this._b|0,c[1]=c[1]+3545052371+(c[0]>>>0<u[0]>>>0?1:0)|0,c[2]=c[2]+886263092+(c[1]>>>0<u[1]>>>0?1:0)|0,c[3]=c[3]+1295307597+(c[2]>>>0<u[2]>>>0?1:0)|0,c[4]=c[4]+3545052371+(c[3]>>>0<u[3]>>>0?1:0)|0,c[5]=c[5]+886263092+(c[4]>>>0<u[4]>>>0?1:0)|0,c[6]=c[6]+1295307597+(c[5]>>>0<u[5]>>>0?1:0)|0,c[7]=c[7]+3545052371+(c[6]>>>0<u[6]>>>0?1:0)|0,this._b=c[7]>>>0<u[7]>>>0?1:0;for(var l=0;l<8;l++){var h=t[l]+c[l],d=h&65535,E=h>>>16,s=((d*d>>>17)+d*E>>>15)+E*E,o=((h&4294901760)*h|0)+((h&65535)*h|0);r[l]=s^o}t[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,t[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,t[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,t[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,t[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,t[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,t[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,t[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}i.Rabbit=F._createHelper(x)}(),v.Rabbit})}(Ae)),Ae.exports}var Fe={exports:{}},$r;function Ca(){return $r||($r=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.StreamCipher,y=i.algo,p=[],u=[],r=[],x=y.RabbitLegacy=F.extend({_doReset:function(){var t=this._key.words,c=this.cfg.iv,l=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],h=this._C=[t[2]<<16|t[2]>>>16,t[0]&4294901760|t[1]&65535,t[3]<<16|t[3]>>>16,t[1]&4294901760|t[2]&65535,t[0]<<16|t[0]>>>16,t[2]&4294901760|t[3]&65535,t[1]<<16|t[1]>>>16,t[3]&4294901760|t[0]&65535];this._b=0;for(var d=0;d<4;d++)m.call(this);for(var d=0;d<8;d++)h[d]^=l[d+4&7];if(c){var E=c.words,s=E[0],o=E[1],f=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,n=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,a=f>>>16|n&4294901760,A=n<<16|f&65535;h[0]^=f,h[1]^=a,h[2]^=n,h[3]^=A,h[4]^=f,h[5]^=a,h[6]^=n,h[7]^=A;for(var d=0;d<4;d++)m.call(this)}},_doProcessBlock:function(t,c){var l=this._X;m.call(this),p[0]=l[0]^l[5]>>>16^l[3]<<16,p[1]=l[2]^l[7]>>>16^l[5]<<16,p[2]=l[4]^l[1]>>>16^l[7]<<16,p[3]=l[6]^l[3]>>>16^l[1]<<16;for(var h=0;h<4;h++)p[h]=(p[h]<<8|p[h]>>>24)&16711935|(p[h]<<24|p[h]>>>8)&4278255360,t[c+h]^=p[h]},blockSize:128/32,ivSize:64/32});function m(){for(var t=this._X,c=this._C,l=0;l<8;l++)u[l]=c[l];c[0]=c[0]+1295307597+this._b|0,c[1]=c[1]+3545052371+(c[0]>>>0<u[0]>>>0?1:0)|0,c[2]=c[2]+886263092+(c[1]>>>0<u[1]>>>0?1:0)|0,c[3]=c[3]+1295307597+(c[2]>>>0<u[2]>>>0?1:0)|0,c[4]=c[4]+3545052371+(c[3]>>>0<u[3]>>>0?1:0)|0,c[5]=c[5]+886263092+(c[4]>>>0<u[4]>>>0?1:0)|0,c[6]=c[6]+1295307597+(c[5]>>>0<u[5]>>>0?1:0)|0,c[7]=c[7]+3545052371+(c[6]>>>0<u[6]>>>0?1:0)|0,this._b=c[7]>>>0<u[7]>>>0?1:0;for(var l=0;l<8;l++){var h=t[l]+c[l],d=h&65535,E=h>>>16,s=((d*d>>>17)+d*E>>>15)+E*E,o=((h&4294901760)*h|0)+((h&65535)*h|0);r[l]=s^o}t[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,t[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,t[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,t[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,t[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,t[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,t[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,t[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}i.RabbitLegacy=F._createHelper(x)}(),v.RabbitLegacy})}(Fe)),Fe.exports}var De={exports:{}},Mr;function Ba(){return Mr||(Mr=1,function(w,P){(function(v,i,B){w.exports=i(O(),v0(),p0(),d0(),Y())})(T,function(v){return function(){var i=v,B=i.lib,F=B.BlockCipher,y=i.algo;const p=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],r=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var x={pbox:[],sbox:[]};function m(d,E){let s=E>>24&255,o=E>>16&255,f=E>>8&255,n=E&255,a=d.sbox[0][s]+d.sbox[1][o];return a=a^d.sbox[2][f],a=a+d.sbox[3][n],a}function t(d,E,s){let o=E,f=s,n;for(let a=0;a<p;++a)o=o^d.pbox[a],f=m(d,o)^f,n=o,o=f,f=n;return n=o,o=f,f=n,f=f^d.pbox[p],o=o^d.pbox[p+1],{left:o,right:f}}function c(d,E,s){let o=E,f=s,n;for(let a=p+1;a>1;--a)o=o^d.pbox[a],f=m(d,o)^f,n=o,o=f,f=n;return n=o,o=f,f=n,f=f^d.pbox[1],o=o^d.pbox[0],{left:o,right:f}}function l(d,E,s){for(let A=0;A<4;A++){d.sbox[A]=[];for(let b=0;b<256;b++)d.sbox[A][b]=r[A][b]}let o=0;for(let A=0;A<p+2;A++)d.pbox[A]=u[A]^E[o],o++,o>=s&&(o=0);let f=0,n=0,a=0;for(let A=0;A<p+2;A+=2)a=t(d,f,n),f=a.left,n=a.right,d.pbox[A]=f,d.pbox[A+1]=n;for(let A=0;A<4;A++)for(let b=0;b<256;b+=2)a=t(d,f,n),f=a.left,n=a.right,d.sbox[A][b]=f,d.sbox[A][b+1]=n;return!0}var h=y.Blowfish=F.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var d=this._keyPriorReset=this._key,E=d.words,s=d.sigBytes/4;l(x,E,s)}},encryptBlock:function(d,E){var s=t(x,d[E],d[E+1]);d[E]=s.left,d[E+1]=s.right},decryptBlock:function(d,E){var s=c(x,d[E],d[E+1]);d[E]=s.left,d[E+1]=s.right},blockSize:64/32,keySize:128/32,ivSize:64/32});i.Blowfish=F._createHelper(h)}(),v.Blowfish})}(De)),De.exports}(function(w,P){(function(v,i,B){w.exports=i(O(),T0(),Yt(),Qt(),v0(),Zt(),p0(),Jr(),Te(),Vt(),et(),Jt(),ea(),ra(),We(),ta(),d0(),Y(),aa(),xa(),sa(),na(),ia(),oa(),ca(),la(),da(),fa(),ha(),ua(),va(),pa(),ma(),Ca(),Ba())})(T,function(v){return v})})(Vr);var Ea=Vr.exports;const Pe=Ft(Ea),Le="MoodSyncSecureEncryptionKey2024!";function Aa(w,P=Le){try{return Pe.AES.encrypt(w,P).toString()}catch(v){return console.error("Encryption failed:",v),w}}function Fa(w,P=Le){try{return Pe.AES.decrypt(w,P).toString(Pe.enc.Utf8)}catch(v){return console.error("Decryption failed:",v),w}}function Xr(w){return`${Le}-Room-${w}`}function Da({isMinimized:w,onMinimizeToggle:P,onClose:v,chatRoomId:i}){const{user:B}=U0(),{toast:F}=I0(),{id:y}=Zr(),[,p]=Dt(),u=i||(y?parseInt(y):void 0),[r,x]=G.useState(""),[m,t]=G.useState([]),[c,l]=G.useState([]),[h,d]=G.useState(!1),[E,s]=G.useState(!1),[o,f]=G.useState(null),n=G.useRef(null),{data:a,isLoading:A,error:b}=H0({queryKey:["/api/premium/chat-rooms",u],queryFn:()=>u?fetch(`/api/premium/chat-rooms/${u}`).then(H=>{if(!H.ok)throw new Error("Failed to load chat room");return H.json()}):Promise.reject("No chat room ID provided"),enabled:!!u&&!!B}),{data:R=[],isLoading:C,error:D}=H0({queryKey:["/api/premium/chat-rooms",u,"participants"],queryFn:()=>u?fetch(`/api/premium/chat-rooms/${u}/participants`).then(H=>{if(!H.ok)throw new Error("Failed to load participants");return H.json()}):Promise.reject("No chat room ID provided"),enabled:!!u&&!!B});G.useEffect(()=>{if(!B||!u||!a)return;const I=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,L=new WebSocket(I);return L.onopen=()=>{console.log("WebSocket connection established"),L.send(JSON.stringify({type:"register",userId:B.id,emotion:a.emotion})),L.send(JSON.stringify({type:"join_room",userId:B.id,roomId:u}))},L.onmessage=K=>{try{const g=JSON.parse(K.data);if(g.type==="chat_message"&&g.roomId===u){let N=g.message;if(g.encrypted){const k=Xr(u);try{N=Fa(g.message,k)}catch($){console.error("Failed to decrypt message:",$),N="🔒 [Encrypted message - unable to decrypt]"}}const S={id:Math.random().toString(36).substring(2,9),userId:g.userId,username:g.username,content:N,timestamp:g.timestamp||new Date().toISOString(),avatarUrl:g.avatarUrl};t(k=>[...k,S])}}catch(g){console.error("Error parsing WebSocket message",g)}},L.onclose=()=>{console.log("WebSocket connection closed")},f(L),()=>{L&&L.readyState===WebSocket.OPEN&&(L.send(JSON.stringify({type:"leave_room",userId:B.id,roomId:u})),L.close())}},[B,u,a]),G.useEffect(()=>{var H;(H=n.current)==null||H.scrollIntoView({behavior:"smooth"})},[m]),G.useEffect(()=>{R.length>0&&l(R)},[R]);const j=()=>{if(!(!o||!B||!r.trim()||!u))if(o.readyState===WebSocket.OPEN){const H=Xr(u),I=Aa(r.trim(),H);o.send(JSON.stringify({type:"chat_message",roomId:u,userId:B.id,username:B.username,message:I,encrypted:!0,roomEmotion:(a==null?void 0:a.emotion)||"neutral"})),x("")}else F({title:"Connection issue",description:"Unable to send message. Please try again.",variant:"destructive"})},_=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),j())},z=u0({mutationFn:()=>!u||!B?Promise.reject("Missing data"):E0("DELETE",`/api/premium/chat-rooms/${u}/participants/${B.id}`),onSuccess:()=>{F({title:"Left chat room",description:"You have successfully left the chat room"}),v(),p("/")},onError:H=>{F({title:"Error",description:H instanceof Error?H.message:"Failed to leave chat room",variant:"destructive"})}});if(b||D)return e.jsxs("div",{className:`fixed ${w?"bottom-20 right-5 h-14 w-80":"inset-10"} bg-white rounded-lg shadow-lg overflow-hidden flex flex-col transition-all duration-300 ease-in-out z-50`,children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Error"}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(X,{variant:"ghost",size:"icon",onClick:v,children:e.jsx(R0,{className:"h-5 w-5"})})})]}),e.jsx("div",{className:"flex items-center justify-center p-8 text-center",children:e.jsx("p",{children:b instanceof Error?b.message:D instanceof Error?D.message:"An error occurred. Please try again."})})]});if(A||!a)return e.jsxs("div",{className:`fixed ${w?"bottom-20 right-5 h-14 w-80":"inset-10"} bg-white rounded-lg shadow-lg overflow-hidden flex flex-col transition-all duration-300 ease-in-out z-50`,children:[e.jsxs("div",{className:"bg-slate-100 text-slate-800 p-4 flex justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Loading chat room..."}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(X,{variant:"ghost",size:"icon",onClick:v,children:e.jsx(R0,{className:"h-5 w-5"})})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})]});const q=a.themeColor||_0[a.emotion].color,U=a.themeColor?`${a.themeColor}33`:_0[a.emotion].lightBackgroundColor;return e.jsxs("div",{className:`fixed ${w?"bottom-20 right-5 h-14 w-80":"inset-10"} bg-white rounded-lg shadow-lg overflow-hidden flex flex-col transition-all duration-300 ease-in-out z-50`,style:{borderColor:q,borderWidth:"1px"},children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",style:{backgroundColor:q,color:"#fff"},children:[!w&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"font-semibold",children:a.name}),e.jsxs("div",{className:"ml-2 text-xs bg-white/20 rounded-full px-2 py-0.5",children:[c.length," ",c.length===1?"participant":"participants"]})]}),w&&e.jsx("div",{className:"truncate font-semibold",children:a.name}),e.jsxs("div",{className:"flex space-x-2",children:[!w&&e.jsxs(e.Fragment,{children:[e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>d(!h),className:"text-white hover:bg-white/20",children:e.jsx(Qr,{className:"h-5 w-5"})}),e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>s(!E),className:"text-white hover:bg-white/20",children:e.jsx(bt,{className:"h-5 w-5"})}),e.jsxs(gt,{children:[e.jsx(yt,{asChild:!0,children:e.jsx(X,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(Lt,{className:"h-5 w-5"})})}),e.jsxs(jt,{align:"end",children:[a.createdBy===(B==null?void 0:B.id)&&e.jsxs(e.Fragment,{children:[e.jsxs(ir,{className:"cursor-pointer",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Edit Room Settings"]}),e.jsx(wt,{})]}),e.jsx(ir,{className:"cursor-pointer text-red-500 focus:text-red-500",onClick:()=>{window.confirm("Are you sure you want to leave this chat room?")&&z.mutate()},children:"Leave Chat Room"})]})]})]}),e.jsx(X,{variant:"ghost",size:"icon",onClick:P,className:"text-white hover:bg-white/20",children:w?e.jsx(kt,{className:"h-5 w-5"}):e.jsx(Nt,{className:"h-5 w-5"})}),!w&&e.jsx(X,{variant:"ghost",size:"icon",onClick:v,className:"text-white hover:bg-white/20",children:e.jsx(R0,{className:"h-5 w-5"})})]})]}),!w&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex-1 flex",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-50 border-y border-amber-200 p-3 text-amber-800 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w0,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("p",{className:"text-green-600 font-medium",children:"End-to-end encrypted chat"})]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Safety Warning:"})," Never share sensitive personal information like credit card details, passwords, or your address in chat rooms."]})]}),e.jsx(St,{className:"flex-1",children:e.jsxs("div",{className:"p-4 space-y-4",children:[m.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No messages yet. Be the first to say hello!"})}),m.map(H=>{const I=H.userId===(B==null?void 0:B.id);return e.jsx("div",{className:`flex ${I?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start max-w-[80%] ${I?"flex-row-reverse":""}`,children:[e.jsx(z0,{className:"w-8 h-8 mt-1",children:H.avatarUrl?e.jsx(Re,{src:H.avatarUrl,alt:H.username}):e.jsx(q0,{style:{backgroundColor:I?q:U},className:I?"text-white":"",children:H.username.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:`mx-2 space-y-1 ${I?"text-right":"text-left"}`,children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"font-medium text-sm",children:H.username}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(H.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:`rounded-lg px-3 py-2 ${I?"bg-primary text-white":"bg-gray-100"}`,style:{backgroundColor:I?q:""},children:e.jsxs("div",{className:"flex items-center",children:[H.content,e.jsx(w0,{className:"h-3 w-3 ml-1 opacity-50"})]})})]})]})},H.id)}),e.jsx("div",{ref:n})]})}),e.jsx("div",{className:"p-3 border-t",children:e.jsxs("div",{className:"flex items-end",children:[e.jsx(P0,{value:r,onChange:H=>x(H.target.value),onKeyDown:_,placeholder:"Type your message...",className:"flex-1 resize-none",rows:1}),e.jsx(X,{variant:"ghost",size:"icon",className:"ml-2 h-9 w-9 rounded-full",style:{backgroundColor:q,color:"white"},onClick:j,disabled:!r.trim(),children:e.jsx(Rt,{className:"h-4 w-4"})})]})})]}),(h||E)&&e.jsxs("div",{className:"w-64 border-l bg-gray-50",children:[h&&e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Participants"}),e.jsx("div",{className:"space-y-3",children:C?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"})}):c.map(H=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z0,{className:"w-6 h-6 mr-2",children:H.avatarUrl?e.jsx(Re,{src:H.avatarUrl,alt:H.username}):e.jsx(q0,{children:H.username.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"text-sm",children:H.username})]}),H.isAdmin&&e.jsx("span",{className:"text-xs bg-gray-200 px-1.5 py-0.5 rounded",children:"Admin"})]},H.id))})]}),E&&e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Room Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",a.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emotion:"})," ",a.emotion.charAt(0).toUpperCase()+a.emotion.slice(1)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(a.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Max Participants:"})," ",a.maxParticipants]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Custom Color:"})," ",a.themeColor||"Default"]}),e.jsxs("div",{className:"mt-3 border-t pt-3",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(w0,{className:"h-4 w-4 mr-2"}),e.jsx("p",{className:"font-medium",children:"End-to-End Encrypted"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"All messages in this chat room are encrypted and can only be read by participants. Your privacy is protected."})]})]})]})]})]})})]})}const ba=o0.object({blockedUserId:o0.number({required_error:"Please select a user to block"}),reason:o0.string().max(200,"Reason must be less than 200 characters").optional()});function ga(){const{user:w}=U0(),{toast:P}=I0(),[v,i]=G.useState(!1),[B,F]=G.useState(""),[y,p]=G.useState([]),[u,r]=G.useState(!1),{data:x=[],isLoading:m,error:t}=H0({queryKey:["/api/premium/blocked-users"],queryFn:async()=>{const a=await fetch("/api/premium/blocked-users");if(!a.ok)throw new Error("Failed to load blocked users");return a.json()},enabled:!!(w!=null&&w.isPremium)}),c=be({resolver:Se(ba),defaultValues:{reason:""}}),l=u0({mutationFn:async a=>{if(!a.trim())return[];const A=await fetch(`/api/users/search?query=${encodeURIComponent(a)}`);if(!A.ok)throw new Error("Failed to search users");return A.json()},onSuccess:a=>{p(a),r(!1)},onError:a=>{P({title:"Search failed",description:a instanceof Error?a.message:"Failed to search users",variant:"destructive"}),r(!1)}}),h=u0({mutationFn:a=>E0("POST","/api/premium/block-user",a),onSuccess:()=>{P({title:"User blocked",description:"The user has been blocked successfully"}),i(!1),c.reset(),p([]),F(""),h0.invalidateQueries({queryKey:["/api/premium/blocked-users"]})},onError:a=>{P({title:"Failed to block user",description:a instanceof Error?a.message:"An error occurred",variant:"destructive"})}}),d=u0({mutationFn:a=>E0("DELETE",`/api/premium/blocked-users/${a}`),onSuccess:()=>{P({title:"User unblocked",description:"The user has been unblocked successfully"}),h0.invalidateQueries({queryKey:["/api/premium/blocked-users"]})},onError:a=>{P({title:"Failed to unblock user",description:a instanceof Error?a.message:"An error occurred",variant:"destructive"})}}),E=()=>{B.trim()&&(r(!0),l.mutate(B))},s=a=>{a.key==="Enter"&&(a.preventDefault(),E())},o=a=>{h.mutate(a)},f=a=>{window.confirm("Are you sure you want to unblock this user?")&&d.mutate(a)},n=a=>{c.setValue("blockedUserId",a.id)};return t?e.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-red-500 mb-2",children:[e.jsx(Ht,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-medium",children:"Error Loading Blocked Users"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:t instanceof Error?t.message:"Failed to load blocked users."}),e.jsx(X,{onClick:()=>h0.invalidateQueries({queryKey:["/api/premium/blocked-users"]}),variant:"outline",children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Blocked Users"}),e.jsxs(ge,{open:v,onOpenChange:i,children:[e.jsx(Gr,{asChild:!0,children:e.jsxs(X,{children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Block User"]})}),e.jsxs(ye,{className:"sm:max-w-[525px]",children:[e.jsxs(je,{children:[e.jsx(_e,{children:"Block a User"}),e.jsx(we,{children:"Search for a user to block. Blocked users won't be able to contact you or see your private content."})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx(i0,{placeholder:"Search for a user by username",value:B,onChange:a=>F(a.target.value),onKeyDown:s,className:"flex-1"}),e.jsx(X,{onClick:E,disabled:!B.trim()||u,children:u?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}):e.jsx(Pt,{className:"h-4 w-4"})})]}),y.length>0&&e.jsx("div",{className:"border rounded-md divide-y max-h-48 overflow-y-auto",children:y.map(a=>{const A=x.some(R=>R.blockedUserId===a.id),b=a.id===(w==null?void 0:w.id);return e.jsxs("div",{className:`p-2 flex justify-between items-center ${A||b?"bg-gray-50 opacity-60":"hover:bg-gray-50 cursor-pointer"}`,onClick:()=>{!A&&!b&&n(a)},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z0,{className:"h-8 w-8 mr-2",children:a.avatarUrl?e.jsx(Re,{src:a.avatarUrl,alt:a.username}):e.jsx(q0,{children:a.username.substring(0,2).toUpperCase()})}),e.jsx("span",{children:a.username})]}),A&&e.jsx("span",{className:"text-xs text-gray-500",children:"Already blocked"}),b&&e.jsx("span",{className:"text-xs text-gray-500",children:"You"}),!A&&!b&&c.getValues("blockedUserId")===a.id&&e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"})]},a.id)})}),y.length===0&&B&&!u&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:['No users found matching "',B,'"']})]}),e.jsx(ke,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o),className:"space-y-4",children:[e.jsx(J,{control:c.control,name:"reason",render:({field:a})=>e.jsxs(e0,{children:[e.jsx(x0,{children:"Reason (Optional)"}),e.jsx(r0,{children:e.jsx(P0,{placeholder:"Why are you blocking this user?",...a,value:a.value||""})}),e.jsx(f0,{children:"This is for your reference only. The user won't see this reason."}),e.jsx(t0,{})]})}),e.jsx(J,{control:c.control,name:"blockedUserId",render:({field:a})=>e.jsxs(e0,{className:"hidden",children:[e.jsx(r0,{children:e.jsx(i0,{type:"hidden",...a,value:a.value||""})}),e.jsx(t0,{})]})}),e.jsxs(Ne,{children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(X,{type:"submit",variant:"destructive",disabled:h.isPending||!c.getValues("blockedUserId"),children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}),"Blocking..."]}):"Block User"})]})]})})]})]})]}),m?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):x.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 text-primary flex items-center justify-center mx-auto mb-4",children:e.jsx(He,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Blocked Users"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:`You haven't blocked any users yet. Use the "Block User" button to manage users you don't want to interact with.`})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(a=>e.jsxs(ze,{children:[e.jsx(qe,{className:"pb-2",children:e.jsxs(Ue,{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z0,{className:"h-8 w-8 mr-2",children:e.jsx(q0,{children:a.blockedUser.username.substring(0,2).toUpperCase()})}),e.jsx("span",{children:a.blockedUser.username})]}),e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>f(a.blockedUserId),disabled:d.isPending,children:[e.jsx(R0,{className:"h-4 w-4 mr-1"}),"Unblock"]})]})}),e.jsx(Ie,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex justify-between text-gray-500 mb-2",children:e.jsxs("span",{children:["Blocked on ",new Date(a.blockedAt).toLocaleDateString()]})}),a.reason&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-gray-700 font-medium mb-1",children:"Reason:"}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-gray-600",children:a.reason})]})]})})]},a.id))})]})}function Sa(){const{user:w}=U0();I0();const P=Zr(),[v,i]=G.useState(P.id?parseInt(P.id):null),[B,F]=G.useState(!1),y=r=>{i(r)},p=()=>{i(null)},u=()=>{F(!B)};return w&&!w.isPremium?e.jsx("div",{className:"container max-w-screen-lg mx-auto py-8 px-4",children:e.jsxs(ze,{className:"border-2 border-dashed border-primary",children:[e.jsxs(qe,{className:"text-center pb-6",children:[e.jsx(Ue,{className:"text-3xl font-bold",children:"Premium Feature"}),e.jsx(Yr,{className:"text-lg mt-2",children:"Access to private chat rooms is available only for premium members"})]}),e.jsxs(Ie,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(or,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Private Chat Rooms"}),e.jsx("p",{className:"text-gray-600",children:"Create your own private chat rooms to connect with specific users based on emotions."})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(w0,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Invite-Only Access"}),e.jsx("p",{className:"text-gray-600",children:"Control who can join your chat rooms for more meaningful conversations."})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(He,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"User Blocking"}),e.jsx("p",{className:"text-gray-600",children:"Block unwanted users and manage your chat experience with enhanced privacy controls."})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(X,{size:"lg",className:"font-semibold px-8 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white",children:[e.jsx(zt,{className:"h-5 w-5 mr-2"}),"Upgrade to Premium"]})})]})]})}):e.jsxs("div",{className:"container max-w-screen-lg mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Premium Chat Rooms"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your private chat rooms, control access, and connect with others in a more meaningful way."})]}),e.jsxs(qt,{defaultValue:"my-rooms",className:"space-y-4",children:[e.jsxs(Ut,{children:[e.jsxs(cr,{value:"my-rooms",className:"flex items-center",children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),"My Chat Rooms"]}),e.jsxs(cr,{value:"blocked-users",className:"flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Blocked Users"]})]}),e.jsx(lr,{value:"my-rooms",className:"space-y-4",children:e.jsx(Kt,{onOpenChatRoom:y})}),e.jsx(lr,{value:"blocked-users",className:"space-y-4",children:e.jsx(ga,{})})]}),v&&e.jsx(Da,{chatRoomId:v,isMinimized:B,onMinimizeToggle:u,onClose:p})]})}export{Sa as default};
