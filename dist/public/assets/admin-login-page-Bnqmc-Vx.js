import{aG as b,a as w,r as y,aj as C,j as e,C as F,d as L,e as N,f as S,g as v,ak as E,al as l,am as c,an as d,as as m,I as u,ar as x,B as p,k,s as I,aC as n,t as P,aD as A}from"./index-DQa6QqId.js";const T=n.object({username:n.string().min(1,"Username is required"),password:n.string().min(1,"Password is required")});function z(){const[,j]=b(),{toast:o}=w(),[t,i]=y.useState(!1),s=C({resolver:A(T),defaultValues:{username:"",password:""}}),h=async r=>{i(!0);try{const a=await P("POST","/api/admin/login",r);if(!a.ok){const f=await a.json();throw new Error(f.message||"Failed to login")}const g=await a.json();o({title:"Login successful",description:`Welcome back, ${g.username}!`}),j("/admin")}catch(a){o({title:"Login failed",description:a instanceof Error?a.message:"Invalid username or password",variant:"destructive"})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-indigo-100 p-4",children:e.jsxs(F,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(L,{className:"space-y-1",children:[e.jsx(N,{className:"text-2xl font-bold text-center bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent",children:"MoodSync Admin"}),e.jsx(S,{className:"text-center",children:"Enter your credentials to access the admin panel"})]}),e.jsx(v,{children:e.jsx(E,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(h),className:"space-y-4",children:[e.jsx(l,{control:s.control,name:"username",render:({field:r})=>e.jsxs(c,{children:[e.jsx(d,{children:"Username"}),e.jsx(m,{children:e.jsx(u,{placeholder:"Enter username",...r,disabled:t})}),e.jsx(x,{})]})}),e.jsx(l,{control:s.control,name:"password",render:({field:r})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(u,{type:"password",placeholder:"••••••••",...r,disabled:t})}),e.jsx(x,{})]})}),e.jsx(p,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Log in"})]})})}),e.jsxs(I,{className:"flex flex-col items-center space-y-3",children:[e.jsx(p,{variant:"outline",type:"button",size:"sm",className:"text-xs",onClick:()=>{s.setValue("username","test"),s.setValue("password","aaaaaa")},children:"Auto-fill Test Credentials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protected area - Authorized personnel only"})]})]})})}export{z as default};
