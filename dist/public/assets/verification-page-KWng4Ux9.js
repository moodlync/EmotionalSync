import{r as M,a as q,W as R,Y as U,l as Y,j as e,C as y,d as v,e as g,f as b,g as N,a0 as z,B as f,F as G,w as o,x as m,v as u,G as H,y as x,H as K,J as W,K as $,M as Q,z as h,D as p,I as w,aG as V,aH as T,al as F,ae as I,aI as _,b_ as J,b$ as S,c0 as k,V as X,t as Z,u as ee,aT as se,k as ae,p as ie}from"./index-BtgMuIOb.js";import{C as E}from"./calendar-DJsnWGKD.js";import{U as te}from"./upload-BVPV_8hG.js";import{f as C}from"./format-Bl9MMttU.js";import{S as j}from"./shield-check-BsCuiFIX.js";import"./chevron-left-FCxy29hH.js";const L=[{value:"passport",label:"Passport"},{value:"drivers_license",label:"Driver's License"},{value:"national_id",label:"National ID Card"},{value:"state_id",label:"State ID Card"},{value:"birth_certificate",label:"Birth Certificate"},{value:"social_security",label:"Social Security Card"},{value:"health_card",label:"Health Insurance Card"},{value:"medicare_card",label:"Medicare Card"},{value:"citizenship_card",label:"Citizenship Card"},{value:"biometric_residence",label:"Biometric Residence Permit"},{value:"residence_permit",label:"Residence Permit"},{value:"certificate_citizenship",label:"Certificate of Citizenship"},{value:"other",label:"Other Government ID"}],re=J({documentType:S({required_error:"Please select a document type"}),documentNumber:S({required_error:"Document number is required"}).min(3,{message:"Document number must be at least 3 characters"}),documentUrl:S().optional(),issuedBy:S().optional(),issuedDate:k().optional(),expirationDate:k().optional()});function ne(){var P;const[l,c]=M.useState(!1),{toast:r}=q(),d=R(),{data:t,isLoading:D}=U({queryKey:["/api/user/verification/status"],retry:!1,staleTime:3e4}),i=Y({resolver:Z(re),defaultValues:{documentType:"",documentNumber:"",documentUrl:"",issuedBy:""}}),B=async s=>{c(!0);try{const a={...s,issuedDate:s.issuedDate?s.issuedDate.toISOString():void 0,expirationDate:s.expirationDate?s.expirationDate.toISOString():void 0},n=await X("POST","/api/user/verification/documents",a);if(!n.ok){const A=await n.json();throw new Error(A.error||"Failed to submit document")}r({title:"Document submitted successfully",description:"Your document has been submitted for verification. This process typically takes 1-3 business days."}),i.reset(),d.invalidateQueries({queryKey:["/api/user/verification/status"]})}catch(a){r({title:"Submission failed",description:a.message||"There was a problem submitting your document",variant:"destructive"})}finally{c(!1)}},O=s=>{var n;const a=(n=s.target.files)==null?void 0:n[0];a&&(i.setValue("documentUrl",`uploaded_${a.name}`),r({title:"File selected",description:`Selected file: ${a.name}`}))};return D?e.jsx("div",{className:"flex items-center justify-center p-8",children:"Loading verification status..."}):(t==null?void 0:t.status)==="verified"?e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(g,{children:"Verification Status"}),e.jsx(b,{children:"Your account is already verified"})]}),e.jsx(N,{children:e.jsxs("div",{className:"bg-green-50 text-green-700 p-4 rounded-md",children:[e.jsx("p",{className:"font-medium",children:"✅ Your account has been verified"}),e.jsxs("p",{className:"text-sm mt-2",children:["Verified on: ",t.verifiedAt?C(new Date(t.verifiedAt),"MMMM dd, yyyy"):"Unknown"]})]})})]}):((P=t==null?void 0:t.documents)==null?void 0:P.some(s=>s.verificationStatus==="pending"))?e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(g,{children:"Verification in Progress"}),e.jsx(b,{children:"Your documents are being verified"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"bg-yellow-50 text-yellow-700 p-4 rounded-md",children:[e.jsx("p",{className:"font-medium",children:"⏳ Verification in progress"}),e.jsx("p",{className:"text-sm mt-2",children:"We are currently reviewing your submitted documents. This process typically takes 1-3 business days."})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Submitted Documents:"}),e.jsx("ul",{className:"space-y-2",children:t.documents.map(s=>{var a;return e.jsxs("li",{className:"text-sm border rounded-md p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:((a=L.find(n=>n.value===s.documentType))==null?void 0:a.label)||s.documentType}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.verificationStatus==="pending"?"bg-yellow-100 text-yellow-800":s.verificationStatus==="verified"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.verificationStatus==="pending"?"Pending":s.verificationStatus==="verified"?"Verified":"Rejected"})]}),e.jsxs("div",{className:"text-gray-500 mt-1",children:["Document #",s.documentNumber]}),e.jsxs("div",{className:"text-gray-400 text-xs mt-1",children:["Submitted: ",C(new Date(s.submittedAt),"MMM dd, yyyy")]})]},s.id)})})]})]}),e.jsx(z,{children:e.jsx(f,{variant:"outline",onClick:()=>{d.invalidateQueries({queryKey:["/api/user/verification/status"]})},children:"Refresh Status"})})]}):e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(g,{children:"Account Verification"}),e.jsx(b,{children:"Verify your account to unlock additional features. Please provide a valid government-issued ID."})]}),e.jsx(N,{children:e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(B),className:"space-y-6",children:[e.jsx(o,{control:i.control,name:"documentType",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"ID Document Type"}),e.jsxs(H,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(x,{children:e.jsx(K,{children:e.jsx(W,{placeholder:"Select a document type"})})}),e.jsx($,{children:L.map(a=>e.jsx(Q,{value:a.value,children:a.label},a.value))})]}),e.jsx(h,{children:"Select the type of government-issued ID you are submitting."}),e.jsx(p,{})]})}),e.jsx(o,{control:i.control,name:"documentNumber",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"Document Number"}),e.jsx(x,{children:e.jsx(w,{placeholder:"Enter document number",...s})}),e.jsx(h,{children:"Enter the ID number exactly as it appears on your document."}),e.jsx(p,{})]})}),e.jsx(o,{control:i.control,name:"issuedBy",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"Issued By (Optional)"}),e.jsx(x,{children:e.jsx(w,{placeholder:"Issuing authority or country",...s})}),e.jsx(h,{children:"The authority or country that issued this document."}),e.jsx(p,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:i.control,name:"issuedDate",render:({field:s})=>e.jsxs(m,{className:"flex flex-col",children:[e.jsx(u,{children:"Issue Date (Optional)"}),e.jsxs(V,{children:[e.jsx(T,{asChild:!0,children:e.jsx(x,{children:e.jsxs(f,{variant:"outline",className:F("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?C(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(I,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(_,{className:"w-auto p-0",align:"start",children:e.jsx(E,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a>new Date||a<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(h,{children:"When was this document issued?"}),e.jsx(p,{})]})}),e.jsx(o,{control:i.control,name:"expirationDate",render:({field:s})=>e.jsxs(m,{className:"flex flex-col",children:[e.jsx(u,{children:"Expiration Date (Optional)"}),e.jsxs(V,{children:[e.jsx(T,{asChild:!0,children:e.jsx(x,{children:e.jsxs(f,{variant:"outline",className:F("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?C(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(I,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(_,{className:"w-auto p-0",align:"start",children:e.jsx(E,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a<new Date,initialFocus:!0})})]}),e.jsx(h,{children:"When does this document expire?"}),e.jsx(p,{})]})})]}),e.jsx(o,{control:i.control,name:"documentUrl",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"Upload Document (Optional)"}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{type:"file",className:"hidden",id:"document-upload",accept:"image/*,.pdf",onChange:O}),e.jsx(w,{...s,placeholder:"No file selected",disabled:!0,className:"flex-1"}),e.jsxs(f,{type:"button",variant:"outline",className:"gap-2 cursor-pointer",onClick:()=>{var a;return(a=document.getElementById("document-upload"))==null?void 0:a.click()},children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Browse"})]})]})}),e.jsx(h,{children:"Upload a clear photo or scan of your document (JPEG, PNG, or PDF). For demo purposes, file won't actually be uploaded."}),e.jsx(p,{})]})}),e.jsx("div",{className:"pt-4",children:e.jsx(f,{type:"submit",className:"w-full",disabled:l,children:l?"Submitting...":"Submit for Verification"})})]})})})]})}function he(){const{user:l,isLoading:c}=ee(),[,r]=se(),{data:d,isLoading:t}=U({queryKey:["/api/user/premium/status"],enabled:!!l}),D=d==null?void 0:d.isPremium,i=c||t;return M.useEffect(()=>{!c&&!l&&r("/auth")},[c,l,r]),i?e.jsx("div",{className:"container mx-auto py-8 flex items-center justify-center min-h-[calc(100vh-200px)]",children:e.jsx(ae,{className:"h-8 w-8 animate-spin text-primary"})}):D?e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(j,{className:"h-7 w-7 text-primary"}),"Account Verification"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(ne,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(g,{children:"Benefits"}),e.jsx(b,{children:"Why get verified?"})]}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:e.jsx(j,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Enhanced Trust"}),e.jsx("p",{className:"text-muted-foreground",children:"Show others you're a verified member"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:e.jsx(j,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"More Visibility"}),e.jsx("p",{className:"text-muted-foreground",children:"Verified profiles appear higher in search results"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:e.jsx(j,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Exclusive Features"}),e.jsx("p",{className:"text-muted-foreground",children:"Access to verified-only features and communities"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:e.jsx(j,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Enhanced Security"}),e.jsx("p",{className:"text-muted-foreground",children:"Additional account protection measures"})]})]})]})]}),e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(g,{children:"Process"}),e.jsx(b,{children:"How verification works"})]}),e.jsxs(N,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"1. Submit your verification documents"}),e.jsx("p",{children:"2. Our team reviews your submission (1-3 days)"}),e.jsx("p",{children:"3. Once approved, your badge appears on your profile"}),e.jsx("p",{children:"4. Verification is valid for 1 year (can be renewed)"})]})]})]})]})]})}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(y,{className:"border-yellow-200 shadow-md",children:[e.jsxs(v,{className:"bg-yellow-50 border-b border-yellow-100",children:[e.jsxs(g,{className:"text-center flex items-center justify-center gap-2 text-yellow-800",children:[e.jsx(ie,{className:"h-5 w-5"}),"Premium Feature"]}),e.jsx(b,{className:"text-center text-yellow-700",children:"Verification is a premium feature"})]}),e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(j,{className:"h-16 w-16 mx-auto text-yellow-500"}),e.jsx("h3",{className:"text-lg font-medium",children:"Account Verification"}),e.jsx("p",{className:"text-muted-foreground",children:"Account verification is available exclusively for premium members. Verified users receive a verification badge and access to enhanced platform features."}),e.jsx("div",{className:"pt-4",children:e.jsx(f,{onClick:()=>r("/premium"),variant:"default",children:"Upgrade to Premium"})})]})})]})})})}export{he as default};
