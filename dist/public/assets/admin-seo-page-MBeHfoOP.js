import{R as p,a as U,r as g,cg as d,l as q,t as _,b as G,j as e,cf as J,a4 as Q,a5 as W,a6 as X,a7 as Y,C as S,d as T,e as E,f as K,g as A,F as Z,w as j,x as y,v as w,y as f,I as N,z as b,D as k,E as ee,B as C,b5 as se,b9 as V,o as te,aT as re}from"./index-FJB1i4HR.js";import{A as ie}from"./admin-layout-8bamUuof.js";import{A as ne,a as ae,b as oe}from"./alert-DPSoV0TE.js";import{S as le}from"./save-c1sccU0T.js";import{T as de}from"./trash-2-BI2eKKfZ.js";import"./log-out-BnUgBTG3.js";import"./rotate-ccw-DBn94ek4.js";import"./quote-B2rQvQyw.js";import"./database-rNbYySWX.js";const ce=p.object({pageKey:p.string().min(1,"Page key is required"),title:p.string().min(5,"Title must be at least 5 characters").max(70,"Title should be no more than 70 characters"),description:p.string().min(50,"Description must be at least 50 characters").max(160,"Description should be no more than 160 characters"),keywords:p.string().transform(l=>l.split(",").map(t=>t.trim()).filter(t=>t.length>0)),noindex:p.boolean().default(!1)}),me=({keyword:l,onDelete:t})=>e.jsxs(te,{variant:"secondary",className:"mr-1 mb-1 px-2 py-1 text-xs",children:[l,e.jsx("button",{onClick:t,className:"ml-1 text-muted-foreground hover:text-destructive",children:e.jsx(de,{size:12})})]}),he=async(l,t)=>(console.log(`Updating SEO config for ${l}:`,t),{success:!0,data:t}),xe=({pageKey:l,title:t,description:v,keywords:x})=>{const c=t.length,a=v.length,m=x.length;return e.jsxs(S,{children:[e.jsxs(T,{children:[e.jsx(E,{className:"text-base",children:"SEO Insights"}),e.jsx(K,{children:"Analysis and suggestions for your SEO settings"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-1",children:["Title (",c,"/70)"]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${c<30?"bg-yellow-500":c>60?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(c/70*100,100)}%`}})}),c<30&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Title is too short. Aim for 50-60 characters for optimal visibility."}),c>60&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Title is approaching the display limit. It may get truncated in search results."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-1",children:["Description (",a,"/160)"]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a<80?"bg-yellow-500":a>150?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(a/160*100,100)}%`}})}),a<80&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Description is too short. Aim for 120-155 characters for best results."}),a>150&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Description is approaching the display limit. It may get truncated in search results."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-1",children:["Keywords (",m,")"]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m<5||m>15?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(m/20*100,100)}%`}})}),m<5&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Consider adding more keywords to improve discoverability."}),m>15&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Too many keywords may dilute your SEO focus. Consider narrowing down."})]}),e.jsxs(ne,{className:"mt-4",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(ae,{children:"SEO Recommendations"}),e.jsx(oe,{children:e.jsxs("ul",{className:"list-disc pl-5 text-xs space-y-1 mt-2",children:[e.jsx("li",{children:"Include primary keyword near the beginning of the title"}),e.jsx("li",{children:"Ensure description contains 2-3 important keywords"}),e.jsx("li",{children:"Make sure description accurately summarizes the page content"}),e.jsx("li",{children:"Use specific, targeted keywords rather than generic terms"}),e.jsx("li",{children:"Consider adding structured data for enhanced search results"})]})})]})]})]})},pe=({title:l,description:t})=>e.jsxs(S,{children:[e.jsxs(T,{children:[e.jsx(E,{className:"text-base",children:"Search Result Preview"}),e.jsx(K,{children:"How your page might appear in search results"})]}),e.jsx(A,{children:e.jsxs("div",{className:"border rounded-md p-4 max-w-2xl",children:[e.jsx("div",{className:"text-blue-600 text-xl font-medium truncate",children:l||"Page Title"}),e.jsxs("div",{className:"text-green-700 text-sm",children:[window.location.origin,"/..."]}),e.jsx("div",{className:"text-gray-800 text-sm mt-1 line-clamp-2",children:t||"Page description will appear here. Make sure it's compelling and contains relevant keywords."})]})})]}),ke=()=>{var I,P,F,M,z,B,$;const{toast:l}=U(),[t,v]=g.useState("home"),[x,c]=g.useState(""),[a,m]=g.useState(Object.entries(d).reduce((r,[s,i])=>({...r,[s]:{title:i.title,description:i.description,keywords:i.keywords,noindex:i.noindex||!1}}),{})),n=q({resolver:_(ce),defaultValues:{pageKey:t,title:((I=a[t])==null?void 0:I.title)||"",description:((P=a[t])==null?void 0:P.description)||"",keywords:((F=a[t])==null?void 0:F.keywords.join(", "))||"",noindex:((M=a[t])==null?void 0:M.noindex)||!1}});g.useEffect(()=>{var r,s,i,o;n.reset({pageKey:t,title:((r=a[t])==null?void 0:r.title)||"",description:((s=a[t])==null?void 0:s.description)||"",keywords:((i=a[t])==null?void 0:i.keywords.join(", "))||"",noindex:((o=a[t])==null?void 0:o.noindex)||!1})},[t,a,n]);const u=G({mutationFn:async r=>{const{pageKey:s,...i}=r;return he(s,{...i,keywords:typeof i.keywords=="string"?i.keywords.split(",").map(o=>o.trim()).filter(Boolean):i.keywords})},onSuccess:(r,s)=>{const{pageKey:i,...o}=s;m(h=>({...h,[i]:{...o,keywords:typeof o.keywords=="string"?o.keywords.split(",").map(H=>H.trim()).filter(Boolean):o.keywords}})),l({title:"SEO settings saved",description:`SEO configuration for ${i} has been updated.`})},onError:r=>{l({title:"Failed to save SEO settings",description:r.message,variant:"destructive"})}}),R=r=>{u.mutate(r)},O=()=>{if(!x.trim())return;const r=n.getValues("keywords"),s=typeof r=="string"?r.split(",").map(i=>i.trim()).filter(Boolean):r;if(!s.includes(x.trim())){const i=[...s,x.trim()];n.setValue("keywords",i.join(", "))}c("")},L=r=>{const s=n.getValues("keywords"),o=(typeof s=="string"?s.split(",").map(h=>h.trim()).filter(Boolean):s).filter(h=>h!==r);n.setValue("keywords",o.join(", "))},D=()=>{const r=n.getValues("keywords");return typeof r=="string"?r.split(",").map(s=>s.trim()).filter(Boolean):r};return e.jsxs(ie,{children:[e.jsx(J,{title:(z=d.admin)==null?void 0:z.title,description:(B=d.admin)==null?void 0:B.description,keywords:($=d.admin)==null?void 0:$.keywords,noindex:!0}),e.jsxs("div",{className:"container p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"SEO Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Optimize search engine visibility by configuring page titles, descriptions, and keywords"})]}),e.jsxs(Q,{value:t,onValueChange:v,className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(W,{className:"grid grid-cols-4 md:grid-cols-7 mb-4",children:Object.keys(d).map(r=>e.jsx(X,{value:r,className:"capitalize",children:r},r))})}),Object.keys(d).map(r=>e.jsx(Y,{value:r,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(S,{children:[e.jsxs(T,{children:[e.jsxs(E,{children:[r.charAt(0).toUpperCase()+r.slice(1)," Page SEO Settings"]}),e.jsxs(K,{children:["Configure search engine optimization settings for the ",r," page"]})]}),e.jsx(A,{children:e.jsx(Z,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(R),className:"space-y-6",children:[e.jsx("input",{type:"hidden",...n.register("pageKey"),value:t}),e.jsx(j,{control:n.control,name:"title",render:({field:s})=>e.jsxs(y,{children:[e.jsxs(w,{children:["Page Title ",e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s.value.length,"/70)"]})]}),e.jsx(f,{children:e.jsx(N,{...s,placeholder:"Enter page title"})}),e.jsx(b,{children:"Optimal length is 50-60 characters. Include important keywords near the start."}),e.jsx(k,{})]})}),e.jsx(j,{control:n.control,name:"description",render:({field:s})=>e.jsxs(y,{children:[e.jsxs(w,{children:["Meta Description ",e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s.value.length,"/160)"]})]}),e.jsx(f,{children:e.jsx(ee,{...s,placeholder:"Enter meta description",className:"resize-none h-24"})}),e.jsx(b,{children:"Optimal length is 120-155 characters. Include 2-3 important keywords."}),e.jsx(k,{})]})}),e.jsxs("div",{children:[e.jsx(w,{children:"Keywords"}),e.jsxs("div",{className:"flex mt-1.5 mb-3",children:[e.jsx(N,{value:x,onChange:s=>c(s.target.value),placeholder:"Add keyword",className:"mr-2",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),O())}}),e.jsxs(C,{type:"button",onClick:O,variant:"outline",size:"sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1"})," Add"]})]}),e.jsx("div",{className:"flex flex-wrap mb-2 min-h-10",children:D().map((s,i)=>e.jsx(me,{keyword:s,onDelete:()=>L(s)},i))}),e.jsx(b,{children:"Add 8-12 relevant keywords that accurately describe the page content."}),e.jsx(j,{control:n.control,name:"keywords",render:({field:s})=>e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(N,{type:"hidden",...s})}),e.jsx(k,{})]})})]}),e.jsx(j,{control:n.control,name:"noindex",render:({field:s})=>e.jsxs(y,{className:"flex flex-row items-center space-x-3 space-y-0 py-2",children:[e.jsx(f,{children:e.jsx("input",{type:"checkbox",checked:s.value,onChange:s.onChange,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsxs("div",{children:[e.jsx(w,{children:"Exclude from search engines"}),e.jsx(b,{children:"If checked, search engines will not index this page."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(C,{type:"button",variant:"outline",onClick:()=>{var s,i,o,h;n.reset({pageKey:t,title:((s=d[t])==null?void 0:s.title)||"",description:((i=d[t])==null?void 0:i.description)||"",keywords:((o=d[t])==null?void 0:o.keywords.join(", "))||"",noindex:((h=d[t])==null?void 0:h.noindex)||!1})},children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," Reset"]}),e.jsxs(C,{type:"submit",disabled:u.isPending,children:[u.isPending&&e.jsx(V,{className:"h-4 w-4 mr-1 animate-spin"}),!u.isPending&&e.jsx(le,{className:"h-4 w-4 mr-1"}),"Save Changes"]})]})]})})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(pe,{title:n.watch("title"),description:n.watch("description")}),e.jsx(xe,{pageKey:t,title:n.watch("title"),description:n.watch("description"),keywords:D()})]})]})},r))]})]})]})};export{ke as default};
