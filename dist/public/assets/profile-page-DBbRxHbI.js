import{c as ns,u as _,a as J,r as T,b as L,j as e,C as b,d as w,e as k,U as Ie,f as C,g as N,A as ls,h as Ye,i as cs,B as x,X as Ue,L as es,I as E,k as I,q as G,l as ds,t as os,P as ms,F as xs,T as te,m as re,n as ie,o as v,p as le,s as ne,v as V,w as q,x as B,y as z,z as O,D as Q,E as us,S as R,G as we,H as ke,J as Ce,K as Se,M as P,N as Fe,O as ss,Q as Le,R as U,V as F,W as hs,Y,Z as Ve,_ as Pe,$ as se,a0 as Re,a1 as ae,a2 as Ne,a3 as W,a4 as ve,a5 as be,a6 as S,a7 as D,a8 as as,a9 as ts,aa as fe,ab as $,ac as ye,ad as Ke,ae as js,af as qe,ag as Be,ah as ps,ai as gs,aj as fs,ak as ys,al as Ns,am as vs,an as bs,ao as ze,ap as ws,aq as ks,ar as Me,as as Cs,at as Ss,au as De}from"./index-FJB1i4HR.js";import{R as Te}from"./refresh-ccw-BzMz-B9P.js";import{S as Oe}from"./shield-check-D5qxDi6h.js";import{C as ee}from"./copy-Ben7Z46t.js";import{K as Ge}from"./key-DYvMoJT5.js";import{A as ce,a as de,B as Ps,b as oe,c as me,d as xe,e as ue,f as he,g as je,h as pe}from"./alert-dialog-ClcxSCe0.js";import{D as rs}from"./database-rNbYySWX.js";import{F as Ds}from"./file-text-DIhTdHY3.js";import{T as Ts}from"./trash-BGSYOfIu.js";import{C as As}from"./calendar-BKwWmjhZ.js";import{T as $e}from"./thumbs-up-d6JypP4Q.js";import{C as ge}from"./chart-no-axes-column-increasing-BizoCW2C.js";import{D as Es}from"./download-L8JcrHkQ.js";import{B as Fs}from"./bookmark-Bw-eOiaC.js";import{C as Ls}from"./circle-x-DEI79z4-.js";import{E as Vs}from"./external-link-C6uNPEVg.js";import{f as _e}from"./format-unr8vqsB.js";import"./chevron-left-DN_mVM4z.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ns("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);function Is(){const{user:s}=_(),{toast:a}=J(),[r,n]=T.useState(null),[i,m]=T.useState(null),j=t=>{if(t.target.files&&t.target.files[0]){const p=t.target.files[0];if(!p.type.match("image.*")){a({title:"Invalid file type",description:"Please select an image file (JPEG, PNG, etc.)",variant:"destructive"});return}if(p.size>2*1024*1024){a({title:"File too large",description:"Profile picture must be less than 2MB",variant:"destructive"});return}n(p);const d=new FileReader;d.onloadend=()=>{m(d.result);const g=new FormData;g.append("profilePicture",p),o.mutate(g)},d.readAsDataURL(p)}},l=()=>{n(null),m(null)},o=L({mutationFn:async t=>await(await fetch("/api/profile/picture",{method:"POST",body:t})).json(),onSuccess:t=>{G.setQueryData(["/api/user"],p=>({...p,profilePicture:t.profilePicture})),a({title:"Success",description:"Your profile picture has been updated"}),l()},onError:t=>{a({title:"Failed to update profile picture",description:t.message,variant:"destructive"})}}),u=()=>{const t=new FormData;t.append("remove","true"),o.mutate(t)},c=o.isPending;return e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Profile Picture"]}),e.jsx(C,{children:"Update your profile picture or avatar"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(ls,{className:"h-32 w-32 border-2 border-primary/20",children:i?e.jsx(Ye,{src:i,alt:"Preview"}):s!=null&&s.profilePicture?e.jsx(Ye,{src:s.profilePicture,alt:s.username}):e.jsx(cs,{className:"text-4xl bg-primary/10",children:s==null?void 0:s.username.charAt(0).toUpperCase()})}),((s==null?void 0:s.profilePicture)||i)&&e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:u,disabled:c,children:[e.jsx(Ue,{className:"h-4 w-4 mr-1"}),"Remove Picture"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{htmlFor:"profile-picture",children:"Upload new image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{id:"profile-picture",type:"file",accept:"image/*",onChange:j,disabled:c,className:"flex-1"}),r&&e.jsx(x,{type:"button",variant:"ghost",size:"icon",onClick:l,children:e.jsx(Ue,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Maximum file size: 2MB. Supported formats: JPEG, PNG."})]}),c&&e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(I,{className:"h-4 w-4 mr-2 animate-spin"}),e.jsx("span",{children:"Uploading profile picture..."})]})]})})]})}const Rs=U.object({displayName:U.string().min(2,{message:"Display name must be at least 2 characters."}).max(30,{message:"Display name must be no more than 30 characters."}).regex(/^[a-zA-Z0-9\s_\-\.]+$/,{message:"Display name can only contain letters, numbers, spaces, underscores, hyphens, and periods."}).optional(),bio:U.string().max(250,{message:"Bio must be no more than 250 characters."}).optional(),theme:U.enum(["light","dark","system"]).optional(),language:U.enum(["en","es","fr","de","zh","ja","ko","ru"]).optional(),dailyReminder:U.boolean().optional(),weeklyInsights:U.boolean().optional(),publicProfileLink:U.string().regex(/^[a-zA-Z0-9_]+$/,{message:"Custom URL can only contain letters, numbers, and underscores"}).min(3,{message:"Custom URL must be at least 3 characters."}).max(30,{message:"Custom URL must be no more than 30 characters."}).optional(),moodGoal:U.enum(["improve_mindfulness","track_stress","better_sleep","reduce_anxiety","increase_happiness"]).optional(),dailyCheckInTime:U.string().optional()});function Ys(){var t,p;const{user:s}=_(),{toast:a}=J(),[r,n]=T.useState(!1),i=ds({resolver:os(Rs),defaultValues:{displayName:(s==null?void 0:s.displayName)||"",bio:(s==null?void 0:s.bio)||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((t=s==null?void 0:s.notificationSettings)==null?void 0:t.dailyReminder)||!1,weeklyInsights:((p=s==null?void 0:s.notificationSettings)==null?void 0:p.weeklyInsights)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"}});T.useEffect(()=>{var d,g;s&&i.reset({displayName:s.displayName||"",bio:s.bio||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((d=s==null?void 0:s.notificationSettings)==null?void 0:d.dailyReminder)||!1,weeklyInsights:((g=s==null?void 0:s.notificationSettings)==null?void 0:g.weeklyInsights)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"})},[s,i]);const m=L({mutationFn:async d=>(await F("POST","/api/profile/update",d)).json(),onSuccess:d=>{G.setQueryData(["/api/user"],g=>({...g,...d})),a({title:"Profile Updated",description:"Your profile information has been updated successfully"}),n(!1)},onError:d=>{a({title:"Failed to update profile",description:d.message,variant:"destructive"})}}),j=d=>{m.mutate(d)},l=()=>{var d,g;s&&(i.reset({displayName:s.displayName||"",bio:s.bio||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((d=s==null?void 0:s.notificationSettings)==null?void 0:d.dailyReminder)||!1,weeklyInsights:((g=s==null?void 0:s.notificationSettings)==null?void 0:g.weeklyInsights)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"}),a({title:"Changes Reverted",description:"Your changes have been discarded and the original values restored"}))},o=(s==null?void 0:s.username)||"",u=s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown",c=m.isPending;return e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx(k,{children:"Account Information"})]}),e.jsx(x,{variant:r?"outline":"default",size:"sm",onClick:()=>n(!r),disabled:c,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(C,{children:r?"Edit your personal details and preferences":"Your personal details and account preferences"})]}),e.jsx(N,{children:e.jsx(xs,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(j),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),!r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:o}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"ml-2 cursor-help",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Locked"]})}),e.jsx(ne,{children:e.jsx("p",{className:"text-xs",children:"Username cannot be changed for security reasons"})})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Member Since"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:u}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"ml-2 cursor-help",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Locked"]})}),e.jsx(ne,{children:e.jsx("p",{className:"text-xs",children:"Account creation date is automatically recorded"})})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Display Name"}),e.jsx("p",{className:"text-lg font-medium",children:i.getValues().displayName||o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Bio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:i.getValues().bio||"No bio provided."})]})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{className:"flex items-center gap-1",children:["Username",e.jsx(le,{className:"h-3 w-3 ml-1 text-muted-foreground"})]}),e.jsx(E,{value:o,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed for security reasons"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{className:"flex items-center gap-1",children:["Member Since",e.jsx(le,{className:"h-3 w-3 ml-1 text-muted-foreground"})]}),e.jsx(E,{value:u,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Account creation date is automatically recorded"})]})]}),e.jsx(q,{control:i.control,name:"displayName",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Display Name"}),e.jsx(z,{children:e.jsx(E,{placeholder:"Enter a display name",...d})}),e.jsx(O,{children:"This is how your name will appear across the platform"}),e.jsx(Q,{})]})}),e.jsx(q,{control:i.control,name:"bio",render:({field:d})=>{var g;return e.jsxs(B,{children:[e.jsx(V,{children:"Bio"}),e.jsx(z,{children:e.jsx(us,{placeholder:"Tell us a little about yourself",className:"min-h-[100px]",...d})}),e.jsxs(O,{className:"flex justify-between",children:[e.jsx("span",{children:"A brief description about yourself"}),e.jsxs("span",{children:[((g=d.value)==null?void 0:g.length)||0,"/250"]})]}),e.jsx(Q,{})]})}})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Preferences"}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(q,{control:i.control,name:"theme",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Theme"}),e.jsxs(we,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(z,{children:e.jsx(ke,{children:e.jsx(Ce,{placeholder:"Select a theme"})})}),e.jsxs(Se,{children:[e.jsx(P,{value:"light",children:"Light"}),e.jsx(P,{value:"dark",children:"Dark"}),e.jsx(P,{value:"system",children:"System"})]})]}),e.jsx(O,{children:"Choose your preferred visual theme"}),e.jsx(Q,{})]})}),e.jsx(q,{control:i.control,name:"language",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Language"}),e.jsxs(we,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(z,{children:e.jsx(ke,{children:e.jsx(Ce,{placeholder:"Select a language"})})}),e.jsxs(Se,{children:[e.jsx(P,{value:"en",children:"English"}),e.jsx(P,{value:"es",children:"Spanish (Español)"}),e.jsx(P,{value:"fr",children:"French (Français)"}),e.jsx(P,{value:"de",children:"German (Deutsch)"}),e.jsx(P,{value:"zh",children:"Chinese (中文)"}),e.jsx(P,{value:"ja",children:"Japanese (日本語)"}),e.jsx(P,{value:"ko",children:"Korean (한국어)"}),e.jsx(P,{value:"ru",children:"Russian (Русский)"})]})]}),e.jsx(O,{children:"Choose your preferred language"}),e.jsx(Q,{})]})})]}),e.jsx(q,{control:i.control,name:"dailyCheckInTime",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Daily Check-In Time"}),e.jsx(z,{children:e.jsx(E,{type:"time",...d})}),e.jsx(O,{children:"Set your preferred daily mood check-in time"}),e.jsx(Q,{})]})}),e.jsx(q,{control:i.control,name:"moodGoal",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Mood Goal"}),e.jsxs(we,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(z,{children:e.jsx(ke,{children:e.jsx(Ce,{placeholder:"Select a mood goal"})})}),e.jsxs(Se,{children:[e.jsx(P,{value:"improve_mindfulness",children:"Improve Mindfulness"}),e.jsx(P,{value:"track_stress",children:"Track Stress Triggers"}),e.jsx(P,{value:"better_sleep",children:"Better Sleep"}),e.jsx(P,{value:"reduce_anxiety",children:"Reduce Anxiety"}),e.jsx(P,{value:"increase_happiness",children:"Increase Happiness"})]})]}),e.jsx(O,{children:"Set a primary goal for your mood tracking"}),e.jsx(Q,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(V,{children:"Notification Preferences"}),e.jsx(q,{control:i.control,name:"dailyReminder",render:({field:d})=>e.jsxs(B,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(V,{className:"text-base",children:"Daily Mood Reminders"}),e.jsx(O,{children:"Receive daily notifications to track your mood"})]}),e.jsx(z,{children:e.jsx(Fe,{checked:d.value,onCheckedChange:d.onChange})})]})}),e.jsx(q,{control:i.control,name:"weeklyInsights",render:({field:d})=>e.jsxs(B,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(V,{className:"text-base",children:"Weekly Insights"}),e.jsx(O,{children:"Receive weekly reports on your emotional trends"})]}),e.jsx(z,{children:e.jsx(Fe,{checked:d.value,onCheckedChange:d.onChange})})]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Theme"}),e.jsx("p",{className:"text-lg font-medium capitalize",children:i.getValues().theme||"System"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Language"}),e.jsx("p",{className:"text-lg font-medium",children:Us(i.getValues().language||"en")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Daily Check-In Time"}),e.jsx("p",{className:"text-lg font-medium",children:Ks(i.getValues().dailyCheckInTime||"08:00")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Mood Goal"}),e.jsx("p",{className:"text-lg font-medium capitalize",children:i.getValues().moodGoal?i.getValues().moodGoal.replace(/_/g," "):"Not Set"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Daily Mood Reminders"}),e.jsx(v,{variant:i.getValues().dailyReminder?"default":"outline",children:i.getValues().dailyReminder?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Weekly Insights"}),e.jsx(v,{variant:i.getValues().weeklyInsights?"default":"outline",children:i.getValues().weeklyInsights?"Enabled":"Disabled"})]})]})]})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Social Integration"}),r?e.jsx("div",{className:"space-y-6",children:e.jsx(q,{control:i.control,name:"publicProfileLink",render:({field:d})=>e.jsxs(B,{children:[e.jsx(V,{children:"Custom Profile URL"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-muted px-3 py-2 rounded-l-md border border-r-0 border-input text-muted-foreground",children:"moodsync.com/@"}),e.jsx(z,{children:e.jsx(E,{className:"rounded-l-none",placeholder:"username",...d})})]}),e.jsx(O,{children:"Create a custom URL for your public profile (letters, numbers, underscores only)"}),e.jsx(Q,{})]})})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Public Profile Link"}),e.jsx("p",{className:"text-lg font-medium",children:i.getValues().publicProfileLink?`moodsync.com/@${i.getValues().publicProfileLink}`:"Not set"})]})})]}),r&&e.jsxs("div",{className:"mt-6 p-3 border rounded-md bg-slate-50 dark:bg-slate-900 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Security Assurance"})]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Your security is our priority. Locked fields protect your account from unauthorized changes. Your username and account creation date cannot be modified for security reasons."})]}),r&&e.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[e.jsxs(x,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:c,className:"mr-auto",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(x,{type:"button",variant:"secondary",onClick:l,disabled:c||!i.formState.isDirty,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Revert Changes"]}),e.jsx(x,{type:"submit",disabled:c||!i.formState.isDirty,children:c?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})})]})}function Us(s){return{en:"English",es:"Spanish (Español)",fr:"French (Français)",de:"German (Deutsch)",zh:"Chinese (中文)",ja:"Japanese (日本語)",ko:"Korean (한국어)",ru:"Russian (Русский)"}[s]||s}function Ks(s){try{const[a,r]=s.split(":"),n=new Date;return n.setHours(parseInt(a,10)),n.setMinutes(parseInt(r,10)),n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return s}}function qs(){const[s,a]=T.useState(null),[r,n]=T.useState(!1),[i,m]=T.useState(!1),[j,l]=T.useState(""),[o,u]=T.useState(1),{toast:c}=J(),t=hs(),{data:p,isLoading:d}=Y({queryKey:["/api/auth/2fa/status"],queryFn:async()=>(await F("GET","/api/auth/2fa/status")).json()}),g=L({mutationFn:async()=>(await F("POST","/api/auth/2fa/setup")).json(),onSuccess:h=>{a(h),u(2)},onError:h=>{c({title:"Setup Error",description:h.message,variant:"destructive"})}}),f=L({mutationFn:async()=>(await F("POST","/api/auth/2fa/verify",{token:j})).json(),onSuccess:()=>{c({title:"2FA Enabled",description:"Two-factor authentication has been enabled for your account"}),u(3),t.invalidateQueries({queryKey:["/api/auth/2fa/status"]})},onError:h=>{c({title:"Verification Error",description:h.message,variant:"destructive"})}}),K=L({mutationFn:async h=>(await F("POST","/api/auth/2fa/disable",{token:h})).json(),onSuccess:()=>{c({title:"2FA Disabled",description:"Two-factor authentication has been disabled for your account"}),t.invalidateQueries({queryKey:["/api/auth/2fa/status"]})},onError:h=>{c({title:"Error",description:h.message,variant:"destructive"})}}),Z=L({mutationFn:async h=>(await F("POST","/api/auth/2fa/new-backup-codes",{token:h})).json(),onSuccess:h=>{c({title:"New Backup Codes",description:"New backup codes have been generated"}),a(A=>A?{...A,backupCodes:h.backupCodes}:null)},onError:h=>{c({title:"Error",description:h.message,variant:"destructive"})}}),y=L({mutationFn:async h=>(await F("POST","/api/auth/2fa/new-recovery-key",{token:h})).json(),onSuccess:h=>{c({title:"New Recovery Key",description:"A new recovery key has been generated"}),a(A=>A?{...A,recoveryKey:h.recoveryKey}:null)},onError:h=>{c({title:"Error",description:h.message,variant:"destructive"})}}),X=(h,A)=>{navigator.clipboard.writeText(h).then(()=>{c({title:"Copied",description:`${A} copied to clipboard`})}).catch(()=>{c({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})})};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(I,{className:"h-8 w-8 animate-spin text-primary"})}):p!=null&&p.enabled?e.jsx("div",{className:"space-y-6",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-500"}),"Two-Factor Authentication"]}),e.jsx(C,{children:"Your account is protected with two-factor authentication"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md bg-green-50 p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Two-factor authentication is enabled for your account"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Backup Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you lose access to your authentication app, you can use these backup codes to sign in. Each code can only be used once."}),e.jsx("div",{className:"rounded-md bg-muted p-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s!=null&&s.backupCodes?s.backupCodes.map((h,A)=>e.jsx("div",{className:"font-mono text-xs",children:h},A)):e.jsx("p",{className:"text-sm col-span-2",children:"Backup codes are not available. Generate new ones."})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{type:"text",placeholder:"Enter verification code",value:j,onChange:h=>l(h.target.value),maxLength:6,className:"w-36"}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>Z.mutate(j),disabled:Z.isPending||j.length!==6,children:[Z.isPending?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"Generate New Codes"]}),s!=null&&s.backupCodes?e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(s.backupCodes.join(`
`),"Backup codes"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Copy"]}):null]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Recovery Key"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your recovery key is a secure way to regain access to your account if you lose your device and backup codes. Keep it in a safe place."}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{type:i?"text":"password",value:(s==null?void 0:s.recoveryKey)||"••••••••••••••••••••••••••",readOnly:!0,className:"font-mono pr-10"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>m(!i),children:i?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{type:"text",placeholder:"Enter verification code",value:j,onChange:h=>l(h.target.value),maxLength:6,className:"w-36"}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>y.mutate(j),disabled:y.isPending||j.length!==6,children:[y.isPending?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"Generate New Key"]}),s!=null&&s.recoveryKey?e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(s.recoveryKey,"Recovery key"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Copy"]}):null]})]})]}),e.jsxs(Re,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Disable two-factor authentication"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{type:"text",placeholder:"Verification code",value:j,onChange:h=>l(h.target.value),maxLength:6,className:"w-36"}),e.jsxs(x,{variant:"destructive",onClick:()=>K.mutate(j),disabled:K.isPending||j.length!==6,children:[K.isPending?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"Disable 2FA"]})]})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),"Password Management"]}),e.jsx(C,{children:"Manage your password and recovery options"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"You can request a password reset link to be sent to your email address. This is useful if you've forgotten your password or want to change it for security reasons."}),e.jsxs(x,{onClick:()=>{c({title:"Password Reset Link Sent",description:"If an account exists with your email, you will receive a password reset link shortly."}),F("POST","/api/auth/forgot-password",{})},variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),e.jsx("div",{className:"rounded-md bg-muted p-4 mt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"For security reasons, we don't confirm whether an account exists. If you don't receive an email, please check your spam folder or contact support."})})]})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),e.jsx(C,{children:"Add an extra layer of security to your account by requiring a verification code"})]}),e.jsxs(N,{children:[o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"Two-factor authentication adds an extra layer of security to your account. In addition to your password, you'll need to enter a code from your authenticator app when signing in."}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(ae,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Important"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"You'll need an authenticator app like Google Authenticator, Authy, or Microsoft Authenticator"}),e.jsx("li",{children:"We'll provide backup codes you should save in a secure place"}),e.jsx("li",{children:"You'll also receive a recovery key - store it separately from your backup codes"})]})]})]})}),e.jsxs(x,{onClick:()=>g.mutate(),disabled:g.isPending,className:"w-full sm:w-auto",children:[g.isPending?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"Set Up Two-Factor Authentication"]})]}),o===2&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"1. Scan QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.qrCodeUrl,alt:"QR Code",className:"border rounded-md p-2 bg-white",style:{width:"200px",height:"200px"}})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you can't scan the QR code, enter this code manually:"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{type:r?"text":"password",value:s.secret,readOnly:!0,className:"font-mono pr-10"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>n(!r),children:r?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(s.secret,"Secret key"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Copy Secret Key"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"2. Backup Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save these backup codes in a secure place. If you lose your device, you can use these to sign in. Each code can only be used once."}),e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.backupCodes.map((h,A)=>e.jsx("div",{className:"font-mono text-xs",children:h},A))})}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(s.backupCodes.join(`
`),"Backup codes"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Copy Backup Codes"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"3. Recovery Key"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save this recovery key in a secure place different from your backup codes. You'll need it if you lose access to your device and backup codes."}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{type:i?"text":"password",value:s.recoveryKey,readOnly:!0,className:"font-mono pr-10"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>m(!i),children:i?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>X(s.recoveryKey,"Recovery key"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Copy Recovery Key"]}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(ae,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Important:"})," Store your recovery key in a secure location separate from your backup codes. Anyone with this key can bypass 2FA on your account."]})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"font-medium",children:"4. Verify Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the verification code from your authenticator app to complete setup"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{type:"text",placeholder:"6-digit code",value:j,onChange:h=>l(h.target.value),maxLength:6,className:"w-36"}),e.jsxs(x,{onClick:()=>f.mutate(),disabled:f.isPending||j.length!==6,children:[f.isPending?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"Verify and Enable"]})]})]})]}),o===3&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 border border-green-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(Ve,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Two-factor authentication enabled"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your account is now protected with two-factor authentication. When signing in, you'll need to provide your password and a verification code from your authenticator app."})]})]})})]})]})]})}function Bs(){const{user:s,logoutMutation:a}=_(),{toast:r}=J();T.useState(!1);const n=L({mutationFn:async()=>(await F("POST","/api/account/delete")).json(),onSuccess:()=>{r({title:"Account Deletion Requested",description:"Your account deletion request has been submitted. You will receive an email confirmation. Your account will be fully deleted in 3-7 business days."}),a.mutate()},onError:o=>{r({title:"Error",description:o.message||"Failed to request account deletion",variant:"destructive"})}}),i=L({mutationFn:async()=>(await F("POST","/api/account/delete-data")).json(),onSuccess:()=>{r({title:"Data Deletion Requested",description:"Your data deletion request has been submitted. You will receive an email confirmation. Your data will be fully removed in 3-7 business days."})},onError:o=>{r({title:"Error",description:o.message||"Failed to request data deletion",variant:"destructive"})}}),m=s==null?void 0:s.isPremium,j=L({mutationFn:async()=>(await F("POST","/api/subscription/cancel")).json(),onSuccess:o=>{r({title:"Subscription Cancelled",description:`Your subscription has been cancelled. You will continue to have premium access until ${new Date(o.expiresAt).toLocaleDateString()}.`})},onError:o=>{r({title:"Error",description:o.message||"Failed to cancel subscription",variant:"destructive"})}}),l=L({mutationFn:async()=>(await F("POST","/api/subscription/renew")).json(),onSuccess:o=>{r({title:"Subscription Renewed",description:"Your subscription has been renewed successfully."})},onError:o=>{r({title:"Error",description:o.message||"Failed to renew subscription",variant:"destructive"})}});return e.jsxs("div",{className:"space-y-6",children:[m&&e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5 text-primary"}),"Subscription Management"]}),e.jsx(C,{children:"Manage your premium subscription settings"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Current Plan"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground mr-2",children:(s==null?void 0:s.premiumPlanType)||"Premium"}),e.jsx(v,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Active"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Renews On"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s!=null&&s.premiumExpiryDate?new Date(s.premiumExpiryDate).toLocaleDateString():"Not available"})]})]}),e.jsx(R,{}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(ae,{className:"h-5 w-5 text-amber-500 shrink-0 mr-2"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Important Information"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Cancelling your subscription will not provide a refund unless you are within the 14-day money-back guarantee period"}),e.jsx("li",{children:"You will continue to have premium access until your current period ends"}),e.jsx("li",{children:"After cancellation, your account will revert to the free plan"}),e.jsx("li",{children:"If you're within 14 days of your initial purchase, contact support for a refund"})]})]})]})})]}),e.jsxs(Re,{className:"flex justify-between",children:[e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/10",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Cancel Subscription"]})}),e.jsxs(oe,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Cancel Your Subscription?"}),e.jsxs(ue,{children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to cancel your subscription? You will continue to have premium access until your current period ends on ",e.jsx("strong",{children:s!=null&&s.premiumExpiryDate?new Date(s.premiumExpiryDate).toLocaleDateString():"N/A"}),"."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Refund Policy:"})," If you're within the 14-day money-back guarantee period of your initial purchase, please contact our support team for a full refund. Otherwise, no refunds will be issued for the current billing period."]})]})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Keep My Subscription"}),e.jsx(pe,{onClick:()=>j.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, Cancel Subscription"})]})]})]}),(s==null?void 0:s.subscriptionCancelled)&&e.jsx(x,{variant:"default",onClick:()=>l.mutate(),disabled:l.isPending,children:l.isPending?"Processing...":"Renew Subscription"})]})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-5 w-5 text-red-500"}),"Account & Data Management"]}),e.jsx(C,{children:"Options for managing your personal data and account"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"Data Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Request deletion of your personal data while keeping your account active. This will remove your emotional data, posts, and personal information."}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"border-amber-200 bg-amber-50 text-amber-900 hover:bg-amber-100",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Request Data Deletion"]})}),e.jsxs(oe,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Delete Your Personal Data?"}),e.jsxs(ue,{children:[e.jsx("p",{className:"mb-2",children:"This will permanently remove your personal data from our systems, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-4",children:[e.jsx("li",{children:"Emotional tracking history"}),e.jsx("li",{children:"User-generated content"}),e.jsx("li",{children:"Personal information"})]}),e.jsx("p",{className:"mb-2",children:"Your account will remain active but with minimal information. This process takes 3-7 business days to complete and cannot be undone."}),e.jsx("p",{children:"You will receive an email confirmation once your data has been deleted."})]})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Cancel"}),e.jsx(pe,{onClick:()=>i.mutate(),className:"bg-amber-600 text-white hover:bg-amber-700",children:"Delete My Data"})]})]})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium mb-2 text-red-600",children:"Account Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Permanently delete your entire account including all data, posts, and subscription information. This action cannot be undone."}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(x,{variant:"destructive",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Delete My Account"]})}),e.jsxs(oe,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Delete Your Account Permanently?"}),e.jsxs(ue,{children:[e.jsx("p",{className:"mb-2",children:"This will permanently delete your account and all associated data:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-4",children:[e.jsx("li",{children:"Your profile and all personal information"}),e.jsx("li",{children:"All emotional tracking data"}),e.jsx("li",{children:"All posts, messages, and content"}),e.jsx("li",{children:"Your subscription (subject to our 14-day money-back guarantee policy)"})]}),e.jsxs("p",{className:"mb-2",children:["This process takes 3-7 business days to complete and ",e.jsx("strong",{children:"cannot be undone"}),"."]}),e.jsx("p",{children:"You will receive an email confirmation when the process begins and when it completes."})]})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Cancel"}),e.jsx(pe,{onClick:()=>n.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Permanently Delete Account"})]})]})]})]})]})]})]})}const Qe=s=>{switch(s){case"easy":return"Easy";case"moderate":return"Moderate";case"hard":return"Hard";case"extreme":return"Extreme";default:return"Unknown"}},He=s=>{switch(s){case"easy":return"bg-green-50 text-green-700 border-green-300";case"moderate":return"bg-blue-50 text-blue-700 border-blue-300";case"hard":return"bg-purple-50 text-purple-700 border-purple-300";case"extreme":return"bg-red-50 text-red-800 border-red-300";default:return"bg-gray-50 text-gray-700 border-gray-300"}},We=s=>{switch(s){case"easy":return e.jsx(fe,{className:"h-12 w-12 text-green-500"});case"moderate":return e.jsx(ts,{className:"h-12 w-12 text-blue-500"});case"hard":return e.jsx(W,{className:"h-12 w-12 text-purple-500"});case"extreme":return e.jsx(as,{className:"h-12 w-12 text-red-500"});default:return e.jsx(Ms,{className:"h-12 w-12 text-gray-500"})}};function zs(){const{user:s}=_(),[a,r]=T.useState("all"),{data:n,isLoading:i}=Y({queryKey:["/api/badges"],queryFn:async()=>{const t=await fetch("/api/badges");if(!t.ok)throw new Error("Failed to fetch badges");return t.json()}}),{data:m,isLoading:j}=Y({queryKey:["/api/user/badges"],queryFn:async()=>{const t=await fetch("/api/user/badges");if(!t.ok)throw new Error("Failed to fetch user badges");return t.json()},enabled:!!s}),l=i||j,o=t=>t?a==="all"?t:t.filter(p=>p.difficulty===a):[],u=t=>(m==null?void 0:m.some(p=>p.id===t))||!1,c=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Your Badges"]}),e.jsx(C,{children:"Badges earned through completing challenges of varying difficulty"})]}),e.jsx(N,{children:l?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin w-10 h-10 border-4 border-primary border-t-transparent rounded-full"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(ve,{defaultValue:"earned",className:"w-full",children:[e.jsxs(be,{className:"grid w-full grid-cols-2",children:[e.jsxs(S,{value:"earned",children:["Earned (",(m==null?void 0:m.length)||0,")"]}),e.jsxs(S,{value:"available",children:["Available (",((n==null?void 0:n.length)||0)-((m==null?void 0:m.length)||0),")"]})]}),e.jsx(D,{value:"earned",className:"pt-4",children:m&&m.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(x,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),children:"All"}),e.jsx(x,{variant:a==="easy"?"default":"outline",size:"sm",onClick:()=>r("easy"),className:"text-green-700",children:"Easy"}),e.jsx(x,{variant:a==="moderate"?"default":"outline",size:"sm",onClick:()=>r("moderate"),className:"text-blue-700",children:"Moderate"}),e.jsx(x,{variant:a==="hard"?"default":"outline",size:"sm",onClick:()=>r("hard"),className:"text-purple-700",children:"Hard"}),e.jsx(x,{variant:a==="extreme"?"default":"outline",size:"sm",onClick:()=>r("extreme"),className:"text-red-700",children:"Extreme"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o(m).map(t=>e.jsxs("div",{className:"flex p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex-shrink-0 mr-4 flex items-center justify-center",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-16 h-16 object-contain"}):We(t.difficulty)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(v,{variant:"outline",className:He(t.difficulty),children:Qe(t.difficulty)}),t.earnedAt&&e.jsxs(v,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:["Earned on ",c(t.earnedAt)]})]})]})]},t.id))}),o(m).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500",children:"No badges found for the selected filter."})]}):e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No Badges Yet"}),e.jsx("p",{children:"Complete challenges to earn badges and showcase your achievements!"})]})}),e.jsxs(D,{value:"available",className:"pt-4",children:[n&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.filter(t=>!u(t.id)).map(t=>e.jsxs("div",{className:"flex p-4 border rounded-lg bg-gray-50/50",children:[e.jsx("div",{className:"flex-shrink-0 mr-4 flex items-center justify-center opacity-70",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-16 h-16 object-contain grayscale"}):We(t.difficulty)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsx(v,{variant:"outline",className:He(t.difficulty),children:Qe(t.difficulty)})]})]},t.id))}),n&&n.filter(t=>!u(t.id)).length===0&&e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"All Badges Collected!"}),e.jsx("p",{children:"Congratulations! You've earned all available badges."})]})]})]})})})]})}function Je(s,a){if(a===0)return 100;const r=s/a*100;return Math.min(Math.max(r,0),100)}function Ae(s){switch(s){case"easy":return"Easy";case"moderate":return"Moderate";case"hard":return"Hard";case"extreme":return"Extreme";default:return s}}function Ze(s){switch(s){case"easy":return"bg-green-100 text-green-800 border-green-300";case"moderate":return"bg-blue-100 text-blue-800 border-blue-300";case"hard":return"bg-purple-100 text-purple-800 border-purple-300";case"extreme":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}}function Os(s){switch(s){case"easy":return e.jsx(fe,{className:"h-5 w-5 text-green-600"});case"moderate":return e.jsx(ts,{className:"h-5 w-5 text-blue-600"});case"hard":return e.jsx(W,{className:"h-5 w-5 text-purple-600"});case"extreme":return e.jsx(as,{className:"h-5 w-5 text-red-600"});default:return e.jsx($,{className:"h-5 w-5 text-gray-600"})}}function Gs(){_();const{toast:s}=J(),[a,r]=T.useState("all"),{data:n,isLoading:i}=Y({queryKey:["/api/gamification/challenges"],queryFn:async()=>{const u=await fetch("/api/gamification/challenges");if(!u.ok)throw new Error("Failed to fetch challenges");return u.json()}}),m=L({mutationFn:async u=>{const c=await fetch(`/api/challenges/complete/${u}`,{method:"POST"});if(!c.ok){const t=await c.json();throw new Error(t.error||"Failed to complete challenge")}return c.json()},onSuccess:u=>{s({title:"Challenge Completed!",description:`You earned ${u.tokensAwarded} tokens`,variant:"default"}),u.badgeAwarded&&s({title:"New Badge Earned!",description:`You've earned the "${u.badgeAwarded.name}" badge`,variant:"default"}),G.invalidateQueries({queryKey:["/api/gamification/challenges"]}),G.invalidateQueries({queryKey:["/api/tokens"]}),G.invalidateQueries({queryKey:["/api/user/badges"]})},onError:u=>{s({title:"Failed to complete challenge",description:u.message,variant:"destructive"})}}),j=()=>{const u={easy:[],moderate:[],hard:[],extreme:[]};return n&&n.forEach(c=>{u[c.difficulty].push(c)}),u},l=u=>{m.mutate(u)},o=j();return e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Challenges"]}),e.jsx(C,{children:"Complete challenges to earn tokens and badges"})]}),e.jsx(N,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs(ve,{defaultValue:"all",className:"w-full",children:[e.jsxs(be,{className:"grid grid-cols-5 mb-4",children:[e.jsx(S,{value:"all",onClick:()=>r("all"),children:"All"}),e.jsx(S,{value:"easy",onClick:()=>r("easy"),className:"text-green-700",children:"Easy"}),e.jsx(S,{value:"moderate",onClick:()=>r("moderate"),className:"text-blue-700",children:"Medium"}),e.jsx(S,{value:"hard",onClick:()=>r("hard"),className:"text-purple-700",children:"Hard"}),e.jsx(S,{value:"extreme",onClick:()=>r("extreme"),className:"text-red-700",children:"Extreme"})]}),e.jsx(D,{value:"all",className:"space-y-6",children:Object.entries(o).map(([u,c])=>c.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[Os(u),Ae(u)," Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(t=>e.jsxs("div",{className:`border rounded-lg p-4 ${t.completed?"bg-green-50 border-green-200":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx(v,{variant:"outline",className:Ze(t.difficulty),children:Ae(t.difficulty)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",t.currentValue,"/",t.targetValue]}),e.jsxs("span",{className:"font-medium text-primary",children:[t.rewardTokens," tokens"]})]}),e.jsx(ye,{value:Je(t.currentValue,t.targetValue)}),t.completed?e.jsxs(x,{disabled:!0,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Completed"]}):e.jsx(x,{disabled:m.isPending||t.currentValue<t.targetValue,onClick:()=>l(t.id),className:"w-full",children:m.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsx(e.Fragment,{children:t.currentValue>=t.targetValue?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Claim Reward"]}):e.jsx(e.Fragment,{children:"In Progress"})})})]})]},t.id))})]},u))}),["easy","moderate","hard","extreme"].map(u=>e.jsx(D,{value:u,className:"space-y-4",children:o[u].length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:o[u].map(c=>e.jsxs("div",{className:`border rounded-lg p-4 ${c.completed?"bg-green-50 border-green-200":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium",children:c.title}),e.jsx(v,{variant:"outline",className:Ze(c.difficulty),children:Ae(c.difficulty)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:c.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",c.currentValue,"/",c.targetValue]}),e.jsxs("span",{className:"font-medium text-primary",children:[c.rewardTokens," tokens"]})]}),e.jsx(ye,{value:Je(c.currentValue,c.targetValue)}),c.completed?e.jsxs(x,{disabled:!0,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Completed"]}):e.jsx(x,{disabled:m.isPending||c.currentValue<c.targetValue,onClick:()=>l(c.id),className:"w-full",children:m.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsx(e.Fragment,{children:c.currentValue>=c.targetValue?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Claim Reward"]}):e.jsx(e.Fragment,{children:"In Progress"})})})]})]},c.id))}):e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"font-medium",children:"No challenges available for this difficulty"})]})},u))]})})]})}function $s(){_();const[s,a]=T.useState(new Date),{data:r,isLoading:n}=Y({queryKey:["/api/gamification/profile"],queryFn:async()=>{const l=await fetch("/api/gamification/profile");if(!l.ok)throw new Error("Failed to fetch profile");return l.json()}}),m=(()=>{if(!r||!r.lastCheckIn)return[];const l=[],o=new Date,u=new Date(r.lastCheckIn);l.push(new Date(u)),new Date().setDate(o.getDate()-60);const t=Math.min(r.currentStreak/10,.9),p=Math.min(r.currentStreak,60);for(let d=1;d<=p;d++){const g=new Date;g.setDate(o.getDate()-d),Math.random()<t&&l.push(new Date(g))}return l})(),j=()=>{if(!r)return null;let l="",o="";return r.currentStreak>=30?(l="Ultimate Streak!",o="bg-purple-100 text-purple-800 border-purple-300"):r.currentStreak>=14?(l="Blazing Streak!",o="bg-red-100 text-red-800 border-red-300"):r.currentStreak>=7?(l="Strong Streak!",o="bg-amber-100 text-amber-800 border-amber-300"):r.currentStreak>=3?(l="Building Streak!",o="bg-green-100 text-green-800 border-green-300"):(l="Getting Started",o="bg-blue-100 text-blue-800 border-blue-300"),e.jsx(v,{variant:"outline",className:o,children:l})};return e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Streaks & Check-ins"]}),e.jsx(C,{children:"Track your daily check-in streaks and consistency"})]}),e.jsx(N,{children:n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8",children:[e.jsxs("div",{className:"md:flex-1 bg-muted rounded-lg p-4 flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Current Streak"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:r.currentStreak}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),e.jsx($,{className:"h-10 w-10 text-primary opacity-80"})]}),e.jsxs("div",{className:"md:flex-1 bg-muted rounded-lg p-4 flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Longest Streak"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:r.longestStreak}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),e.jsx(W,{className:"h-10 w-10 text-primary opacity-80"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last check-in: ",r.lastCheckIn?new Date(r.lastCheckIn).toLocaleDateString():"Never"]})]}),j()]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Check-in Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 rounded-full"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Check-in"})]})]}),e.jsx(As,{mode:"single",selected:s,onSelect:a,className:"rounded-md border",disabled:{after:new Date},showOutsideDays:!1,components:{Day:({day:l,...o})=>e.jsx("div",{className:`relative ${m.some(u=>u.getDate()===l.getDate()&&u.getMonth()===l.getMonth()&&u.getFullYear()===l.getFullYear())?"bg-green-100 text-green-900 font-medium rounded-full":""}`,...o,children:l.getDate()})}}),e.jsxs("div",{className:"mt-4 text-sm text-center text-muted-foreground",children:[e.jsx("p",{children:"Keep your streak going by checking in daily to earn more rewards!"}),e.jsx("p",{className:"mt-1 text-xs",children:"Regular check-ins increase your chances of earning special badges."})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor(r.currentStreak/30*100),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Goal"})]}),e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[r.currentStreak>=7?"✓":r.currentStreak,"/7"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Weekly Streak"})]}),e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.points}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak Points"})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No streak data available."}),e.jsx("p",{className:"text-sm",children:"Start checking in daily to build your streak!"})]})})]})}function _s(){const{user:s}=_(),{data:a,isLoading:r}=Y({queryKey:["/api/user/profile-analytics"],enabled:!!(s!=null&&s.isPremium)});return s!=null&&s.isPremium?r?e.jsxs(b,{className:"col-span-3",children:[e.jsxs(w,{children:[e.jsx(k,{children:"Profile Analytics"}),e.jsx(C,{children:"Loading your analytics data..."})]}),e.jsx(N,{className:"h-[300px] flex items-center justify-center",children:e.jsx(I,{className:"h-8 w-8 animate-spin text-primary"})})]}):e.jsxs(ve,{defaultValue:"overview",className:"col-span-3",children:[e.jsx(w,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{children:"Profile Analytics"}),e.jsx(C,{children:"View statistics about your content and followers"})]}),e.jsxs(be,{children:[e.jsx(S,{value:"overview",children:"Overview"}),e.jsx(S,{value:"videos",children:"Videos"}),e.jsx(S,{value:"engagement",children:"Engagement"})]})]})}),e.jsxs(N,{className:"pt-6",children:[e.jsxs(D,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(M,{icon:e.jsx(qe,{className:"h-5 w-5 text-blue-500"}),title:"Followers",value:(a==null?void 0:a.followerCount)||0,footer:"Total followers"}),e.jsx(M,{icon:e.jsx(se,{className:"h-5 w-5 text-purple-500"}),title:"Views",value:(a==null?void 0:a.totalViews)||0,footer:"Total video views"}),e.jsx(M,{icon:e.jsx($e,{className:"h-5 w-5 text-green-500"}),title:"Likes",value:(a==null?void 0:a.totalLikes)||0,footer:"Total likes received"}),e.jsx(M,{icon:e.jsx(Be,{className:"h-5 w-5 text-orange-500"}),title:"Shares",value:(a==null?void 0:a.totalShares)||0,footer:"Total shares"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Engagement Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{value:Xe(a)*100,max:100,className:"h-2"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(Xe(a)*100).toFixed(1),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement rate is calculated as (likes + comments + shares) / views"})]})]}),e.jsxs(D,{value:"videos",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(M,{icon:e.jsx(ge,{className:"h-5 w-5 text-indigo-500"}),title:"Videos",value:(a==null?void 0:a.totalVideos)||0,footer:"Total videos posted"}),e.jsx(M,{icon:e.jsx(se,{className:"h-5 w-5 text-purple-500"}),title:"Avg. Views",value:Qs(a)||0,footer:"Average views per video"}),e.jsx(M,{icon:e.jsx($e,{className:"h-5 w-5 text-green-500"}),title:"Avg. Likes",value:Hs(a)||0,footer:"Average likes per video"}),e.jsx(M,{icon:e.jsx(Es,{className:"h-5 w-5 text-rose-500"}),title:"Downloads",value:(a==null?void 0:a.totalDownloads)||0,footer:"Total downloads"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Most Popular Categories"}),a!=null&&a.categoryStats&&Object.entries(a.categoryStats).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(a.categoryStats).sort((n,i)=>i[1]-n[1]).slice(0,3).map(([n,i])=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm capitalize",children:Ws(n)}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i," videos"]})]}),e.jsx(ye,{value:i,max:a.totalVideos,className:"h-1.5"})]},n))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No category data available"})]})]}),e.jsxs(D,{value:"engagement",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(M,{icon:e.jsx(ps,{className:"h-5 w-5 text-amber-500"}),title:"Comments",value:(a==null?void 0:a.totalComments)||0,footer:"Total comments"}),e.jsx(M,{icon:e.jsx(Be,{className:"h-5 w-5 text-orange-500"}),title:"Shares",value:(a==null?void 0:a.totalShares)||0,footer:"Total shares"}),e.jsx(M,{icon:e.jsx(Fs,{className:"h-5 w-5 text-blue-500"}),title:"Saves",value:(a==null?void 0:a.totalSaves)||0,footer:"Total saves"}),e.jsx(M,{icon:e.jsx(qe,{className:"h-5 w-5 text-indigo-500"}),title:"Video Followers",value:(a==null?void 0:a.totalVideoFollows)||0,footer:"Total video followers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Interaction Breakdown"}),e.jsxs("div",{className:"h-[180px] flex items-end gap-2",children:[H("Likes",a==null?void 0:a.totalLikes,"bg-green-500",a),H("Comments",a==null?void 0:a.totalComments,"bg-amber-500",a),H("Shares",a==null?void 0:a.totalShares,"bg-orange-500",a),H("Saves",a==null?void 0:a.totalSaves,"bg-blue-500",a),H("Follows",a==null?void 0:a.totalVideoFollows,"bg-indigo-500",a),H("Downloads",a==null?void 0:a.totalDownloads,"bg-rose-500",a)]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Likes"}),e.jsx("span",{children:"Comments"}),e.jsx("span",{children:"Shares"}),e.jsx("span",{children:"Saves"}),e.jsx("span",{children:"Follows"}),e.jsx("span",{children:"Downloads"})]})]})]})]})]}):e.jsxs(b,{className:"col-span-3",children:[e.jsxs(w,{children:[e.jsx(k,{children:"Premium Analytics"}),e.jsx(C,{children:"Upgrade to premium to access detailed analytics about your profile and content."})]}),e.jsx(N,{className:"h-[300px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-transparent bg-clip-text text-4xl font-bold mb-4",children:"Premium Feature"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"View detailed statistics about your content and audience"})]})})]})}function M({icon:s,title:a,value:r,footer:n}){return e.jsx(b,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s,e.jsx("span",{className:"text-sm font-medium",children:a})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:is(r)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})})}function Xe(s){if(!s||!s.totalViews||s.totalViews===0)return 0;const a=(s.totalLikes||0)+(s.totalComments||0)+(s.totalShares||0);return Math.min(a/s.totalViews,1)}function Qs(s){return!s||!s.totalVideos||s.totalVideos===0?0:Math.round(s.totalViews/s.totalVideos)}function Hs(s){return!s||!s.totalVideos||s.totalVideos===0?0:Math.round(s.totalLikes/s.totalVideos)}function is(s){return s==null?0:s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()}function Ws(s){return s?s.replace(/_/g," "):""}function H(s,a,r,n){if(!n)return null;const i=Math.max(n.totalLikes||0,n.totalComments||0,n.totalShares||0,n.totalSaves||0,n.totalVideoFollows||0,n.totalDownloads||0),m=i>0?a/i*100:0,j=Math.max(m,5);return e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end",children:[e.jsx("div",{className:"relative w-full flex justify-center mb-1",children:e.jsx("span",{className:"absolute -top-6 text-xs font-medium",children:is(a)})}),e.jsx("div",{className:`w-full ${r} rounded-t`,style:{height:`${j}%`}})]})}function Js(){const{tier:s,status:a,isActive:r,isTrialing:n,isLifetime:i,daysRemaining:m,expiryDate:j,subscriptionDetails:l,cancelSubscriptionMutation:o}=gs(),[u,c]=T.useState(!0),t=(l==null?void 0:l.features.filter(y=>y.available))||[],p=(l==null?void 0:l.features)||[],d=j?_e(j,"MMMM d, yyyy"):"N/A",g=l!=null&&l.startDate?_e(l.startDate,"MMMM d, yyyy"):"N/A",f=()=>i?"purple":n?"yellow":r?"green":"destructive",K=()=>i?"Lifetime":n?"Trial":r?"Active":"Inactive",Z=()=>{o.mutate()};return e.jsxs(b,{className:"mb-6",children:[e.jsx(w,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-xl flex items-center gap-2",children:["Subscription",s!=="free"&&e.jsx(fs,{className:"h-5 w-5 text-amber-500"})]}),e.jsx(C,{children:"View and manage your subscription details"})]}),s!=="free"&&e.jsx(v,{variant:f(),className:"ml-auto",children:K()})]})}),e.jsx(N,{className:"space-y-6",children:s==="free"?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"You are currently on the free plan. Upgrade to unlock premium features."}),e.jsx(x,{className:"w-full sm:w-auto",variant:"default",children:"View Premium Plans"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"PLAN DETAILS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Current Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.charAt(0).toUpperCase()+s.slice(1),n&&" (Trial)"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Price"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l==null?void 0:l.price})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Started On"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g})]}),!i&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:n?"Trial Ends On":"Next Billing Date"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[d,m!==null&&m<=5&&e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(ae,{className:"h-4 w-4 text-amber-500"})}),e.jsx(ne,{children:e.jsxs("p",{children:["Your subscription ",n?"trial":"period"," ends in ",m," days"]})})]})})]})]}),!i&&e.jsx("div",{className:"space-y-1 col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsxs(es,{htmlFor:"auto-renew",className:"flex flex-col space-y-1 cursor-pointer",children:[e.jsx("span",{children:"Auto-renew subscription"}),e.jsx("span",{className:"font-normal text-xs text-muted-foreground",children:u?"Your subscription will automatically renew":"Your subscription will expire at the end of the current period"})]}),e.jsx(Fe,{id:"auto-renew",checked:u,onCheckedChange:c})]})})]})]})}),e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"PAYMENT METHOD"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-md",children:[e.jsx("div",{className:"bg-background p-2 rounded",children:e.jsx(ys,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Visa ending in 4242"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expires 12/25"})]}),e.jsxs(x,{variant:"ghost",size:"sm",className:"ml-auto",children:[e.jsx("span",{className:"sr-only",children:"Edit payment method"}),"Edit"]})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"INCLUDED FEATURES"}),e.jsx("div",{className:"grid gap-2",children:t.length>0?t.map(y=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md transition-colors",children:[e.jsx(Ve,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:y.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]},y.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No premium features available"})})]}),p.filter(y=>!y.available).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("h3",{className:"font-semibold text-sm text-muted-foreground flex items-center gap-1",children:["UPGRADE TO UNLOCK",e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(ss,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(ne,{children:e.jsx("p",{children:"Features available in higher tier plans"})})]})})]}),e.jsxs("div",{className:"grid gap-2",children:[p.filter(y=>!y.available).slice(0,3).map(y=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md text-muted-foreground",children:[e.jsx(Ls,{className:"h-5 w-5 text-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:y.name}),e.jsx("p",{className:"text-xs",children:y.description})]})]},y.id)),p.filter(y=>!y.available).length>3&&e.jsx(x,{variant:"ghost",size:"sm",className:"mt-1 text-xs",asChild:!0,children:e.jsxs("a",{href:"/premium",children:["View ",p.filter(y=>!y.available).length-3," more features ",e.jsx(Vs,{className:"h-3 w-3 ml-1"})]})})]})]})]})]})}),s!=="free"&&!i&&e.jsxs(Re,{className:"border-t px-6 py-4 flex justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:n?"Your subscription will automatically start after the trial ends.":"You can cancel your subscription at any time."}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",children:"Cancel Subscription"})}),e.jsxs(oe,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Cancel your subscription?"}),e.jsx(ue,{children:n?"Your trial will end immediately and you'll lose access to premium features.":`You'll still have access to premium features until ${d}, but won't be charged again.`})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Keep Subscription"}),e.jsx(pe,{onClick:Z,children:o.isPending?"Cancelling...":"Yes, Cancel Subscription"})]})]})]})]})]})}function Ee({status:s,size:a="md",className:r,withTooltip:n=!0,withLabel:i=!0}){const m={sm:"h-5 text-xs",md:"h-6 text-sm",lg:"h-7 text-base"},j={sm:12,md:14,lg:16},l=e.jsxs(v,{variant:s==="verified"?"default":s==="pending"?"outline":"secondary",className:Ns("gap-1 px-2 font-medium",m[a],s==="verified"?"bg-green-600 hover:bg-green-700":"",s==="pending"?"border-yellow-400 text-yellow-600":"",s==="not_verified"?"bg-transparent text-gray-500":"",r),children:[s==="verified"&&e.jsx("img",{src:"/assets/verification/verification-badge.jpg",alt:"Verified Badge",className:"inline h-5 w-5 rounded-full object-cover",style:{height:j[a],width:j[a]}}),s==="pending"&&e.jsx(Ne,{className:"inline",size:j[a]}),s==="not_verified"&&e.jsx(vs,{className:"inline",size:j[a]}),i&&e.jsxs("span",{children:[s==="verified"&&"Verified",s==="pending"&&"Pending",s==="not_verified"&&"Not Verified"]})]});return n?e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:l}),e.jsxs(ne,{side:"top",className:"max-w-xs",children:[s==="verified"&&e.jsx("p",{className:"text-sm",children:"This user has been verified through our identity verification process."}),s==="pending"&&e.jsx("p",{className:"text-sm",children:"Verification is in progress. This typically takes 1-3 business days."}),s==="not_verified"&&e.jsx("p",{className:"text-sm",children:"This user has not been verified yet. Premium users can verify their identity for additional features."})]})]})}):l}function Zs(){const{data:s,isLoading:a}=Y({queryKey:["/api/user/verification/status"],retry:!1,staleTime:3e4}),{data:r}=Y({queryKey:["/api/user/premium/status"]});return r==null||r.isPremium,a?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(I,{className:"h-4 w-4 animate-spin text-primary mr-2"}),e.jsx("span",{className:"text-xs",children:"Loading..."})]}):s&&s.status==="verified"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{status:"verified",size:"sm"}),s.verifiedAt&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["since ",new Date(s.verifiedAt).toLocaleDateString()]})]}):s&&s.status==="pending"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{status:"pending",size:"sm"}),e.jsx("span",{className:"ml-2 text-xs text-amber-600",children:"Verification pending"})]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{status:"not_verified",size:"sm"}),e.jsx(Me,{to:"/verification",className:"ml-2 text-xs text-primary hover:underline",children:"Get Verified"})]})}function ga(){const{user:s,isLoading:a}=_(),{toast:r}=J(),[n,i]=T.useState(null),{data:m,isLoading:j}=Y({queryKey:["/api/tokens"],queryFn:De({on401:"returnNull"}),enabled:!!s}),{data:l,isLoading:o}=Y({queryKey:["/api/rewards/history"],queryFn:De({on401:"returnNull"}),enabled:!!s}),{data:u,isLoading:c}=Y({queryKey:["/api/emotion"],queryFn:De({on401:"returnNull"}),enabled:!!s,onSuccess:f=>{f!=null&&f.emotion&&i(f.emotion)}}),t=L({mutationFn:async f=>(await F("POST","/api/emotion",{emotion:f})).json(),onSuccess:f=>{i(f.emotion),f.tokensEarned>0?r({title:"Emotion Updated!",description:`You earned ${f.tokensEarned} tokens for updating your mood.`,variant:"success"}):r({title:"Emotion Updated!",description:"Your mood has been updated successfully."}),G.invalidateQueries({queryKey:["/api/emotion"]}),G.invalidateQueries({queryKey:["/api/tokens"]}),G.invalidateQueries({queryKey:["/api/rewards/history"]})},onError:f=>{r({title:"Failed to update emotion",description:"Please try again later.",variant:"destructive"})}}),p=f=>{t.mutate(f)},d=a||j||o||c;if(!d&&!s)return e.jsx(bs,{to:"/auth"});const g=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"container py-8 max-w-6xl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Your Profile"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Manage your profile, view rewards, and track achievements"}),d?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx(I,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs(ve,{defaultValue:"home",className:"space-y-8",children:[e.jsxs(be,{className:"grid grid-cols-8 w-full max-w-5xl",children:[e.jsxs(S,{value:"home",className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Home"})]}),e.jsxs(S,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs(S,{value:"security",className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),e.jsxs(S,{value:"data",className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Data"})]}),e.jsxs(S,{value:"badges",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Badges"})]}),e.jsxs(S,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Challenges"})]}),e.jsxs(S,{value:"streaks",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Streaks"})]}),e.jsxs(S,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})]}),e.jsxs(D,{value:"profile",className:"space-y-6",children:[e.jsx(Js,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Is,{}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"Account Information"]}),e.jsx(C,{children:"Your personal account details and token balance"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:s==null?void 0:s.username}),e.jsx(Zs,{})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Token Balance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",children:(m==null?void 0:m.tokens)||0}),e.jsx("span",{className:"font-medium",children:"Emotion Tokens"})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notifications"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(Me,{to:"/profile/notifications",className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 text-primary w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsx("span",{children:"View All Notifications"})]})})})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Account Created"}),e.jsx("p",{className:"text-gray-700",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})]}),e.jsx(Ys,{}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(k,{children:"Recent Reward Activity"}),e.jsx(C,{children:"History of your most recent token earnings"})]}),e.jsx(N,{children:l&&l.length>0?e.jsx("div",{className:"space-y-4",children:l.slice(0,5).map((f,K)=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.description}),e.jsx("p",{className:"text-sm text-gray-500",children:g(f.createdAt)})]}),e.jsxs(v,{variant:"outline",className:"bg-green-50",children:["+",f.tokensEarned," tokens"]})]},K))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No reward activity to display yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Complete challenges and use the app to earn tokens!"})]})})]})})]}),e.jsx(D,{value:"security",children:e.jsx(qs,{})}),e.jsx(D,{value:"data",children:e.jsx(Bs,{})}),e.jsx(D,{value:"badges",children:e.jsx(zs,{})}),e.jsx(D,{value:"challenges",children:e.jsx(Gs,{})}),e.jsx(D,{value:"streaks",children:e.jsx($s,{})}),e.jsxs(D,{value:"home",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(b,{className:"md:col-span-2",children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-primary"}),"Welcome, ",(s==null?void 0:s.firstName)||(s==null?void 0:s.username)]}),e.jsx(C,{children:"Your personal dashboard and emotion intelligence center"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/10",children:[e.jsxs("h3",{className:"font-medium text-lg mb-2 flex items-center",children:[e.jsx(Ss,{className:"h-5 w-5 text-rose-500 mr-2"}),"How are you feeling today?"]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"Track your emotions to get matched with others who share similar feelings"}),e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:[e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200 ${n==="happy"?"bg-amber-50 text-amber-600 border-amber-200":""}`,onClick:()=>p("happy"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😊"}),e.jsx("span",{className:"text-xs",children:"Happy"})]}),e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 ${n==="sad"?"bg-blue-50 text-blue-600 border-blue-200":""}`,onClick:()=>p("sad"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😢"}),e.jsx("span",{className:"text-xs",children:"Sad"})]}),e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-red-50 hover:text-red-600 hover:border-red-200 ${n==="angry"?"bg-red-50 text-red-600 border-red-200":""}`,onClick:()=>p("angry"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😠"}),e.jsx("span",{className:"text-xs",children:"Angry"})]}),e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-200 ${n==="anxious"?"bg-purple-50 text-purple-600 border-purple-200":""}`,onClick:()=>p("anxious"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😰"}),e.jsx("span",{className:"text-xs",children:"Anxious"})]}),e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-green-50 hover:text-green-600 hover:border-green-200 ${n==="excited"?"bg-green-50 text-green-600 border-green-200":""}`,onClick:()=>p("excited"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"🤩"}),e.jsx("span",{className:"text-xs",children:"Excited"})]}),e.jsxs(x,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-gray-50 hover:text-gray-600 hover:border-gray-200 ${n==="neutral"?"bg-gray-50 text-gray-600 border-gray-200":""}`,onClick:()=>p("neutral"),disabled:t.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😐"}),e.jsx("span",{className:"text-xs",children:"Neutral"})]}),t.isPending&&e.jsxs("div",{className:"col-span-3 md:col-span-6 flex justify-center mt-2",children:[e.jsx(I,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Updating emotion..."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs(x,{className:"w-full bg-gradient-to-r from-primary to-secondary text-white h-auto py-4 flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:"Find Connections"}),e.jsx("span",{className:"text-xs font-normal mt-1",children:"Match with others feeling the same way"})]}),e.jsxs(x,{variant:"outline",className:"w-full h-auto py-4 flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:"Open Journal"}),e.jsx("span",{className:"text-xs font-normal mt-1",children:"Record your emotional journey"})]})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx(fe,{className:"h-4 w-4 mr-2 text-primary"}),"Your Status"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tokens"}),e.jsx(v,{variant:"outline",className:"bg-gradient-to-r from-amber-400/20 to-orange-500/20 text-amber-700",children:(m==null?void 0:m.tokens)||0})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Streak"}),e.jsx(v,{variant:"outline",className:"bg-gradient-to-r from-blue-400/20 to-blue-500/20 text-blue-700",children:"3 days"})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active NFTs"}),e.jsx(v,{variant:"outline",className:"bg-gradient-to-r from-pink-400/20 to-purple-500/20 text-purple-700",children:"4"})]}),e.jsx("div",{className:"w-full mt-4",children:e.jsx(x,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(Me,{to:"/nft-collection",children:"View NFT Collection"})})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx($,{className:"h-4 w-4 mr-2 text-orange-500"}),"Active Challenges"]}),e.jsx(C,{children:"Complete challenges to earn tokens"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"7-Day Emotion Tracking"}),e.jsx(v,{variant:"outline",className:"bg-green-50 text-green-700",children:"3/7 Days"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"42%"}})})]}),e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Connect with 5 People"}),e.jsx(v,{variant:"outline",className:"bg-green-50 text-green-700",children:"2/5 People"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"40%"}})})]}),e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Complete Profile"}),e.jsx(v,{variant:"outline",className:"bg-green-50 text-green-700",children:"70% Done"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"70%"}})})]})]})})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx(ge,{className:"h-4 w-4 mr-2 text-blue-500"}),"Emotion Trends"]}),e.jsx(C,{children:"Your recent emotional patterns"})]}),e.jsx(N,{children:e.jsx("div",{className:"h-[180px] flex items-center justify-center text-center p-4 border rounded-md bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(ge,{className:"h-10 w-10 mb-2 mx-auto text-slate-400"}),e.jsx("p",{children:"Emotional data will appear here as you track your moods over time"})]})})})]})]})]}),e.jsx(D,{value:"analytics",children:e.jsx(_s,{})})]})]})}export{ga as default};
