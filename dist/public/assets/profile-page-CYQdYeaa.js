import{c as ls,u as Q,a as X,r as T,b as I,j as e,C as v,d as w,e as k,U as Re,f as C,g as y,A as cs,h as Ye,i as ds,B as o,X as Ue,L as es,I as L,k as M,q as $,l as os,t as ms,P as xs,F as us,T as te,m as re,n as ie,o as b,p as le,s as ne,v as Y,w as B,x as z,y as O,z as G,D as H,E as hs,S as R,G as ke,H as Ce,J as Se,K as Pe,M as D,N as Le,O as ss,Q as Ve,R as U,V,W as js,Y as q,Z as Me,_ as De,$ as ae,a0 as Ie,a1 as J,a2 as ve,a3 as Z,a4 as be,a5 as we,a6 as S,a7 as E,a8 as as,a9 as ts,aa as Ne,ab as _,ac as ye,ad as Ke,ae as ps,af as qe,ag as Be,ah as gs,ai as fs,aj as rs,ak as Ns,al as ys,am as vs,an as bs,ao as ze,ap as ws,aq as ks,ar as ce,as as Cs,at as Ss,au as Ps,av as Te}from"./index-BtgMuIOb.js";import{R as Ae}from"./refresh-ccw-CxhqQVgn.js";import{S as Oe}from"./shield-check-BsCuiFIX.js";import{C as se}from"./copy-CMU1Q9lj.js";import{K as Ge}from"./key-C-Ojmnpp.js";import{A as de,a as oe,B as Ds,b as me,c as xe,d as ue,e as he,f as je,g as pe,h as ge}from"./alert-dialog-BfWRSqPx.js";import{D as is}from"./database-CIRPvLLa.js";import{F as Ts}from"./file-text-Dbxp9B-z.js";import{T as As}from"./trash-BqVQLl6V.js";import{C as Es}from"./calendar-DJsnWGKD.js";import{T as $e}from"./thumbs-up-DXvDZdVZ.js";import{C as fe}from"./chart-no-axes-column-increasing-D1DdxGpM.js";import{D as Fs}from"./download-B6g5KT7K.js";import{B as Ls}from"./bookmark-59dXgQWX.js";import{C as Vs}from"./circle-x-DnhVtCo5.js";import{E as Ms}from"./external-link-CDfopUCx.js";import{f as _e}from"./format-Bl9MMttU.js";import"./chevron-left-FCxy29hH.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ls("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);function Is(){const{user:s}=Q(),{toast:a}=X(),[r,n]=T.useState(null),[i,u]=T.useState(null),h=t=>{if(t.target.files&&t.target.files[0]){const g=t.target.files[0];if(!g.type.match("image.*")){a({title:"Invalid file type",description:"Please select an image file (JPEG, PNG, etc.)",variant:"destructive"});return}if(g.size>2*1024*1024){a({title:"File too large",description:"Profile picture must be less than 2MB",variant:"destructive"});return}n(g);const N=new FileReader;N.onloadend=()=>{u(N.result);const P=new FormData;P.append("profilePicture",g),d.mutate(P)},N.readAsDataURL(g)}},l=()=>{n(null),u(null)},d=I({mutationFn:async t=>await(await fetch("/api/profile/picture",{method:"POST",body:t})).json(),onSuccess:t=>{$.setQueryData(["/api/user"],g=>({...g,profilePicture:t.profilePicture})),a({title:"Success",description:"Your profile picture has been updated"}),l()},onError:t=>{a({title:"Failed to update profile picture",description:t.message,variant:"destructive"})}}),m=()=>{const t=new FormData;t.append("remove","true"),d.mutate(t)},c=d.isPending;return e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5"}),"Profile Picture"]}),e.jsx(C,{children:"Update your profile picture or avatar"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(cs,{className:"h-32 w-32 border-2 border-primary/20",children:i?e.jsx(Ye,{src:i,alt:"Preview"}):s!=null&&s.profilePicture?e.jsx(Ye,{src:s.profilePicture,alt:s.username}):e.jsx(ds,{className:"text-4xl bg-primary/10",children:s==null?void 0:s.username.charAt(0).toUpperCase()})}),((s==null?void 0:s.profilePicture)||i)&&e.jsxs(o,{type:"button",variant:"outline",size:"sm",onClick:m,disabled:c,children:[e.jsx(Ue,{className:"h-4 w-4 mr-1"}),"Remove Picture"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{htmlFor:"profile-picture",children:"Upload new image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{id:"profile-picture",type:"file",accept:"image/*",onChange:h,disabled:c,className:"flex-1"}),r&&e.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:l,children:e.jsx(Ue,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Maximum file size: 2MB. Supported formats: JPEG, PNG."})]}),c&&e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2 animate-spin"}),e.jsx("span",{children:"Uploading profile picture..."})]})]})})]})}const Ys=U.object({displayName:U.string().min(2,{message:"Display name must be at least 2 characters."}).max(30,{message:"Display name must be no more than 30 characters."}).regex(/^[a-zA-Z0-9\s_\-\.]+$/,{message:"Display name can only contain letters, numbers, spaces, underscores, hyphens, and periods."}).optional(),bio:U.string().max(250,{message:"Bio must be no more than 250 characters."}).optional(),theme:U.enum(["light","dark","system"]).optional(),language:U.enum(["en","es","fr","de","zh","ja","ko","ru"]).optional(),dailyReminder:U.boolean().optional(),weeklyInsights:U.boolean().optional(),profileNotifications:U.boolean().optional(),communityUpdates:U.boolean().optional(),publicProfileLink:U.string().regex(/^[a-zA-Z0-9_]+$/,{message:"Custom URL can only contain letters, numbers, and underscores"}).min(3,{message:"Custom URL must be at least 3 characters."}).max(30,{message:"Custom URL must be no more than 30 characters."}).optional(),moodGoal:U.enum(["improve_mindfulness","track_stress","better_sleep","reduce_anxiety","increase_happiness"]).optional(),dailyCheckInTime:U.string().optional()});function Us(){var t,g,N,P;const{user:s}=Q(),{toast:a}=X(),[r,n]=T.useState(!1),i=os({resolver:ms(Ys),defaultValues:{displayName:(s==null?void 0:s.displayName)||"",bio:(s==null?void 0:s.bio)||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((t=s==null?void 0:s.notificationSettings)==null?void 0:t.dailyReminder)||!1,weeklyInsights:((g=s==null?void 0:s.notificationSettings)==null?void 0:g.weeklyInsights)||!1,profileNotifications:((N=s==null?void 0:s.notificationSettings)==null?void 0:N.profileNotifications)||!1,communityUpdates:((P=s==null?void 0:s.notificationSettings)==null?void 0:P.communityUpdates)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"}});T.useEffect(()=>{var x,p,A,f;s&&i.reset({displayName:s.displayName||"",bio:s.bio||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((x=s==null?void 0:s.notificationSettings)==null?void 0:x.dailyReminder)||!1,weeklyInsights:((p=s==null?void 0:s.notificationSettings)==null?void 0:p.weeklyInsights)||!1,profileNotifications:((A=s==null?void 0:s.notificationSettings)==null?void 0:A.profileNotifications)||!1,communityUpdates:((f=s==null?void 0:s.notificationSettings)==null?void 0:f.communityUpdates)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"})},[s,i]);const u=I({mutationFn:async x=>(await V("POST","/api/profile/update",x)).json(),onSuccess:x=>{$.setQueryData(["/api/user"],p=>({...p,...x})),a({title:"Profile Updated",description:"Your profile information has been updated successfully"}),n(!1)},onError:x=>{a({title:"Failed to update profile",description:x.message,variant:"destructive"})}}),h=x=>{u.mutate(x)},l=()=>{var x,p,A,f;s&&(i.reset({displayName:s.displayName||"",bio:s.bio||"",theme:(s==null?void 0:s.theme)||"system",language:(s==null?void 0:s.language)||"en",dailyReminder:((x=s==null?void 0:s.notificationSettings)==null?void 0:x.dailyReminder)||!1,weeklyInsights:((p=s==null?void 0:s.notificationSettings)==null?void 0:p.weeklyInsights)||!1,profileNotifications:((A=s==null?void 0:s.notificationSettings)==null?void 0:A.profileNotifications)||!1,communityUpdates:((f=s==null?void 0:s.notificationSettings)==null?void 0:f.communityUpdates)||!1,publicProfileLink:(s==null?void 0:s.publicProfileLink)||"",moodGoal:(s==null?void 0:s.moodGoal)||void 0,dailyCheckInTime:(s==null?void 0:s.dailyCheckInTime)||"08:00"}),a({title:"Changes Reverted",description:"Your changes have been discarded and the original values restored"}))},d=(s==null?void 0:s.username)||"",m=s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown",c=u.isPending;return e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx(k,{children:"Account Information"})]}),e.jsx(o,{variant:r?"outline":"default",size:"sm",onClick:()=>n(!r),disabled:c,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(C,{children:r?"Edit your personal details and preferences":"Your personal details and account preferences"})]}),e.jsx(y,{children:e.jsx(us,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),!r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:d}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"ml-2 cursor-help",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Locked"]})}),e.jsx(ne,{children:e.jsx("p",{className:"text-xs",children:"Username cannot be changed for security reasons"})})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Member Since"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:m}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"ml-2 cursor-help",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Locked"]})}),e.jsx(ne,{children:e.jsx("p",{className:"text-xs",children:"Account creation date is automatically recorded"})})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Display Name"}),e.jsx("p",{className:"text-lg font-medium",children:i.getValues().displayName||d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Bio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:i.getValues().bio||"No bio provided."})]})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{className:"flex items-center gap-1",children:["Username",e.jsx(le,{className:"h-3 w-3 ml-1 text-muted-foreground"})]}),e.jsx(L,{value:d,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed for security reasons"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{className:"flex items-center gap-1",children:["Member Since",e.jsx(le,{className:"h-3 w-3 ml-1 text-muted-foreground"})]}),e.jsx(L,{value:m,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Account creation date is automatically recorded"})]})]}),e.jsx(B,{control:i.control,name:"displayName",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Display Name"}),e.jsx(O,{children:e.jsx(L,{placeholder:"Enter a display name",...x})}),e.jsx(G,{children:"This is how your name will appear across the platform"}),e.jsx(H,{})]})}),e.jsx(B,{control:i.control,name:"bio",render:({field:x})=>{var p;return e.jsxs(z,{children:[e.jsx(Y,{children:"Bio"}),e.jsx(O,{children:e.jsx(hs,{placeholder:"Tell us a little about yourself",className:"min-h-[100px]",...x})}),e.jsxs(G,{className:"flex justify-between",children:[e.jsx("span",{children:"A brief description about yourself"}),e.jsxs("span",{children:[((p=x.value)==null?void 0:p.length)||0,"/250"]})]}),e.jsx(H,{})]})}})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Preferences"}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(B,{control:i.control,name:"theme",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Theme"}),e.jsxs(ke,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(O,{children:e.jsx(Ce,{children:e.jsx(Se,{placeholder:"Select a theme"})})}),e.jsxs(Pe,{children:[e.jsx(D,{value:"light",children:"Light"}),e.jsx(D,{value:"dark",children:"Dark"}),e.jsx(D,{value:"system",children:"System"})]})]}),e.jsx(G,{children:"Choose your preferred visual theme"}),e.jsx(H,{})]})}),e.jsx(B,{control:i.control,name:"language",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Language"}),e.jsxs(ke,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(O,{children:e.jsx(Ce,{children:e.jsx(Se,{placeholder:"Select a language"})})}),e.jsxs(Pe,{children:[e.jsx(D,{value:"en",children:"English"}),e.jsx(D,{value:"es",children:"Spanish (Español)"}),e.jsx(D,{value:"fr",children:"French (Français)"}),e.jsx(D,{value:"de",children:"German (Deutsch)"}),e.jsx(D,{value:"zh",children:"Chinese (中文)"}),e.jsx(D,{value:"ja",children:"Japanese (日本語)"}),e.jsx(D,{value:"ko",children:"Korean (한국어)"}),e.jsx(D,{value:"ru",children:"Russian (Русский)"})]})]}),e.jsx(G,{children:"Choose your preferred language"}),e.jsx(H,{})]})})]}),e.jsx(B,{control:i.control,name:"dailyCheckInTime",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Daily Check-In Time"}),e.jsx(O,{children:e.jsx(L,{type:"time",...x})}),e.jsx(G,{children:"Set your preferred daily mood check-in time"}),e.jsx(H,{})]})}),e.jsx(B,{control:i.control,name:"moodGoal",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Mood Goal"}),e.jsxs(ke,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(O,{children:e.jsx(Ce,{children:e.jsx(Se,{placeholder:"Select a mood goal"})})}),e.jsxs(Pe,{children:[e.jsx(D,{value:"improve_mindfulness",children:"Improve Mindfulness"}),e.jsx(D,{value:"track_stress",children:"Track Stress Triggers"}),e.jsx(D,{value:"better_sleep",children:"Better Sleep"}),e.jsx(D,{value:"reduce_anxiety",children:"Reduce Anxiety"}),e.jsx(D,{value:"increase_happiness",children:"Increase Happiness"})]})]}),e.jsx(G,{children:"Set a primary goal for your mood tracking"}),e.jsx(H,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{children:"Notification Preferences"}),e.jsx(B,{control:i.control,name:"dailyReminder",render:({field:x})=>e.jsxs(z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Y,{className:"text-base",children:"Daily Mood Reminders"}),e.jsx(G,{children:"Receive daily notifications to track your mood"})]}),e.jsx(O,{children:e.jsx(Le,{checked:x.value,onCheckedChange:x.onChange})})]})}),e.jsx(B,{control:i.control,name:"weeklyInsights",render:({field:x})=>e.jsxs(z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Y,{className:"text-base",children:"Weekly Insights"}),e.jsx(G,{children:"Receive weekly reports on your emotional trends"})]}),e.jsx(O,{children:e.jsx(Le,{checked:x.value,onCheckedChange:x.onChange})})]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Theme"}),e.jsx("p",{className:"text-lg font-medium capitalize",children:i.getValues().theme||"System"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Language"}),e.jsx("p",{className:"text-lg font-medium",children:Ks(i.getValues().language||"en")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Daily Check-In Time"}),e.jsx("p",{className:"text-lg font-medium",children:qs(i.getValues().dailyCheckInTime||"08:00")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Mood Goal"}),e.jsx("p",{className:"text-lg font-medium capitalize",children:i.getValues().moodGoal?i.getValues().moodGoal.replace(/_/g," "):"Not Set"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Daily Mood Reminders"}),e.jsx(b,{variant:i.getValues().dailyReminder?"default":"outline",children:i.getValues().dailyReminder?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Weekly Insights"}),e.jsx(b,{variant:i.getValues().weeklyInsights?"default":"outline",children:i.getValues().weeklyInsights?"Enabled":"Disabled"})]})]})]})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Social Integration"}),r?e.jsx("div",{className:"space-y-6",children:e.jsx(B,{control:i.control,name:"publicProfileLink",render:({field:x})=>e.jsxs(z,{children:[e.jsx(Y,{children:"Custom Profile URL"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-muted px-3 py-2 rounded-l-md border border-r-0 border-input text-muted-foreground",children:"moodsync.com/@"}),e.jsx(O,{children:e.jsx(L,{className:"rounded-l-none",placeholder:"username",...x})})]}),e.jsx(G,{children:"Create a custom URL for your public profile (letters, numbers, underscores only)"}),e.jsx(H,{})]})})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Public Profile Link"}),e.jsx("p",{className:"text-lg font-medium",children:i.getValues().publicProfileLink?`moodsync.com/@${i.getValues().publicProfileLink}`:"Not set"})]})})]}),r&&e.jsxs("div",{className:"mt-6 p-3 border rounded-md bg-slate-50 dark:bg-slate-900 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Security Assurance"})]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Your security is our priority. Locked fields protect your account from unauthorized changes. Your username and account creation date cannot be modified for security reasons."})]}),r&&e.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[e.jsxs(o,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:c,className:"mr-auto",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(o,{type:"button",variant:"secondary",onClick:l,disabled:c||!i.formState.isDirty,children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Revert Changes"]}),e.jsx(o,{type:"submit",disabled:c||!i.formState.isDirty,children:c?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})})]})}function Ks(s){return{en:"English",es:"Spanish (Español)",fr:"French (Français)",de:"German (Deutsch)",zh:"Chinese (中文)",ja:"Japanese (日本語)",ko:"Korean (한국어)",ru:"Russian (Русский)"}[s]||s}function qs(s){try{const[a,r]=s.split(":"),n=new Date;return n.setHours(parseInt(a,10)),n.setMinutes(parseInt(r,10)),n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return s}}function Bs(){const[s,a]=T.useState(null),[r,n]=T.useState(!1),[i,u]=T.useState(!1),[h,l]=T.useState(""),[d,m]=T.useState(1),{toast:c}=X(),t=js(),{data:g,isLoading:N}=q({queryKey:["/api/auth/2fa/status"],queryFn:async()=>(await V("GET","/api/auth/2fa/status")).json()}),P=I({mutationFn:async()=>(await V("POST","/api/auth/2fa/setup")).json(),onSuccess:j=>{a(j),m(2)},onError:j=>{c({title:"Setup Error",description:j.message,variant:"destructive"})}}),x=I({mutationFn:async()=>(await V("POST","/api/auth/2fa/verify",{token:h})).json(),onSuccess:()=>{c({title:"2FA Enabled",description:"Two-factor authentication has been enabled for your account"}),m(3),t.invalidateQueries({queryKey:["/api/auth/2fa/status"]})},onError:j=>{c({title:"Verification Error",description:j.message,variant:"destructive"})}}),p=I({mutationFn:async j=>(await V("POST","/api/auth/2fa/disable",{token:j})).json(),onSuccess:()=>{c({title:"2FA Disabled",description:"Two-factor authentication has been disabled for your account"}),t.invalidateQueries({queryKey:["/api/auth/2fa/status"]})},onError:j=>{c({title:"Error",description:j.message,variant:"destructive"})}}),A=I({mutationFn:async j=>(await V("POST","/api/auth/2fa/new-backup-codes",{token:j})).json(),onSuccess:j=>{c({title:"New Backup Codes",description:"New backup codes have been generated"}),a(F=>F?{...F,backupCodes:j.backupCodes}:null)},onError:j=>{c({title:"Error",description:j.message,variant:"destructive"})}}),f=I({mutationFn:async j=>(await V("POST","/api/auth/2fa/new-recovery-key",{token:j})).json(),onSuccess:j=>{c({title:"New Recovery Key",description:"A new recovery key has been generated"}),a(F=>F?{...F,recoveryKey:j.recoveryKey}:null)},onError:j=>{c({title:"Error",description:j.message,variant:"destructive"})}}),ee=(j,F)=>{navigator.clipboard.writeText(j).then(()=>{c({title:"Copied",description:`${F} copied to clipboard`})}).catch(()=>{c({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})})};return N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-primary"})}):g!=null&&g.enabled?e.jsx("div",{className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-500"}),"Two-Factor Authentication"]}),e.jsx(C,{children:"Your account is protected with two-factor authentication"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md bg-green-50 p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Two-factor authentication is enabled for your account"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Backup Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you lose access to your authentication app, you can use these backup codes to sign in. Each code can only be used once."}),e.jsx("div",{className:"rounded-md bg-muted p-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s!=null&&s.backupCodes?s.backupCodes.map((j,F)=>e.jsx("div",{className:"font-mono text-xs",children:j},F)):e.jsx("p",{className:"text-sm col-span-2",children:"Backup codes are not available. Generate new ones."})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"text",placeholder:"Enter verification code",value:h,onChange:j=>l(j.target.value),maxLength:6,className:"w-36"}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>A.mutate(h),disabled:A.isPending||h.length!==6,children:[A.isPending?e.jsx(M,{className:"h-4 w-4 animate-spin mr-2"}):null,"Generate New Codes"]}),s!=null&&s.backupCodes?e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ee(s.backupCodes.join(`
`),"Backup codes"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Copy"]}):null]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Recovery Key"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your recovery key is a secure way to regain access to your account if you lose your device and backup codes. Keep it in a safe place."}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{type:i?"text":"password",value:(s==null?void 0:s.recoveryKey)||"••••••••••••••••••••••••••",readOnly:!0,className:"font-mono pr-10"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>u(!i),children:i?e.jsx(De,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"text",placeholder:"Enter verification code",value:h,onChange:j=>l(j.target.value),maxLength:6,className:"w-36"}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>f.mutate(h),disabled:f.isPending||h.length!==6,children:[f.isPending?e.jsx(M,{className:"h-4 w-4 animate-spin mr-2"}):null,"Generate New Key"]}),s!=null&&s.recoveryKey?e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ee(s.recoveryKey,"Recovery key"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Copy"]}):null]})]})]}),e.jsxs(Ie,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Disable two-factor authentication"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{type:"text",placeholder:"Verification code",value:h,onChange:j=>l(j.target.value),maxLength:6,className:"w-36"}),e.jsxs(o,{variant:"destructive",onClick:()=>p.mutate(h),disabled:p.isPending||h.length!==6,children:[p.isPending?e.jsx(M,{className:"h-4 w-4 animate-spin mr-2"}):null,"Disable 2FA"]})]})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),"Password Management"]}),e.jsx(C,{children:"Manage your password and recovery options"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"You can request a password reset link to be sent to your email address. This is useful if you've forgotten your password or want to change it for security reasons."}),e.jsxs(o,{onClick:()=>{c({title:"Password Reset Link Sent",description:"If an account exists with your email, you will receive a password reset link shortly."}),V("POST","/api/auth/forgot-password",{})},variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),e.jsx("div",{className:"rounded-md bg-muted p-4 mt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"For security reasons, we don't confirm whether an account exists. If you don't receive an email, please check your spam folder or contact support."})})]})]}),e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),e.jsx(C,{children:"Add an extra layer of security to your account by requiring a verification code"})]}),e.jsxs(y,{children:[d===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"Two-factor authentication adds an extra layer of security to your account. In addition to your password, you'll need to enter a code from your authenticator app when signing in."}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(J,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Important"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"You'll need an authenticator app like Google Authenticator, Authy, or Microsoft Authenticator"}),e.jsx("li",{children:"We'll provide backup codes you should save in a secure place"}),e.jsx("li",{children:"You'll also receive a recovery key - store it separately from your backup codes"})]})]})]})}),e.jsxs(o,{onClick:()=>P.mutate(),disabled:P.isPending,className:"w-full sm:w-auto",children:[P.isPending?e.jsx(M,{className:"h-4 w-4 animate-spin mr-2"}):null,"Set Up Two-Factor Authentication"]})]}),d===2&&s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"1. Scan QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.qrCodeUrl,alt:"QR Code",className:"border rounded-md p-2 bg-white",style:{width:"200px",height:"200px"}})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you can't scan the QR code, enter this code manually:"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{type:r?"text":"password",value:s.secret,readOnly:!0,className:"font-mono pr-10"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>n(!r),children:r?e.jsx(De,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ee(s.secret,"Secret key"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Copy Secret Key"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"2. Backup Codes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save these backup codes in a secure place. If you lose your device, you can use these to sign in. Each code can only be used once."}),e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.backupCodes.map((j,F)=>e.jsx("div",{className:"font-mono text-xs",children:j},F))})}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ee(s.backupCodes.join(`
`),"Backup codes"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Copy Backup Codes"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"3. Recovery Key"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save this recovery key in a secure place different from your backup codes. You'll need it if you lose access to your device and backup codes."}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{type:i?"text":"password",value:s.recoveryKey,readOnly:!0,className:"font-mono pr-10"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>u(!i),children:i?e.jsx(De,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ee(s.recoveryKey,"Recovery key"),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Copy Recovery Key"]}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(J,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Important:"})," Store your recovery key in a secure location separate from your backup codes. Anyone with this key can bypass 2FA on your account."]})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"font-medium",children:"4. Verify Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the verification code from your authenticator app to complete setup"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{type:"text",placeholder:"6-digit code",value:h,onChange:j=>l(j.target.value),maxLength:6,className:"w-36"}),e.jsxs(o,{onClick:()=>x.mutate(),disabled:x.isPending||h.length!==6,children:[x.isPending?e.jsx(M,{className:"h-4 w-4 animate-spin mr-2"}):null,"Verify and Enable"]})]})]})]}),d===3&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 border border-green-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(Me,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Two-factor authentication enabled"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your account is now protected with two-factor authentication. When signing in, you'll need to provide your password and a verification code from your authenticator app."})]})]})})]})]})]})}function zs(){const{user:s,logoutMutation:a}=Q(),{toast:r}=X();T.useState(!1);const n=I({mutationFn:async()=>(await V("POST","/api/account/delete")).json(),onSuccess:()=>{r({title:"Account Deletion Requested",description:"Your account deletion request has been submitted. You will receive an email confirmation. Your account will be fully deleted in 3-7 business days."}),a.mutate()},onError:d=>{r({title:"Error",description:d.message||"Failed to request account deletion",variant:"destructive"})}}),i=I({mutationFn:async()=>(await V("POST","/api/account/delete-data")).json(),onSuccess:()=>{r({title:"Data Deletion Requested",description:"Your data deletion request has been submitted. You will receive an email confirmation. Your data will be fully removed in 3-7 business days."})},onError:d=>{r({title:"Error",description:d.message||"Failed to request data deletion",variant:"destructive"})}}),u=s==null?void 0:s.isPremium,h=I({mutationFn:async()=>(await V("POST","/api/subscription/cancel")).json(),onSuccess:d=>{r({title:"Subscription Cancelled",description:`Your subscription has been cancelled. You will continue to have premium access until ${new Date(d.expiresAt).toLocaleDateString()}.`})},onError:d=>{r({title:"Error",description:d.message||"Failed to cancel subscription",variant:"destructive"})}}),l=I({mutationFn:async()=>(await V("POST","/api/subscription/renew")).json(),onSuccess:d=>{r({title:"Subscription Renewed",description:"Your subscription has been renewed successfully."})},onError:d=>{r({title:"Error",description:d.message||"Failed to renew subscription",variant:"destructive"})}});return e.jsxs("div",{className:"space-y-6",children:[u&&e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Subscription Management"]}),e.jsx(C,{children:"Manage your premium subscription settings"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Current Plan"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground mr-2",children:(s==null?void 0:s.premiumPlanType)||"Premium"}),e.jsx(b,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Active"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Renews On"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s!=null&&s.premiumExpiryDate?new Date(s.premiumExpiryDate).toLocaleDateString():"Not available"})]})]}),e.jsx(R,{}),e.jsx("div",{className:"rounded-md bg-amber-50 p-4 border border-amber-200",children:e.jsxs("div",{className:"flex",children:[e.jsx(J,{className:"h-5 w-5 text-amber-500 shrink-0 mr-2"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Important Information"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Cancelling your subscription will not provide a refund unless you are within the 14-day money-back guarantee period"}),e.jsx("li",{children:"You will continue to have premium access until your current period ends"}),e.jsx("li",{children:"After cancellation, your account will revert to the free plan"}),e.jsx("li",{children:"If you're within 14 days of your initial purchase, contact support for a refund"})]})]})]})})]}),e.jsxs(Ie,{className:"flex justify-between",children:[e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/10",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Cancel Subscription"]})}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:"Cancel Your Subscription?"}),e.jsxs(he,{children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to cancel your subscription? You will continue to have premium access until your current period ends on ",e.jsx("strong",{children:s!=null&&s.premiumExpiryDate?new Date(s.premiumExpiryDate).toLocaleDateString():"N/A"}),"."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Refund Policy:"})," If you're within the 14-day money-back guarantee period of your initial purchase, please contact our support team for a full refund. Otherwise, no refunds will be issued for the current billing period."]})]})]}),e.jsxs(je,{children:[e.jsx(pe,{children:"Keep My Subscription"}),e.jsx(ge,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, Cancel Subscription"})]})]})]}),(s==null?void 0:s.subscriptionCancelled)&&e.jsx(o,{variant:"default",onClick:()=>l.mutate(),disabled:l.isPending,children:l.isPending?"Processing...":"Renew Subscription"})]})]}),e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-red-500"}),"Account & Data Management"]}),e.jsx(C,{children:"Options for managing your personal data and account"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"Data Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Request deletion of your personal data while keeping your account active. This will remove your emotional data, posts, and personal information."}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"border-amber-200 bg-amber-50 text-amber-900 hover:bg-amber-100",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Request Data Deletion"]})}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:"Delete Your Personal Data?"}),e.jsxs(he,{children:[e.jsx("p",{className:"mb-2",children:"This will permanently remove your personal data from our systems, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-4",children:[e.jsx("li",{children:"Emotional tracking history"}),e.jsx("li",{children:"User-generated content"}),e.jsx("li",{children:"Personal information"})]}),e.jsx("p",{className:"mb-2",children:"Your account will remain active but with minimal information. This process takes 3-7 business days to complete and cannot be undone."}),e.jsx("p",{children:"You will receive an email confirmation once your data has been deleted."})]})]}),e.jsxs(je,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(ge,{onClick:()=>i.mutate(),className:"bg-amber-600 text-white hover:bg-amber-700",children:"Delete My Data"})]})]})]})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium mb-2 text-red-600",children:"Account Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Permanently delete your entire account including all data, posts, and subscription information. This action cannot be undone."}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(o,{variant:"destructive",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Delete My Account"]})}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:"Delete Your Account Permanently?"}),e.jsxs(he,{children:[e.jsx("p",{className:"mb-2",children:"This will permanently delete your account and all associated data:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-4",children:[e.jsx("li",{children:"Your profile and all personal information"}),e.jsx("li",{children:"All emotional tracking data"}),e.jsx("li",{children:"All posts, messages, and content"}),e.jsx("li",{children:"Your subscription (subject to our 14-day money-back guarantee policy)"})]}),e.jsxs("p",{className:"mb-2",children:["This process takes 3-7 business days to complete and ",e.jsx("strong",{children:"cannot be undone"}),"."]}),e.jsx("p",{children:"You will receive an email confirmation when the process begins and when it completes."})]})]}),e.jsxs(je,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(ge,{onClick:()=>n.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Permanently Delete Account"})]})]})]})]})]})]})]})}const Qe=s=>{switch(s){case"easy":return"Easy";case"moderate":return"Moderate";case"hard":return"Hard";case"extreme":return"Extreme";default:return"Unknown"}},He=s=>{switch(s){case"easy":return"bg-green-50 text-green-700 border-green-300";case"moderate":return"bg-blue-50 text-blue-700 border-blue-300";case"hard":return"bg-purple-50 text-purple-700 border-purple-300";case"extreme":return"bg-red-50 text-red-800 border-red-300";default:return"bg-gray-50 text-gray-700 border-gray-300"}},We=s=>{switch(s){case"easy":return e.jsx(Ne,{className:"h-12 w-12 text-green-500"});case"moderate":return e.jsx(ts,{className:"h-12 w-12 text-blue-500"});case"hard":return e.jsx(Z,{className:"h-12 w-12 text-purple-500"});case"extreme":return e.jsx(as,{className:"h-12 w-12 text-red-500"});default:return e.jsx(Rs,{className:"h-12 w-12 text-gray-500"})}};function Os(){const{user:s}=Q(),[a,r]=T.useState("all"),{data:n,isLoading:i}=q({queryKey:["/api/badges"],queryFn:async()=>{const t=await fetch("/api/badges");if(!t.ok)throw new Error("Failed to fetch badges");return t.json()}}),{data:u,isLoading:h}=q({queryKey:["/api/user/badges"],queryFn:async()=>{const t=await fetch("/api/user/badges");if(!t.ok)throw new Error("Failed to fetch user badges");return t.json()},enabled:!!s}),l=i||h,d=t=>t?a==="all"?t:t.filter(g=>g.difficulty===a):[],m=t=>(u==null?void 0:u.some(g=>g.id===t))||!1,c=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Your Badges"]}),e.jsx(C,{children:"Badges earned through completing challenges of varying difficulty"})]}),e.jsx(y,{children:l?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin w-10 h-10 border-4 border-primary border-t-transparent rounded-full"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(be,{defaultValue:"earned",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-2",children:[e.jsxs(S,{value:"earned",children:["Earned (",(u==null?void 0:u.length)||0,")"]}),e.jsxs(S,{value:"available",children:["Available (",((n==null?void 0:n.length)||0)-((u==null?void 0:u.length)||0),")"]})]}),e.jsx(E,{value:"earned",className:"pt-4",children:u&&u.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(o,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),children:"All"}),e.jsx(o,{variant:a==="easy"?"default":"outline",size:"sm",onClick:()=>r("easy"),className:"text-green-700",children:"Easy"}),e.jsx(o,{variant:a==="moderate"?"default":"outline",size:"sm",onClick:()=>r("moderate"),className:"text-blue-700",children:"Moderate"}),e.jsx(o,{variant:a==="hard"?"default":"outline",size:"sm",onClick:()=>r("hard"),className:"text-purple-700",children:"Hard"}),e.jsx(o,{variant:a==="extreme"?"default":"outline",size:"sm",onClick:()=>r("extreme"),className:"text-red-700",children:"Extreme"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d(u).map(t=>e.jsxs("div",{className:"flex p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex-shrink-0 mr-4 flex items-center justify-center",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-16 h-16 object-contain"}):We(t.difficulty)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(b,{variant:"outline",className:He(t.difficulty),children:Qe(t.difficulty)}),t.earnedAt&&e.jsxs(b,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:["Earned on ",c(t.earnedAt)]})]})]})]},t.id))}),d(u).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500",children:"No badges found for the selected filter."})]}):e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No Badges Yet"}),e.jsx("p",{children:"Complete challenges to earn badges and showcase your achievements!"})]})}),e.jsxs(E,{value:"available",className:"pt-4",children:[n&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.filter(t=>!m(t.id)).map(t=>e.jsxs("div",{className:"flex p-4 border rounded-lg bg-gray-50/50",children:[e.jsx("div",{className:"flex-shrink-0 mr-4 flex items-center justify-center opacity-70",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-16 h-16 object-contain grayscale"}):We(t.difficulty)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsx(b,{variant:"outline",className:He(t.difficulty),children:Qe(t.difficulty)})]})]},t.id))}),n&&n.filter(t=>!m(t.id)).length===0&&e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"All Badges Collected!"}),e.jsx("p",{children:"Congratulations! You've earned all available badges."})]})]})]})})})]})}function Je(s,a){if(a===0)return 100;const r=s/a*100;return Math.min(Math.max(r,0),100)}function Ee(s){switch(s){case"easy":return"Easy";case"moderate":return"Moderate";case"hard":return"Hard";case"extreme":return"Extreme";default:return s}}function Ze(s){switch(s){case"easy":return"bg-green-100 text-green-800 border-green-300";case"moderate":return"bg-blue-100 text-blue-800 border-blue-300";case"hard":return"bg-purple-100 text-purple-800 border-purple-300";case"extreme":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}}function Gs(s){switch(s){case"easy":return e.jsx(Ne,{className:"h-5 w-5 text-green-600"});case"moderate":return e.jsx(ts,{className:"h-5 w-5 text-blue-600"});case"hard":return e.jsx(Z,{className:"h-5 w-5 text-purple-600"});case"extreme":return e.jsx(as,{className:"h-5 w-5 text-red-600"});default:return e.jsx(_,{className:"h-5 w-5 text-gray-600"})}}function $s(){Q();const{toast:s}=X(),[a,r]=T.useState("all"),{data:n,isLoading:i}=q({queryKey:["/api/gamification/challenges"],queryFn:async()=>{const m=await fetch("/api/gamification/challenges");if(!m.ok)throw new Error("Failed to fetch challenges");return m.json()}}),u=I({mutationFn:async m=>{const c=await fetch(`/api/challenges/complete/${m}`,{method:"POST"});if(!c.ok){const t=await c.json();throw new Error(t.error||"Failed to complete challenge")}return c.json()},onSuccess:m=>{s({title:"Challenge Completed!",description:`You earned ${m.tokensAwarded} tokens`,variant:"default"}),m.badgeAwarded&&s({title:"New Badge Earned!",description:`You've earned the "${m.badgeAwarded.name}" badge`,variant:"default"}),$.invalidateQueries({queryKey:["/api/gamification/challenges"]}),$.invalidateQueries({queryKey:["/api/tokens"]}),$.invalidateQueries({queryKey:["/api/user/badges"]})},onError:m=>{s({title:"Failed to complete challenge",description:m.message,variant:"destructive"})}}),h=()=>{const m={easy:[],moderate:[],hard:[],extreme:[]};return n&&n.forEach(c=>{m[c.difficulty].push(c)}),m},l=m=>{u.mutate(m)},d=h();return e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Challenges"]}),e.jsx(C,{children:"Complete challenges to earn tokens and badges"})]}),e.jsx(y,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs(be,{defaultValue:"all",className:"w-full",children:[e.jsxs(we,{className:"grid grid-cols-5 mb-4",children:[e.jsx(S,{value:"all",onClick:()=>r("all"),children:"All"}),e.jsx(S,{value:"easy",onClick:()=>r("easy"),className:"text-green-700",children:"Easy"}),e.jsx(S,{value:"moderate",onClick:()=>r("moderate"),className:"text-blue-700",children:"Medium"}),e.jsx(S,{value:"hard",onClick:()=>r("hard"),className:"text-purple-700",children:"Hard"}),e.jsx(S,{value:"extreme",onClick:()=>r("extreme"),className:"text-red-700",children:"Extreme"})]}),e.jsx(E,{value:"all",className:"space-y-6",children:Object.entries(d).map(([m,c])=>c.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[Gs(m),Ee(m)," Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(t=>e.jsxs("div",{className:`border rounded-lg p-4 ${t.completed?"bg-green-50 border-green-200":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx(b,{variant:"outline",className:Ze(t.difficulty),children:Ee(t.difficulty)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",t.currentValue,"/",t.targetValue]}),e.jsxs("span",{className:"font-medium text-primary",children:[t.rewardTokens," tokens"]})]}),e.jsx(ye,{value:Je(t.currentValue,t.targetValue)}),t.completed?e.jsxs(o,{disabled:!0,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Completed"]}):e.jsx(o,{disabled:u.isPending||t.currentValue<t.targetValue,onClick:()=>l(t.id),className:"w-full",children:u.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsx(e.Fragment,{children:t.currentValue>=t.targetValue?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Claim Reward"]}):e.jsx(e.Fragment,{children:"In Progress"})})})]})]},t.id))})]},m))}),["easy","moderate","hard","extreme"].map(m=>e.jsx(E,{value:m,className:"space-y-4",children:d[m].length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:d[m].map(c=>e.jsxs("div",{className:`border rounded-lg p-4 ${c.completed?"bg-green-50 border-green-200":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium",children:c.title}),e.jsx(b,{variant:"outline",className:Ze(c.difficulty),children:Ee(c.difficulty)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:c.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",c.currentValue,"/",c.targetValue]}),e.jsxs("span",{className:"font-medium text-primary",children:[c.rewardTokens," tokens"]})]}),e.jsx(ye,{value:Je(c.currentValue,c.targetValue)}),c.completed?e.jsxs(o,{disabled:!0,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Completed"]}):e.jsx(o,{disabled:u.isPending||c.currentValue<c.targetValue,onClick:()=>l(c.id),className:"w-full",children:u.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsx(e.Fragment,{children:c.currentValue>=c.targetValue?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Claim Reward"]}):e.jsx(e.Fragment,{children:"In Progress"})})})]})]},c.id))}):e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"font-medium",children:"No challenges available for this difficulty"})]})},m))]})})]})}function _s(){Q();const[s,a]=T.useState(new Date),{data:r,isLoading:n}=q({queryKey:["/api/gamification/profile"],queryFn:async()=>{const l=await fetch("/api/gamification/profile");if(!l.ok)throw new Error("Failed to fetch profile");return l.json()}}),u=(()=>{if(!r||!r.lastCheckIn)return[];const l=[],d=new Date,m=new Date(r.lastCheckIn);l.push(new Date(m)),new Date().setDate(d.getDate()-60);const t=Math.min(r.currentStreak/10,.9),g=Math.min(r.currentStreak,60);for(let N=1;N<=g;N++){const P=new Date;P.setDate(d.getDate()-N),Math.random()<t&&l.push(new Date(P))}return l})(),h=()=>{if(!r)return null;let l="",d="";return r.currentStreak>=30?(l="Ultimate Streak!",d="bg-purple-100 text-purple-800 border-purple-300"):r.currentStreak>=14?(l="Blazing Streak!",d="bg-red-100 text-red-800 border-red-300"):r.currentStreak>=7?(l="Strong Streak!",d="bg-amber-100 text-amber-800 border-amber-300"):r.currentStreak>=3?(l="Building Streak!",d="bg-green-100 text-green-800 border-green-300"):(l="Getting Started",d="bg-blue-100 text-blue-800 border-blue-300"),e.jsx(b,{variant:"outline",className:d,children:l})};return e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Streaks & Check-ins"]}),e.jsx(C,{children:"Track your daily check-in streaks and consistency"})]}),e.jsx(y,{children:n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8",children:[e.jsxs("div",{className:"md:flex-1 bg-muted rounded-lg p-4 flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Current Streak"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:r.currentStreak}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),e.jsx(_,{className:"h-10 w-10 text-primary opacity-80"})]}),e.jsxs("div",{className:"md:flex-1 bg-muted rounded-lg p-4 flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Longest Streak"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:r.longestStreak}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),e.jsx(Z,{className:"h-10 w-10 text-primary opacity-80"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last check-in: ",r.lastCheckIn?new Date(r.lastCheckIn).toLocaleDateString():"Never"]})]}),h()]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Check-in Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 rounded-full"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Check-in"})]})]}),e.jsx(Es,{mode:"single",selected:s,onSelect:a,className:"rounded-md border",disabled:{after:new Date},showOutsideDays:!1,components:{Day:({day:l,...d})=>e.jsx("div",{className:`relative ${u.some(m=>m.getDate()===l.getDate()&&m.getMonth()===l.getMonth()&&m.getFullYear()===l.getFullYear())?"bg-green-100 text-green-900 font-medium rounded-full":""}`,...d,children:l.getDate()})}}),e.jsxs("div",{className:"mt-4 text-sm text-center text-muted-foreground",children:[e.jsx("p",{children:"Keep your streak going by checking in daily to earn more rewards!"}),e.jsx("p",{className:"mt-1 text-xs",children:"Regular check-ins increase your chances of earning special badges."})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor(r.currentStreak/30*100),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Goal"})]}),e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[r.currentStreak>=7?"✓":r.currentStreak,"/7"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Weekly Streak"})]}),e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.points}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak Points"})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No streak data available."}),e.jsx("p",{className:"text-sm",children:"Start checking in daily to build your streak!"})]})})]})}function Qs(){const{user:s}=Q(),{data:a,isLoading:r}=q({queryKey:["/api/user/profile-analytics"],enabled:!!(s!=null&&s.isPremium)});return s!=null&&s.isPremium?r?e.jsxs(v,{className:"col-span-3",children:[e.jsxs(w,{children:[e.jsx(k,{children:"Profile Analytics"}),e.jsx(C,{children:"Loading your analytics data..."})]}),e.jsx(y,{className:"h-[300px] flex items-center justify-center",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-primary"})})]}):e.jsxs(be,{defaultValue:"overview",className:"col-span-3",children:[e.jsx(w,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{children:"Profile Analytics"}),e.jsx(C,{children:"View statistics about your content and followers"})]}),e.jsxs(we,{children:[e.jsx(S,{value:"overview",children:"Overview"}),e.jsx(S,{value:"videos",children:"Videos"}),e.jsx(S,{value:"engagement",children:"Engagement"})]})]})}),e.jsxs(y,{className:"pt-6",children:[e.jsxs(E,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(K,{icon:e.jsx(qe,{className:"h-5 w-5 text-blue-500"}),title:"Followers",value:(a==null?void 0:a.followerCount)||0,footer:"Total followers"}),e.jsx(K,{icon:e.jsx(ae,{className:"h-5 w-5 text-purple-500"}),title:"Views",value:(a==null?void 0:a.totalViews)||0,footer:"Total video views"}),e.jsx(K,{icon:e.jsx($e,{className:"h-5 w-5 text-green-500"}),title:"Likes",value:(a==null?void 0:a.totalLikes)||0,footer:"Total likes received"}),e.jsx(K,{icon:e.jsx(Be,{className:"h-5 w-5 text-orange-500"}),title:"Shares",value:(a==null?void 0:a.totalShares)||0,footer:"Total shares"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Engagement Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{value:Xe(a)*100,max:100,className:"h-2"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(Xe(a)*100).toFixed(1),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement rate is calculated as (likes + comments + shares) / views"})]})]}),e.jsxs(E,{value:"videos",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(K,{icon:e.jsx(fe,{className:"h-5 w-5 text-indigo-500"}),title:"Videos",value:(a==null?void 0:a.totalVideos)||0,footer:"Total videos posted"}),e.jsx(K,{icon:e.jsx(ae,{className:"h-5 w-5 text-purple-500"}),title:"Avg. Views",value:Hs(a)||0,footer:"Average views per video"}),e.jsx(K,{icon:e.jsx($e,{className:"h-5 w-5 text-green-500"}),title:"Avg. Likes",value:Ws(a)||0,footer:"Average likes per video"}),e.jsx(K,{icon:e.jsx(Fs,{className:"h-5 w-5 text-rose-500"}),title:"Downloads",value:(a==null?void 0:a.totalDownloads)||0,footer:"Total downloads"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Most Popular Categories"}),a!=null&&a.categoryStats&&Object.entries(a.categoryStats).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(a.categoryStats).sort((n,i)=>i[1]-n[1]).slice(0,3).map(([n,i])=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm capitalize",children:Js(n)}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i," videos"]})]}),e.jsx(ye,{value:i,max:a.totalVideos,className:"h-1.5"})]},n))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No category data available"})]})]}),e.jsxs(E,{value:"engagement",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(K,{icon:e.jsx(gs,{className:"h-5 w-5 text-amber-500"}),title:"Comments",value:(a==null?void 0:a.totalComments)||0,footer:"Total comments"}),e.jsx(K,{icon:e.jsx(Be,{className:"h-5 w-5 text-orange-500"}),title:"Shares",value:(a==null?void 0:a.totalShares)||0,footer:"Total shares"}),e.jsx(K,{icon:e.jsx(Ls,{className:"h-5 w-5 text-blue-500"}),title:"Saves",value:(a==null?void 0:a.totalSaves)||0,footer:"Total saves"}),e.jsx(K,{icon:e.jsx(qe,{className:"h-5 w-5 text-indigo-500"}),title:"Video Followers",value:(a==null?void 0:a.totalVideoFollows)||0,footer:"Total video followers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Interaction Breakdown"}),e.jsxs("div",{className:"h-[180px] flex items-end gap-2",children:[W("Likes",a==null?void 0:a.totalLikes,"bg-green-500",a),W("Comments",a==null?void 0:a.totalComments,"bg-amber-500",a),W("Shares",a==null?void 0:a.totalShares,"bg-orange-500",a),W("Saves",a==null?void 0:a.totalSaves,"bg-blue-500",a),W("Follows",a==null?void 0:a.totalVideoFollows,"bg-indigo-500",a),W("Downloads",a==null?void 0:a.totalDownloads,"bg-rose-500",a)]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Likes"}),e.jsx("span",{children:"Comments"}),e.jsx("span",{children:"Shares"}),e.jsx("span",{children:"Saves"}),e.jsx("span",{children:"Follows"}),e.jsx("span",{children:"Downloads"})]})]})]})]})]}):e.jsxs(v,{className:"col-span-3",children:[e.jsxs(w,{children:[e.jsx(k,{children:"Premium Analytics"}),e.jsx(C,{children:"Upgrade to premium to access detailed analytics about your profile and content."})]}),e.jsx(y,{className:"h-[300px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-transparent bg-clip-text text-4xl font-bold mb-4",children:"Premium Feature"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"View detailed statistics about your content and audience"})]})})]})}function K({icon:s,title:a,value:r,footer:n}){return e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s,e.jsx("span",{className:"text-sm font-medium",children:a})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:ns(r)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})})}function Xe(s){if(!s||!s.totalViews||s.totalViews===0)return 0;const a=(s.totalLikes||0)+(s.totalComments||0)+(s.totalShares||0);return Math.min(a/s.totalViews,1)}function Hs(s){return!s||!s.totalVideos||s.totalVideos===0?0:Math.round(s.totalViews/s.totalVideos)}function Ws(s){return!s||!s.totalVideos||s.totalVideos===0?0:Math.round(s.totalLikes/s.totalVideos)}function ns(s){return s==null?0:s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()}function Js(s){return s?s.replace(/_/g," "):""}function W(s,a,r,n){if(!n)return null;const i=Math.max(n.totalLikes||0,n.totalComments||0,n.totalShares||0,n.totalSaves||0,n.totalVideoFollows||0,n.totalDownloads||0),u=i>0?a/i*100:0,h=Math.max(u,5);return e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end",children:[e.jsx("div",{className:"relative w-full flex justify-center mb-1",children:e.jsx("span",{className:"absolute -top-6 text-xs font-medium",children:ns(a)})}),e.jsx("div",{className:`w-full ${r} rounded-t`,style:{height:`${h}%`}})]})}function Zs(){const{tier:s,status:a,isActive:r,isTrialing:n,isLifetime:i,daysRemaining:u,expiryDate:h,subscriptionDetails:l,cancelSubscriptionMutation:d}=fs(),[m,c]=T.useState(!0),t=(l==null?void 0:l.features.filter(f=>f.available))||[],g=(l==null?void 0:l.features)||[],N=h?_e(h,"MMMM d, yyyy"):"N/A",P=l!=null&&l.startDate?_e(l.startDate,"MMMM d, yyyy"):"N/A",x=()=>i?"purple":n?"yellow":r?"green":"destructive",p=()=>i?"Lifetime":n?"Trial":r?"Active":"Inactive",A=()=>{d.mutate()};return e.jsxs(v,{className:"mb-6",children:[e.jsx(w,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-xl flex items-center gap-2",children:["Subscription",s!=="free"&&e.jsx(rs,{className:"h-5 w-5 text-amber-500"})]}),e.jsx(C,{children:"View and manage your subscription details"})]}),s!=="free"&&e.jsx(b,{variant:x(),className:"ml-auto",children:p()})]})}),e.jsx(y,{className:"space-y-6",children:s==="free"?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"You are currently on the free plan. Upgrade to unlock premium features."}),e.jsx(o,{className:"w-full sm:w-auto",variant:"default",children:"View Premium Plans"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"PLAN DETAILS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Current Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.charAt(0).toUpperCase()+s.slice(1),n&&" (Trial)"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Price"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l==null?void 0:l.price})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Started On"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P})]}),!i&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:n?"Trial Ends On":"Next Billing Date"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[N,u!==null&&u<=5&&e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(J,{className:"h-4 w-4 text-amber-500"})}),e.jsx(ne,{children:e.jsxs("p",{children:["Your subscription ",n?"trial":"period"," ends in ",u," days"]})})]})})]})]}),!i&&e.jsx("div",{className:"space-y-1 col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsxs(es,{htmlFor:"auto-renew",className:"flex flex-col space-y-1 cursor-pointer",children:[e.jsx("span",{children:"Auto-renew subscription"}),e.jsx("span",{className:"font-normal text-xs text-muted-foreground",children:m?"Your subscription will automatically renew":"Your subscription will expire at the end of the current period"})]}),e.jsx(Le,{id:"auto-renew",checked:m,onCheckedChange:c})]})})]})]})}),e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"PAYMENT METHOD"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-md",children:[e.jsx("div",{className:"bg-background p-2 rounded",children:e.jsx(Ns,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Visa ending in 4242"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expires 12/25"})]}),e.jsxs(o,{variant:"ghost",size:"sm",className:"ml-auto",children:[e.jsx("span",{className:"sr-only",children:"Edit payment method"}),"Edit"]})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"INCLUDED FEATURES"}),e.jsx("div",{className:"grid gap-2",children:t.length>0?t.map(f=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md transition-colors",children:[e.jsx(Me,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:f.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:f.description})]})]},f.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No premium features available"})})]}),g.filter(f=>!f.available).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("h3",{className:"font-semibold text-sm text-muted-foreground flex items-center gap-1",children:["UPGRADE TO UNLOCK",e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsx(ss,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(ne,{children:e.jsx("p",{children:"Features available in higher tier plans"})})]})})]}),e.jsxs("div",{className:"grid gap-2",children:[g.filter(f=>!f.available).slice(0,3).map(f=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md text-muted-foreground",children:[e.jsx(Vs,{className:"h-5 w-5 text-muted mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:f.name}),e.jsx("p",{className:"text-xs",children:f.description})]})]},f.id)),g.filter(f=>!f.available).length>3&&e.jsx(o,{variant:"ghost",size:"sm",className:"mt-1 text-xs",asChild:!0,children:e.jsxs("a",{href:"/premium",children:["View ",g.filter(f=>!f.available).length-3," more features ",e.jsx(Ms,{className:"h-3 w-3 ml-1"})]})})]})]})]})]})}),s!=="free"&&!i&&e.jsxs(Ie,{className:"border-t px-6 py-4 flex justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:n?"Your subscription will automatically start after the trial ends.":"You can cancel your subscription at any time."}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(o,{variant:"outline",size:"sm",children:"Cancel Subscription"})}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:"Cancel your subscription?"}),e.jsx(he,{children:n?"Your trial will end immediately and you'll lose access to premium features.":`You'll still have access to premium features until ${N}, but won't be charged again.`})]}),e.jsxs(je,{children:[e.jsx(pe,{children:"Keep Subscription"}),e.jsx(ge,{onClick:A,children:d.isPending?"Cancelling...":"Yes, Cancel Subscription"})]})]})]})]})]})}function Fe({status:s,size:a="md",className:r,withTooltip:n=!0,withLabel:i=!0}){const u={sm:"h-5 text-xs",md:"h-6 text-sm",lg:"h-7 text-base"},h={sm:12,md:14,lg:16},l=e.jsxs(b,{variant:s==="verified"?"default":s==="pending"?"outline":"secondary",className:ys("gap-1 px-2 font-medium",u[a],s==="verified"?"bg-green-600 hover:bg-green-700":"",s==="pending"?"border-yellow-400 text-yellow-600":"",s==="not_verified"?"bg-transparent text-gray-500":"",r),children:[s==="verified"&&e.jsx("img",{src:"/assets/verification/verification-badge.jpg",alt:"Verified Badge",className:"inline h-5 w-5 rounded-full object-cover",style:{height:h[a],width:h[a]}}),s==="pending"&&e.jsx(ve,{className:"inline",size:h[a]}),s==="not_verified"&&e.jsx(vs,{className:"inline",size:h[a]}),i&&e.jsxs("span",{children:[s==="verified"&&"Verified",s==="pending"&&"Pending",s==="not_verified"&&"Not Verified"]})]});return n?e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,children:l}),e.jsxs(ne,{side:"top",className:"max-w-xs",children:[s==="verified"&&e.jsx("p",{className:"text-sm",children:"This user has been verified through our identity verification process."}),s==="pending"&&e.jsx("p",{className:"text-sm",children:"Verification is in progress. This typically takes 1-3 business days."}),s==="not_verified"&&e.jsx("p",{className:"text-sm",children:"This user has not been verified yet. Premium users can verify their identity for additional features."})]})]})}):l}function Xs({user:s,resendVerificationMutation:a}){const[r,n]=T.useState(!0);return!(s!=null&&s.email)||s!=null&&s.isEmailVerified?null:e.jsx(v,{className:"border-amber-200 bg-amber-50 dark:border-amber-900 dark:bg-amber-950/30",children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/50 p-2 rounded-full",children:e.jsx(J,{className:"h-6 w-6 text-amber-600 dark:text-amber-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Please verify your email address"}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["We sent a verification link to ",s.email,". Please check your inbox and click the link to verify your account."]}),r?e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{a.mutate(),n(!1),setTimeout(()=>n(!0),6e4)},disabled:a.isPending,className:"text-xs",children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3 mr-1 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Resend verification email"]})}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Verification email sent. Please wait 60 seconds before requesting another one."})]})]})})})}function ea(){const{data:s,isLoading:a}=q({queryKey:["/api/user/verification/status"],retry:!1,staleTime:3e4}),{data:r}=q({queryKey:["/api/user/premium/status"]});return r==null||r.isPremium,a?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(M,{className:"h-4 w-4 animate-spin text-primary mr-2"}),e.jsx("span",{className:"text-xs",children:"Loading..."})]}):s&&s.status==="verified"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{status:"verified",size:"sm"}),s.verifiedAt&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["since ",new Date(s.verifiedAt).toLocaleDateString()]})]}):s&&s.status==="pending"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{status:"pending",size:"sm"}),e.jsx("span",{className:"ml-2 text-xs text-amber-600",children:"Verification pending"})]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{status:"not_verified",size:"sm"}),e.jsx(ce,{to:"/verification",className:"ml-2 text-xs text-primary hover:underline",children:"Get Verified"})]})}function Na(){const{user:s,isLoading:a,resendVerificationMutation:r}=Q(),{toast:n}=X(),[i,u]=T.useState(null),{data:h,isLoading:l}=q({queryKey:["/api/tokens"],queryFn:Te({on401:"returnNull"}),enabled:!!s}),{data:d,isLoading:m}=q({queryKey:["/api/rewards/history"],queryFn:Te({on401:"returnNull"}),enabled:!!s}),{data:c,isLoading:t}=q({queryKey:["/api/emotion"],queryFn:Te({on401:"returnNull"}),enabled:!!s,onSuccess:p=>{p!=null&&p.emotion&&u(p.emotion)}}),g=I({mutationFn:async p=>(await V("POST","/api/emotion",{emotion:p})).json(),onSuccess:p=>{u(p.emotion),p.tokensEarned>0?n({title:"Emotion Updated!",description:`You earned ${p.tokensEarned} tokens for updating your mood.`,variant:"success"}):n({title:"Emotion Updated!",description:"Your mood has been updated successfully."}),$.invalidateQueries({queryKey:["/api/emotion"]}),$.invalidateQueries({queryKey:["/api/tokens"]}),$.invalidateQueries({queryKey:["/api/rewards/history"]})},onError:p=>{n({title:"Failed to update emotion",description:"Please try again later.",variant:"destructive"})}}),N=p=>{g.mutate(p)},P=a||l||m||t;if(!P&&!s)return e.jsx(bs,{to:"/auth"});const x=p=>new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"container py-8 max-w-6xl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Your Profile"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Manage your profile, view rewards, and track achievements"}),P?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx(M,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs(be,{defaultValue:"home",className:"space-y-8",children:[e.jsxs(we,{className:"grid grid-cols-8 w-full max-w-5xl",children:[e.jsxs(S,{value:"home",className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Home"})]}),e.jsxs(S,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs(S,{value:"security",className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),e.jsxs(S,{value:"data",className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Data"})]}),e.jsxs(S,{value:"badges",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Badges"})]}),e.jsxs(S,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Challenges"})]}),e.jsxs(S,{value:"streaks",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Streaks"})]}),e.jsxs(S,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})]}),e.jsxs(E,{value:"profile",className:"space-y-6",children:[e.jsx(Zs,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Is,{}),e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"Account Information"]}),e.jsx(C,{children:"Your personal account details and token balance"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-lg font-medium",children:s==null?void 0:s.username}),e.jsx(ea,{})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Token Balance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",children:(h==null?void 0:h.tokens)||0}),e.jsx("span",{className:"font-medium",children:"Emotion Tokens"})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Subscription Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(o,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(ce,{to:"/premium",className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 text-primary w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsx("span",{children:"View Subscription Details"})]})})})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notifications"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(o,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(ce,{to:"/profile/notifications",className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 text-primary w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsx("span",{children:"View All Notifications"})]})})})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Account Created"}),e.jsx("p",{className:"text-gray-700",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})]}),e.jsx(Us,{}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsx(k,{children:"Recent Reward Activity"}),e.jsx(C,{children:"History of your most recent token earnings"})]}),e.jsx(y,{children:d&&d.length>0?e.jsx("div",{className:"space-y-4",children:d.slice(0,5).map((p,A)=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.description}),e.jsx("p",{className:"text-sm text-gray-500",children:x(p.createdAt)})]}),e.jsxs(b,{variant:"outline",className:"bg-green-50",children:["+",p.tokensEarned," tokens"]})]},A))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No reward activity to display yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Complete challenges and use the app to earn tokens!"})]})})]})})]}),e.jsx(E,{value:"security",children:e.jsx(Bs,{})}),e.jsx(E,{value:"data",children:e.jsx(zs,{})}),e.jsx(E,{value:"badges",children:e.jsx(Os,{})}),e.jsx(E,{value:"challenges",children:e.jsx($s,{})}),e.jsx(E,{value:"streaks",children:e.jsx(_s,{})}),e.jsxs(E,{value:"home",className:"space-y-6",children:[e.jsx(Xs,{user:s,resendVerificationMutation:r}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(v,{className:"md:col-span-2",children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-primary"}),"Welcome, ",(s==null?void 0:s.firstName)||(s==null?void 0:s.username)]}),e.jsx(C,{children:"Your personal dashboard and emotion intelligence center"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/10",children:[e.jsxs("h3",{className:"font-medium text-lg mb-2 flex items-center",children:[e.jsx(Ss,{className:"h-5 w-5 text-rose-500 mr-2"}),"How are you feeling today?"]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"Track your emotions to get matched with others who share similar feelings"}),e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:[e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200 ${i==="happy"?"bg-amber-50 text-amber-600 border-amber-200":""}`,onClick:()=>N("happy"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😊"}),e.jsx("span",{className:"text-xs",children:"Happy"})]}),e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 ${i==="sad"?"bg-blue-50 text-blue-600 border-blue-200":""}`,onClick:()=>N("sad"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😢"}),e.jsx("span",{className:"text-xs",children:"Sad"})]}),e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-red-50 hover:text-red-600 hover:border-red-200 ${i==="angry"?"bg-red-50 text-red-600 border-red-200":""}`,onClick:()=>N("angry"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😠"}),e.jsx("span",{className:"text-xs",children:"Angry"})]}),e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-200 ${i==="anxious"?"bg-purple-50 text-purple-600 border-purple-200":""}`,onClick:()=>N("anxious"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😰"}),e.jsx("span",{className:"text-xs",children:"Anxious"})]}),e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-green-50 hover:text-green-600 hover:border-green-200 ${i==="excited"?"bg-green-50 text-green-600 border-green-200":""}`,onClick:()=>N("excited"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"🤩"}),e.jsx("span",{className:"text-xs",children:"Excited"})]}),e.jsxs(o,{variant:"outline",className:`flex flex-col items-center py-3 hover:bg-gray-50 hover:text-gray-600 hover:border-gray-200 ${i==="neutral"?"bg-gray-50 text-gray-600 border-gray-200":""}`,onClick:()=>N("neutral"),disabled:g.isPending,children:[e.jsx("span",{className:"text-2xl mb-1",children:"😐"}),e.jsx("span",{className:"text-xs",children:"Neutral"})]}),g.isPending&&e.jsxs("div",{className:"col-span-3 md:col-span-6 flex justify-center mt-2",children:[e.jsx(M,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Updating emotion..."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs(o,{className:"w-full bg-gradient-to-r from-primary to-secondary text-white h-auto py-4 flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:"Find Connections"}),e.jsx("span",{className:"text-xs font-normal mt-1",children:"Match with others feeling the same way"})]}),e.jsxs(o,{variant:"outline",className:"w-full h-auto py-4 flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:"Open Journal"}),e.jsx("span",{className:"text-xs font-normal mt-1",children:"Record your emotional journey"})]})]})]})]}),e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2 text-primary"}),"Your Status"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tokens"}),e.jsx(b,{variant:"outline",className:"bg-gradient-to-r from-amber-400/20 to-orange-500/20 text-amber-700",children:(h==null?void 0:h.tokens)||0})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Streak"}),e.jsx(b,{variant:"outline",className:"bg-gradient-to-r from-blue-400/20 to-blue-500/20 text-blue-700",children:"3 days"})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active NFTs"}),e.jsx(b,{variant:"outline",className:"bg-gradient-to-r from-pink-400/20 to-purple-500/20 text-purple-700",children:"4"})]}),e.jsx("div",{className:"w-full mt-4",children:e.jsx(o,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(ce,{to:"/nft-collection",children:"View NFT Collection"})})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-2 text-orange-500"}),"Active Challenges"]}),e.jsx(C,{children:"Complete challenges to earn tokens"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"7-Day Emotion Tracking"}),e.jsx(b,{variant:"outline",className:"bg-green-50 text-green-700",children:"3/7 Days"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"42%"}})})]}),e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Connect with 5 People"}),e.jsx(b,{variant:"outline",className:"bg-green-50 text-green-700",children:"2/5 People"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"40%"}})})]}),e.jsxs("div",{className:"bg-card rounded-md p-3 shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Complete Profile"}),e.jsx(b,{variant:"outline",className:"bg-green-50 text-green-700",children:"70% Done"})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 dark:bg-slate-700",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"70%"}})})]})]})})]}),e.jsxs(v,{children:[e.jsxs(w,{children:[e.jsxs(k,{className:"text-base flex items-center",children:[e.jsx(fe,{className:"h-4 w-4 mr-2 text-blue-500"}),"Emotion Trends"]}),e.jsx(C,{children:"Your recent emotional patterns"})]}),e.jsx(y,{children:e.jsx("div",{className:"h-[180px] flex items-center justify-center text-center p-4 border rounded-md bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(fe,{className:"h-10 w-10 mb-2 mx-auto text-slate-400"}),e.jsx("p",{children:"Emotional data will appear here as you track your moods over time"})]})})})]})]})]}),e.jsx(E,{value:"analytics",children:e.jsx(Qs,{})})]})]})}export{Na as default};
