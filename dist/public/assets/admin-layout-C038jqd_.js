import{c,af as C,bF as L,r as n,j as e,ah as u,W as l,ai as g,bL as T,X as R,bJ as b,bK as y,ag as A,ch as M,aI as z,a as E,B as x,t as p,a5 as f,bg as O,bd as q,aN as D,Q as P,aj as Q}from"./index-CriQqr38.js";import{L as V}from"./log-out-BF9kSmxu.js";import{R as I}from"./rotate-ccw-BlpTPyoF.js";import{Q as U}from"./quote-Bd4aNfLu.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=c("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=c("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=c("TicketCheck",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),W=C,G=L,J=A,j=n.forwardRef(({className:s,...t},o)=>e.jsx(u,{className:l("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:o}));j.displayName=u.displayName;const K=M("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),N=n.forwardRef(({side:s="right",className:t,children:o,...r},i)=>e.jsxs(J,{children:[e.jsx(j,{}),e.jsxs(g,{ref:i,className:l(K({side:s}),t),...r,children:[o,e.jsxs(T,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));N.displayName=g.displayName;const X=n.forwardRef(({className:s,...t},o)=>e.jsx(b,{ref:o,className:l("text-lg font-semibold text-foreground",s),...t}));X.displayName=b.displayName;const Y=n.forwardRef(({className:s,...t},o)=>e.jsx(y,{ref:o,className:l("text-sm text-muted-foreground",s),...t}));Y.displayName=y.displayName;const Z=[{title:"Dashboard",href:"/admin",icon:D},{title:"Tickets",href:"/admin/tickets",icon:H},{title:"Refunds",href:"/admin/refunds",icon:I},{title:"Users",href:"/admin/users",icon:P},{title:"SEO Settings",href:"/admin/seo",icon:Q},{title:"Actions Log",href:"/admin/actions",icon:B},{title:"Quotes",href:"/admin/quotes",icon:U}];function te({children:s}){const[t,o]=z(),{toast:r}=E(),[i,k]=n.useState(null),[v,h]=n.useState(!1);n.useEffect(()=>{async function a(){try{const d=await p("GET","/api/admin/dashboard");if(d.ok){const S=await d.json();k(S.adminUser)}}catch(d){console.error("Error fetching admin user data:",d)}}a()},[]);const w=async()=>{try{if((await p("POST","/api/admin/logout")).ok)r({title:"Logged out",description:"You have been logged out of the admin panel"}),o("/admin/login");else throw new Error("Logout request failed")}catch(a){r({title:"Logout failed",description:a instanceof Error?a.message:"Failed to log out",variant:"destructive"})}},m=()=>e.jsxs("div",{className:"flex h-full flex-col border-r bg-background",children:[e.jsx("div",{className:"border-b p-4",children:e.jsx(f,{href:"/admin",className:"flex items-center gap-2 font-semibold",children:e.jsxs("span",{className:"text-xl font-bold",children:[e.jsx("span",{className:"text-black font-extrabold",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.1)"},children:"Mood"}),e.jsx("span",{className:"text-red-600 font-extrabold",style:{textShadow:"0px 1px 2px rgba(220,38,38,0.1)"},children:"Sync"}),e.jsx("span",{className:"ml-1 text-gray-700",children:"Admin"})]})})}),e.jsx(O,{className:"flex-1 px-3 py-2",children:e.jsx("div",{className:"space-y-1 py-2",children:Z.map(a=>e.jsx(f,{href:a.href,onClick:()=>h(!1),children:e.jsxs("div",{className:`group flex cursor-pointer items-center rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground ${t===a.href||a.href!=="/admin"&&t.startsWith(a.href)?"bg-accent text-accent-foreground":"transparent"}`,children:[e.jsx(a.icon,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:a.title}),e.jsx(q,{className:"ml-auto h-4 w-4 opacity-0 group-hover:opacity-100"})]})},a.href))})}),e.jsx("div",{className:"mt-auto border-t p-4",children:e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(i==null?void 0:i.username)||"Admin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Panel"})]}),e.jsx(x,{variant:"ghost",size:"icon",className:"ml-auto",onClick:w,children:e.jsx(V,{className:"h-5 w-5"})})]})})]});return e.jsxs("div",{className:"grid min-h-screen w-full lg:grid-cols-[280px_1fr]",children:[e.jsx("div",{className:"hidden border-r lg:block",children:e.jsx(m,{})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background px-6 lg:hidden",children:[e.jsxs(W,{open:v,onOpenChange:h,children:[e.jsx(G,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"icon",className:"lg:hidden",children:[e.jsx(F,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),e.jsx(N,{side:"left",className:"w-[280px] p-0",children:e.jsx(m,{})})]}),e.jsxs("span",{className:"text-xl font-bold",children:[e.jsx("span",{className:"text-black font-extrabold",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.1)"},children:"Mood"}),e.jsx("span",{className:"text-red-600 font-extrabold",style:{textShadow:"0px 1px 2px rgba(220,38,38,0.1)"},children:"Sync"}),e.jsx("span",{className:"ml-1 text-gray-700",children:"Admin"})]})]}),e.jsx("main",{className:"flex-1 p-6",children:s})]})]})}export{te as A,H as T};
